<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smeecher â€” TFT Analysis</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <div class="logo-text">smeecher</div>
            </div>
            <a href="https://www.pramit.gg" target="_blank" rel="noopener" class="by-line">by JoyFired</a>
        </header>

        <!-- Control Panel -->
        <div class="control-panel">
            <div class="control-panel-top">
                <!-- Search -->
                <div class="search-container">
                    <input type="text" id="search" placeholder="Search units, items, traits..." autocomplete="off">
                    <div class="search-results" id="searchResults"></div>
                </div>

                <!-- Filter Toggles -->
                <div class="filter-toggles">
                    <button id="btn-toggle-unit" class="filter-toggle unit active" onclick="toggleType('unit')">Units</button>
                    <button id="btn-toggle-item" class="filter-toggle item active" onclick="toggleType('item')">Items</button>
                    <button id="btn-toggle-trait" class="filter-toggle trait active" onclick="toggleType('trait')">Traits</button>
                </div>

                <!-- Stats -->
                <div class="stat-inline">
                    <span class="stat-label">Games</span>
                    <span class="stat-value" id="statGames">-</span>
                </div>
                <div class="stat-inline">
                    <span class="stat-label">Avg Place</span>
                    <span class="stat-value" id="statPlacement">-</span>
                </div>
            </div>

            <div class="control-panel-bottom" style="display: flex; align-items: center; gap: 16px;">
                <!-- Active Filters -->
                <div style="flex: 1;">
                    <div class="section-title">Active Filters</div>
                    <div class="chips" id="chips"></div>
                </div>

                <!-- Top-K Control -->
                <div style="display: flex; align-items: center; gap: 6px; white-space: nowrap;">
                    <span style="font-size: 10px; color: var(--text-tertiary); text-transform: uppercase; letter-spacing: 0.04em; font-weight: 500;">Top-K</span>
                    <input type="number" id="topKInput" value="15" min="0" max="500" style="
                        width: 50px;
                        padding: 4px 6px;
                        font-size: 13px;
                        font-weight: 600;
                        background: var(--bg-tertiary);
                        border: 1px solid var(--border);
                        border-radius: 4px;
                        color: var(--text-primary);
                        text-align: center;
                    " title="0 = unlimited">
                </div>
            </div>
        </div>

        <!-- Graph -->
        <div class="graph-section">
            <div class="graph-container">
                <svg id="graph"></svg>
            </div>
        </div>

        <!-- Legend -->
        <div class="legend">
            <div class="legend-group">
                <div class="legend-group-title">Node Types</div>
                <div class="legend-items">
                    <div class="legend-item" onclick="toggleType('unit')" id="legend-unit">
                        <div class="legend-dot unit"></div>
                        <span>Unit</span>
                    </div>
                    <div class="legend-item" onclick="toggleType('item')" id="legend-item">
                        <div class="legend-dot item"></div>
                        <span>Item</span>
                    </div>
                    <div class="legend-item" onclick="toggleType('trait')" id="legend-trait">
                        <div class="legend-dot trait"></div>
                        <span>Trait</span>
                    </div>
                </div>
            </div>
            <div class="legend-group">
                <div class="legend-group-title">Placement Impact</div>
                <div class="legend-items">
                    <div class="legend-item">
                        <div class="legend-line positive"></div>
                        <span>Improves placement</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-line negative"></div>
                        <span>Worsens placement</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tooltip (positioned absolutely) -->
    <div class="tooltip" id="tooltip" style="display: none;"></div>

    <!-- Application JavaScript -->
    <script src="/static/js/app.js"></script>
</body>
</html>
