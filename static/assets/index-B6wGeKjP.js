(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const Zi=!1;var wi=Array.isArray,hl=Array.prototype.indexOf,bi=Array.from,Sa=Object.defineProperty,dr=Object.getOwnPropertyDescriptor,Ca=Object.getOwnPropertyDescriptors,vl=Object.prototype,dl=Array.prototype,_s=Object.getPrototypeOf,Xs=Object.isExtensible;const Ge=()=>{};function pl(t){return t()}function ii(t){for(var e=0;e<t.length;e++)t[e]()}function Ia(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}const $t=2,gs=4,$i=8,_l=1<<24,Fe=16,De=32,xn=64,Ei=128,re=512,wt=1024,Rt=2048,ie=4096,Yt=8192,Ze=16384,ms=32768,Dn=65536,Ys=1<<17,Pa=1<<18,Bn=1<<19,Ra=1<<20,Ae=1<<25,pn=32768,Qi=1<<21,ys=1<<22,Qe=1<<23,je=Symbol("$state"),Cn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function xs(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function gl(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ml(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function yl(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function xl(t){throw new Error("https://svelte.dev/e/effect_orphan")}function wl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function bl(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function $l(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function El(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function kl(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Tl=1,Ml=2,Fa=4,zl=8,Al=16,Nl=1,Sl=2,Et=Symbol(),Cl="http://www.w3.org/1999/xhtml";function Il(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Pl(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Da(t){return t===this.v}function La(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Oa(t){return!La(t,this.v)}let Tr=!1,Rl=!1;function Fl(){Tr=!0}let ft=null;function Ln(t){ft=t}function se(t,e=!1,n){ft={p:ft,i:!1,c:null,e:null,s:t,x:null,l:Tr&&!e?{s:null,u:null,$:[]}:null}}function ae(t){var e=ft,n=e.e;if(n!==null){e.e=null;for(var r of n)no(r)}return e.i=!0,ft=e.p,{}}function Mr(){return!Tr||ft!==null&&ft.l===null}let ln=[];function qa(){var t=ln;ln=[],ii(t)}function Vn(t){if(ln.length===0&&!_r){var e=ln;queueMicrotask(()=>{e===ln&&qa()})}ln.push(t)}function Dl(){for(;ln.length>0;)qa()}function Ha(t){var e=lt;if(e===null)return et.f|=Qe,t;if((e.f&ms)===0){if((e.f&Ei)===0)throw t;e.b.error(t)}else On(t,e)}function On(t,e){for(;e!==null;){if((e.f&Ei)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t}const Ur=new Set;let rt=null,pr=null,Qt=null,Gt=[],ki=null,ji=!1,_r=!1;class ce{committed=!1;current=new Map;previous=new Map;#t=new Set;#e=new Set;#r=0;#n=0;#l=null;#s=new Set;#i=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){Gt=[],pr=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const r of e)this.#a(r,n);this.is_fork||this.#c(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects)):(pr=this,rt=null,Bs(n.render_effects),Bs(n.effects),pr=null,this.#l?.resolve()),Qt=null}#a(e,n){e.f^=wt;for(var r=e.first;r!==null;){var i=r.f,s=(i&(De|xn))!==0,a=s&&(i&wt)!==0,o=a||(i&Yt)!==0||this.skipped_effects.has(r);if((r.f&Ei)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[]}),!o&&r.fn!==null){s?r.f^=wt:(i&gs)!==0?n.effects.push(r):Kn(r)&&((r.f&Fe)!==0&&this.#s.add(r),qn(r));var u=r.first;if(u!==null){r=u;continue}}var l=r.parent;for(r=r.next;r===null&&l!==null;)l===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),n=n.parent),r=l.next,l=l.parent}}#o(e){for(const n of e)(n.f&Rt)!==0?this.#s.add(n):(n.f&ie)!==0&&this.#i.add(n),this.#u(n.deps),bt(n,wt)}#u(e){if(e!==null)for(const n of e)(n.f&$t)===0||(n.f&pn)===0||(n.f^=pn,this.#u(n.deps))}capture(e,n){this.previous.has(e)||this.previous.set(e,n),(e.f&Qe)===0&&(this.current.set(e,e.v),Qt?.set(e,e.v))}activate(){rt=this,this.apply()}deactivate(){rt===this&&(rt=null,Qt=null)}flush(){if(this.activate(),Gt.length>0){if(Xa(),rt!==null&&rt!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#e)e(this);this.#e.clear()}#c(){if(this.#n===0){for(const e of this.#t)e();this.#t.clear()}this.#r===0&&this.#f()}#f(){if(Ur.size>1){this.previous.clear();var e=Qt,n=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const s of Ur){if(s===this){n=!1;continue}const a=[];for(const[u,l]of this.current){if(s.current.has(u))if(n&&l!==s.current.get(u))s.current.set(u,l);else continue;a.push(u)}if(a.length===0)continue;const o=[...s.current.keys()].filter(u=>!this.current.has(u));if(o.length>0){var i=Gt;Gt=[];const u=new Set,l=new Map;for(const c of a)Ya(c,o,u,l);if(Gt.length>0){rt=s,s.apply();for(const c of Gt)s.#a(c,r);s.deactivate()}Gt=i}}rt=null,Qt=e}this.committed=!0,Ur.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#s)this.#i.delete(e),bt(e,Rt),_n(e);for(const e of this.#i)bt(e,ie),_n(e);this.flush()}oncommit(e){this.#t.add(e)}ondiscard(e){this.#e.add(e)}settled(){return(this.#l??=Ia()).promise}static ensure(){if(rt===null){const e=rt=new ce;Ur.add(rt),_r||ce.enqueue(()=>{rt===e&&e.flush()})}return rt}static enqueue(e){Vn(e)}apply(){}}function Ll(t){var e=_r;_r=!0;try{for(var n;;){if(Dl(),Gt.length===0&&(rt?.flush(),Gt.length===0))return ki=null,n;Xa()}}finally{_r=e}}function Xa(){var t=hn;ji=!0;var e=null;try{var n=0;for(oi(!0);Gt.length>0;){var r=ce.ensure();if(n++>1e3){var i,s;Ol()}r.process(Gt),Je.clear()}}finally{ji=!1,oi(t),ki=null}}function Ol(){try{wl()}catch(t){On(t,ki)}}let ke=null;function Bs(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(Ze|Yt))===0&&Kn(r)&&(ke=new Set,qn(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?ao(r):r.fn=null),ke?.size>0)){Je.clear();for(const i of ke){if((i.f&(Ze|Yt))!==0)continue;const s=[i];let a=i.parent;for(;a!==null;)ke.has(a)&&(ke.delete(a),s.push(a)),a=a.parent;for(let o=s.length-1;o>=0;o--){const u=s[o];(u.f&(Ze|Yt))===0&&qn(u)}}ke.clear()}}ke=null}}function Ya(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const i of t.reactions){const s=i.f;(s&$t)!==0?Ya(i,e,n,r):(s&(ys|Fe))!==0&&(s&Rt)===0&&Ba(i,e,r)&&(bt(i,Rt),_n(i))}}function Ba(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const i of t.deps){if(e.includes(i))return!0;if((i.f&$t)!==0&&Ba(i,e,n))return n.set(i,!0),!0}return n.set(t,!1),!1}function _n(t){for(var e=ki=t;e.parent!==null;){e=e.parent;var n=e.f;if(ji&&e===lt&&(n&Fe)!==0&&(n&Pa)===0)return;if((n&(xn|De))!==0){if((n&wt)===0)return;e.f^=wt}}Gt.push(e)}function ql(t){let e=0,n=gn(0),r;return()=>{yr()&&(h(n),Un(()=>(e===0&&(r=A(()=>t(()=>gr(n)))),e+=1,()=>{Vn(()=>{e-=1,e===0&&(r?.(),r=void 0,gr(n))})})))}}var Hl=Dn|Bn|Ei;function Xl(t,e,n){new Yl(t,e,n)}class Yl{parent;#t=!1;#e;#r=null;#n;#l;#s;#i=null;#a=null;#o=null;#u=null;#c=null;#f=0;#h=0;#d=!1;#v=null;#y=ql(()=>(this.#v=gn(this.#f),()=>{this.#v=null}));constructor(e,n,r){this.#e=e,this.#n=n,this.#l=r,this.parent=lt.b,this.#t=!!this.#n.pending,this.#s=Es(()=>{lt.b=this;{var i=this.#g();try{this.#i=Zt(()=>r(i))}catch(s){this.error(s)}this.#h>0?this.#_():this.#t=!1}return()=>{this.#c?.remove()}},Hl)}#x(){try{this.#i=Zt(()=>this.#l(this.#e))}catch(e){this.error(e)}this.#t=!1}#w(){const e=this.#n.pending;e&&(this.#a=Zt(()=>e(this.#e)),ce.enqueue(()=>{var n=this.#g();this.#i=this.#p(()=>(ce.ensure(),Zt(()=>this.#l(n)))),this.#h>0?this.#_():(fn(this.#a,()=>{this.#a=null}),this.#t=!1)}))}#g(){var e=this.#e;return this.#t&&(this.#c=Ie(),this.#e.before(this.#c),e=this.#c),e}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(e){var n=lt,r=et,i=ft;de(this.#s),Ct(this.#s),Ln(this.#s.ctx);try{return e()}catch(s){return Ha(s),null}finally{de(n),Ct(r),Ln(i)}}#_(){const e=this.#n.pending;this.#i!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#c),uo(this.#i,this.#u)),this.#a===null&&(this.#a=Zt(()=>e(this.#e)))}#m(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(e);return}this.#h+=e,this.#h===0&&(this.#t=!1,this.#a&&fn(this.#a,()=>{this.#a=null}),this.#u&&(this.#e.before(this.#u),this.#u=null))}update_pending_count(e){this.#m(e),this.#f+=e,this.#v&&mn(this.#v,this.#f)}get_effect_pending(){return this.#y(),h(this.#v)}error(e){var n=this.#n.onerror;let r=this.#n.failed;if(this.#d||!n&&!r)throw e;this.#i&&(Pt(this.#i),this.#i=null),this.#a&&(Pt(this.#a),this.#a=null),this.#o&&(Pt(this.#o),this.#o=null);var i=!1,s=!1;const a=()=>{if(i){Pl();return}i=!0,s&&kl(),ce.ensure(),this.#f=0,this.#o!==null&&fn(this.#o,()=>{this.#o=null}),this.#t=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#d=!1,Zt(()=>this.#l(this.#e)))),this.#h>0?this.#_():this.#t=!1};var o=et;try{Ct(null),s=!0,n?.(e,a),s=!1}catch(u){On(u,this.#s&&this.#s.parent)}finally{Ct(o)}r&&Vn(()=>{this.#o=this.#p(()=>{ce.ensure(),this.#d=!0;try{return Zt(()=>{r(this.#e,()=>e,()=>a)})}catch(u){return On(u,this.#s.parent),null}finally{this.#d=!1}})})}}function Bl(t,e,n,r){const i=Mr()?ws:Va;if(n.length===0&&t.length===0){r(e.map(i));return}var s=rt,a=lt,o=Vl();function u(){Promise.all(n.map(l=>Ul(l))).then(l=>{o();try{r([...e.map(i),...l])}catch(c){(a.f&Ze)===0&&On(c,a)}s?.deactivate(),si()}).catch(l=>{On(l,a)})}t.length>0?Promise.all(t).then(()=>{o();try{return u()}finally{s?.deactivate(),si()}}):u()}function Vl(){var t=lt,e=et,n=ft,r=rt;return function(s=!0){de(t),Ct(e),Ln(n),s&&r?.activate()}}function si(){de(null),Ct(null),Ln(null)}function ws(t){var e=$t|Rt,n=et!==null&&(et.f&$t)!==0?et:null;return lt!==null&&(lt.f|=Bn),{ctx:ft,deps:null,effects:null,equals:Da,f:e,fn:t,reactions:null,rv:0,v:Et,wv:0,parent:n??lt,ac:null}}function Ul(t,e){let n=lt;n===null&&gl();var r=n.b,i=void 0,s=gn(Et),a=!et,o=new Map;return nu(()=>{var u=Ia();i=u.promise;try{Promise.resolve(t()).then(u.resolve,u.reject).then(()=>{l===rt&&l.committed&&l.deactivate(),si()})}catch(f){u.reject(f),si()}var l=rt;if(a){var c=!r.is_pending();r.update_pending_count(1),l.increment(c),o.get(l)?.reject(Cn),o.delete(l),o.set(l,u)}const d=(f,v=void 0)=>{if(l.activate(),v)v!==Cn&&(s.f|=Qe,mn(s,v));else{(s.f&Qe)!==0&&(s.f^=Qe),mn(s,f);for(const[m,g]of o){if(o.delete(m),m===l)break;g.reject(Cn)}}a&&(r.update_pending_count(-1),l.decrement(c))};u.promise.then(d,f=>d(null,f||"unknown"))}),Mi(()=>{for(const u of o.values())u.reject(Cn)}),new Promise(u=>{function l(c){function d(){c===i?u(s):l(i)}c.then(d,d)}l(i)})}function Va(t){const e=ws(t);return e.equals=Oa,e}function Ua(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)Pt(e[n])}}function Wl(t){for(var e=t.parent;e!==null;){if((e.f&$t)===0)return(e.f&Ze)===0?e:null;e=e.parent}return null}function bs(t){var e,n=lt;de(Wl(t));try{t.f&=~pn,Ua(t),e=vo(t)}finally{de(n)}return e}function Wa(t){var e=bs(t);if(t.equals(e)||(rt?.is_fork||(t.v=e),t.wv=fo()),!Wn)if(Qt!==null)(yr()||rt?.is_fork)&&Qt.set(t,e);else{var n=(t.f&re)===0?ie:wt;bt(t,n)}}let Ji=new Set;const Je=new Map;let Ka=!1;function gn(t,e){var n={f:0,v:t,reactions:null,equals:Da,rv:0,wv:0};return n}function Ve(t,e){const n=gn(t);return ou(n),n}function at(t,e=!1,n=!0){const r=gn(t);return e||(r.equals=Oa),Tr&&n&&ft!==null&&ft.l!==null&&(ft.l.s??=[]).push(r),r}function Wr(t,e){return Y(t,A(()=>h(t))),e}function Y(t,e,n=!1){et!==null&&(!fe||(et.f&Ys)!==0)&&Mr()&&(et.f&($t|Fe|ys|Ys))!==0&&!Pe?.includes(t)&&El();let r=n?ur(e):e;return mn(t,r)}function mn(t,e){if(!t.equals(e)){var n=t.v;Wn?Je.set(t,e):Je.set(t,n),t.v=e;var r=ce.ensure();r.capture(t,n),(t.f&$t)!==0&&((t.f&Rt)!==0&&bs(t),bt(t,(t.f&re)!==0?wt:ie)),t.wv=fo(),Ga(t,Rt),Mr()&&lt!==null&&(lt.f&wt)!==0&&(lt.f&(De|xn))===0&&(Kt===null?lu([t]):Kt.push(t)),!r.is_fork&&Ji.size>0&&!Ka&&Kl()}return e}function Kl(){Ka=!1;var t=hn;oi(!0);const e=Array.from(Ji);try{for(const n of e)(n.f&wt)!==0&&bt(n,ie),Kn(n)&&qn(n)}finally{oi(t)}Ji.clear()}function gr(t){Y(t,t.v+1)}function Ga(t,e){var n=t.reactions;if(n!==null)for(var r=Mr(),i=n.length,s=0;s<i;s++){var a=n[s],o=a.f;if(!(!r&&a===lt)){var u=(o&Rt)===0;if(u&&bt(a,e),(o&$t)!==0){var l=a;Qt?.delete(l),(o&pn)===0&&(o&re&&(a.f|=pn),Ga(l,ie))}else u&&((o&Fe)!==0&&ke!==null&&ke.add(a),_n(a))}}}function ur(t){if(typeof t!="object"||t===null||je in t)return t;const e=_s(t);if(e!==vl&&e!==dl)return t;var n=new Map,r=wi(t),i=Ve(0),s=vn,a=o=>{if(vn===s)return o();var u=et,l=vn;Ct(null),Gs(s);var c=o();return Ct(u),Gs(l),c};return r&&n.set("length",Ve(t.length)),new Proxy(t,{defineProperty(o,u,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&bl();var c=n.get(u);return c===void 0?c=a(()=>{var d=Ve(l.value);return n.set(u,d),d}):Y(c,l.value,!0),!0},deleteProperty(o,u){var l=n.get(u);if(l===void 0){if(u in o){const c=a(()=>Ve(Et));n.set(u,c),gr(i)}}else Y(l,Et),gr(i);return!0},get(o,u,l){if(u===je)return t;var c=n.get(u),d=u in o;if(c===void 0&&(!d||dr(o,u)?.writable)&&(c=a(()=>{var v=ur(d?o[u]:Et),m=Ve(v);return m}),n.set(u,c)),c!==void 0){var f=h(c);return f===Et?void 0:f}return Reflect.get(o,u,l)},getOwnPropertyDescriptor(o,u){var l=Reflect.getOwnPropertyDescriptor(o,u);if(l&&"value"in l){var c=n.get(u);c&&(l.value=h(c))}else if(l===void 0){var d=n.get(u),f=d?.v;if(d!==void 0&&f!==Et)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return l},has(o,u){if(u===je)return!0;var l=n.get(u),c=l!==void 0&&l.v!==Et||Reflect.has(o,u);if(l!==void 0||lt!==null&&(!c||dr(o,u)?.writable)){l===void 0&&(l=a(()=>{var f=c?ur(o[u]):Et,v=Ve(f);return v}),n.set(u,l));var d=h(l);if(d===Et)return!1}return c},set(o,u,l,c){var d=n.get(u),f=u in o;if(r&&u==="length")for(var v=l;v<d.v;v+=1){var m=n.get(v+"");m!==void 0?Y(m,Et):v in o&&(m=a(()=>Ve(Et)),n.set(v+"",m))}if(d===void 0)(!f||dr(o,u)?.writable)&&(d=a(()=>Ve(void 0)),Y(d,ur(l)),n.set(u,d));else{f=d.v!==Et;var g=a(()=>ur(l));Y(d,g)}var p=Reflect.getOwnPropertyDescriptor(o,u);if(p?.set&&p.set.call(c,l),!f){if(r&&typeof u=="string"){var _=n.get("length"),w=Number(u);Number.isInteger(w)&&w>=_.v&&Y(_,w+1)}gr(i)}return!0},ownKeys(o){h(i);var u=Reflect.ownKeys(o).filter(d=>{var f=n.get(d);return f===void 0||f.v!==Et});for(var[l,c]of n)c.v!==Et&&!(l in o)&&u.push(l);return u},setPrototypeOf(){$l()}})}function Vs(t){try{if(t!==null&&typeof t=="object"&&je in t)return t[je]}catch{}return t}function Gl(t,e){return Object.is(Vs(t),Vs(e))}var Us,Za,Qa,ja,Ja;function Zl(){if(Us===void 0){Us=window,Za=document,Qa=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;ja=dr(e,"firstChild").get,Ja=dr(e,"nextSibling").get,Xs(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Xs(n)&&(n.__t=void 0)}}function Ie(t=""){return document.createTextNode(t)}function ai(t){return ja.call(t)}function zr(t){return Ja.call(t)}function b(t,e){return ai(t)}function Ne(t,e=!1){{var n=ai(t);return n instanceof Comment&&n.data===""?zr(n):n}}function M(t,e=1,n=!1){let r=t;for(;e--;)r=zr(r);return r}function Ql(t){t.textContent=""}function to(){return!1}let Ws=!1;function jl(){Ws||(Ws=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Ti(t){var e=et,n=lt;Ct(null),de(null);try{return t()}finally{Ct(e),de(n)}}function $s(t,e,n,r=n){t.addEventListener(e,()=>Ti(n));const i=t.__on_r;i?t.__on_r=()=>{i(),r(!0)}:t.__on_r=()=>r(!0),jl()}function eo(t){lt===null&&(et===null&&xl(),yl()),Wn&&ml()}function Jl(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function pe(t,e,n){var r=lt;r!==null&&(r.f&Yt)!==0&&(t|=Yt);var i={ctx:ft,deps:null,nodes:null,f:t|Rt|re,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{qn(i),i.f|=ms}catch(o){throw Pt(i),o}else e!==null&&_n(i);var s=i;if(n&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&Bn)===0&&(s=s.first,(t&Fe)!==0&&(t&Dn)!==0&&s!==null&&(s.f|=Dn)),s!==null&&(s.parent=r,r!==null&&Jl(s,r),et!==null&&(et.f&$t)!==0&&(t&xn)===0)){var a=et;(a.effects??=[]).push(s)}return i}function yr(){return et!==null&&!fe}function Mi(t){const e=pe($i,null,!1);return bt(e,wt),e.teardown=t,e}function ts(t){eo();var e=lt.f,n=!et&&(e&De)!==0&&(e&ms)===0;if(n){var r=ft;(r.e??=[]).push(t)}else return no(t)}function no(t){return pe(gs|Ra,t,!1)}function tu(t){return eo(),pe($i|Ra,t,!0)}function eu(t){ce.ensure();const e=pe(xn|Bn,t,!0);return(n={})=>new Promise(r=>{n.outro?fn(e,()=>{Pt(e),r(void 0)}):(Pt(e),r(void 0))})}function ro(t){return pe(gs,t,!1)}function xt(t,e){var n=ft,r={effect:null,ran:!1,deps:t};n.l.$.push(r),r.effect=Un(()=>{t(),!r.ran&&(r.ran=!0,A(e))})}function wn(){var t=ft;Un(()=>{for(var e of t.l.$){e.deps();var n=e.effect;(n.f&wt)!==0&&bt(n,ie),Kn(n)&&qn(n),e.ran=!1}})}function nu(t){return pe(ys|Bn,t,!0)}function Un(t,e=0){return pe($i|e,t,!0)}function nt(t,e=[],n=[],r=[]){Bl(r,e,n,i=>{pe($i,()=>t(...i.map(h)),!0)})}function Es(t,e=0){var n=pe(Fe|e,t,!0);return n}function Zt(t){return pe(De|Bn,t,!0)}function io(t){var e=t.teardown;if(e!==null){const n=Wn,r=et;Ks(!0),Ct(null);try{e.call(null)}finally{Ks(n),Ct(r)}}}function so(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const i=n.ac;i!==null&&Ti(()=>{i.abort(Cn)});var r=n.next;(n.f&xn)!==0?n.parent=null:Pt(n,e),n=r}}function ru(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&De)===0&&Pt(e),e=n}}function Pt(t,e=!0){var n=!1;(e||(t.f&Pa)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(iu(t.nodes.start,t.nodes.end),n=!0),so(t,e&&!n),li(t,0),bt(t,Ze);var r=t.nodes&&t.nodes.t;if(r!==null)for(const s of r)s.stop();io(t);var i=t.parent;i!==null&&i.first!==null&&ao(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function iu(t,e){for(;t!==null;){var n=t===e?null:zr(t);t.remove(),t=n}}function ao(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function fn(t,e,n=!0){var r=[];oo(t,r,!0);var i=()=>{n&&Pt(t),e&&e()},s=r.length;if(s>0){var a=()=>--s||i();for(var o of r)o.out(a)}else i()}function oo(t,e,n){if((t.f&Yt)===0){t.f^=Yt;var r=t.nodes&&t.nodes.t;if(r!==null)for(const o of r)(o.is_global||n)&&e.push(o);for(var i=t.first;i!==null;){var s=i.next,a=(i.f&Dn)!==0||(i.f&De)!==0&&(t.f&Fe)!==0;oo(i,e,a?n:!1),i=s}}}function ks(t){lo(t,!0)}function lo(t,e){if((t.f&Yt)!==0){t.f^=Yt,(t.f&wt)===0&&(bt(t,Rt),_n(t));for(var n=t.first;n!==null;){var r=n.next,i=(n.f&Dn)!==0||(n.f&De)!==0;lo(n,i?e:!1),n=r}var s=t.nodes&&t.nodes.t;if(s!==null)for(const a of s)(a.is_global||e)&&a.in()}}function uo(t,e){if(t.nodes)for(var n=t.nodes.start,r=t.nodes.end;n!==null;){var i=n===r?null:zr(n);e.append(n),n=i}}let Sn=null;function su(t){var e=Sn;try{if(Sn=new Set,A(t),e!==null)for(var n of Sn)e.add(n);return Sn}finally{Sn=e}}function au(t){for(var e of su(t))mn(e,e.v)}let hn=!1;function oi(t){hn=t}let Wn=!1;function Ks(t){Wn=t}let et=null,fe=!1;function Ct(t){et=t}let lt=null;function de(t){lt=t}let Pe=null;function ou(t){et!==null&&(Pe===null?Pe=[t]:Pe.push(t))}let kt=null,Xt=0,Kt=null;function lu(t){Kt=t}let co=1,xr=0,vn=xr;function Gs(t){vn=t}function fo(){return++co}function Kn(t){var e=t.f;if((e&Rt)!==0)return!0;if(e&$t&&(t.f&=~pn),(e&ie)!==0){var n=t.deps;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i];if(Kn(s)&&Wa(s),s.wv>t.wv)return!0}(e&re)!==0&&Qt===null&&bt(t,wt)}return!1}function ho(t,e,n=!0){var r=t.reactions;if(r!==null&&!Pe?.includes(t))for(var i=0;i<r.length;i++){var s=r[i];(s.f&$t)!==0?ho(s,e,!1):e===s&&(n?bt(s,Rt):(s.f&wt)!==0&&bt(s,ie),_n(s))}}function vo(t){var e=kt,n=Xt,r=Kt,i=et,s=Pe,a=ft,o=fe,u=vn,l=t.f;kt=null,Xt=0,Kt=null,et=(l&(De|xn))===0?t:null,Pe=null,Ln(t.ctx),fe=!1,vn=++xr,t.ac!==null&&(Ti(()=>{t.ac.abort(Cn)}),t.ac=null);try{t.f|=Qi;var c=t.fn,d=c(),f=t.deps;if(kt!==null){var v;if(li(t,Xt),f!==null&&Xt>0)for(f.length=Xt+kt.length,v=0;v<kt.length;v++)f[Xt+v]=kt[v];else t.deps=f=kt;if(yr()&&(t.f&re)!==0)for(v=Xt;v<f.length;v++)(f[v].reactions??=[]).push(t)}else f!==null&&Xt<f.length&&(li(t,Xt),f.length=Xt);if(Mr()&&Kt!==null&&!fe&&f!==null&&(t.f&($t|ie|Rt))===0)for(v=0;v<Kt.length;v++)ho(Kt[v],t);return i!==null&&i!==t&&(xr++,Kt!==null&&(r===null?r=Kt:r.push(...Kt))),(t.f&Qe)!==0&&(t.f^=Qe),d}catch(m){return Ha(m)}finally{t.f^=Qi,kt=e,Xt=n,Kt=r,et=i,Pe=s,Ln(a),fe=o,vn=u}}function uu(t,e){let n=e.reactions;if(n!==null){var r=hl.call(n,t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(e.f&$t)!==0&&(kt===null||!kt.includes(e))&&(bt(e,ie),(e.f&re)!==0&&(e.f^=re,e.f&=~pn),Ua(e),li(e,0))}function li(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)uu(t,n[r])}function qn(t){var e=t.f;if((e&Ze)===0){bt(t,wt);var n=lt,r=hn;lt=t,hn=!0;try{(e&(Fe|_l))!==0?ru(t):so(t),io(t);var i=vo(t);t.teardown=typeof i=="function"?i:null,t.wv=co;var s;Zi&&Rl&&(t.f&Rt)!==0&&t.deps}finally{hn=r,lt=n}}}async function cu(){await Promise.resolve(),Ll()}function h(t){var e=t.f,n=(e&$t)!==0;if(Sn?.add(t),et!==null&&!fe){var r=lt!==null&&(lt.f&Ze)!==0;if(!r&&!Pe?.includes(t)){var i=et.deps;if((et.f&Qi)!==0)t.rv<xr&&(t.rv=xr,kt===null&&i!==null&&i[Xt]===t?Xt++:kt===null?kt=[t]:kt.includes(t)||kt.push(t));else{(et.deps??=[]).push(t);var s=t.reactions;s===null?t.reactions=[et]:s.includes(et)||s.push(et)}}}if(Wn){if(Je.has(t))return Je.get(t);if(n){var a=t,o=a.v;return((a.f&wt)===0&&a.reactions!==null||_o(a))&&(o=bs(a)),Je.set(a,o),o}}else n&&(!Qt?.has(t)||rt?.is_fork&&!yr())&&(a=t,Kn(a)&&Wa(a),hn&&yr()&&(a.f&re)===0&&po(a));if(Qt?.has(t))return Qt.get(t);if((t.f&Qe)!==0)throw t.v;return t.v}function po(t){if(t.deps!==null){t.f^=re;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&$t)!==0&&(e.f&re)===0&&po(e)}}function _o(t){if(t.v===Et)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Je.has(e)||(e.f&$t)!==0&&_o(e))return!0;return!1}function A(t){var e=fe;try{return fe=!0,t()}finally{fe=e}}const fu=-7169;function bt(t,e){t.f=t.f&fu|e}function ee(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(je in t)es(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&je in n&&es(n)}}}function es(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{es(t[r],e)}catch{}const n=_s(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Ca(n);for(let i in r){const s=r[i].get;if(s)try{s.call(t)}catch{}}}}}const hu=["touchstart","touchmove"];function vu(t){return hu.includes(t)}const du=new Set,Zs=new Set;function pu(t,e,n,r={}){function i(s){if(r.capture||cr.call(e,s),!s.cancelBubble)return Ti(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Vn(()=>{e.addEventListener(t,i,r)}):e.addEventListener(t,i,r),i}function ht(t,e,n,r,i){var s={capture:r,passive:i},a=pu(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Mi(()=>{e.removeEventListener(t,a,s)})}let Qs=null;function cr(t){var e=this,n=e.ownerDocument,r=t.type,i=t.composedPath?.()||[],s=i[0]||t.target;Qs=t;var a=0,o=Qs===t&&t.__root;if(o){var u=i.indexOf(o);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var l=i.indexOf(e);if(l===-1)return;u<=l&&(a=u)}if(s=i[a]||t.target,s!==e){Sa(t,"currentTarget",{configurable:!0,get(){return s||n}});var c=et,d=lt;Ct(null),de(null);try{for(var f,v=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var g=s["__"+r];g!=null&&(!s.disabled||t.target===s)&&g.call(s,t)}catch(p){f?v.push(p):f=p}if(t.cancelBubble||m===e||m===null)break;s=m}if(f){for(let p of v)queueMicrotask(()=>{throw p});throw f}}finally{t.__root=e,delete t.currentTarget,Ct(c),de(d)}}}function _u(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function ui(t,e){var n=lt;n.nodes===null&&(n.nodes={start:t,end:e,a:null,t:null})}function W(t,e){var n=(e&Nl)!==0,r=(e&Sl)!==0,i,s=!t.startsWith("<!>");return()=>{i===void 0&&(i=_u(s?t:"<!>"+t),n||(i=ai(i)));var a=r||Qa?document.importNode(i,!0):i.cloneNode(!0);if(n){var o=ai(a),u=a.lastChild;ui(o,u)}else ui(a,a);return a}}function Hi(t=""){{var e=Ie(t+"");return ui(e,e),e}}function ci(){var t=document.createDocumentFragment(),e=document.createComment(""),n=Ie();return t.append(e,n),ui(e,n),t}function H(t,e){t!==null&&t.before(e)}function G(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function gu(t,e){return mu(t,e)}const zn=new Map;function mu(t,{target:e,anchor:n,props:r={},events:i,context:s,intro:a=!0}){Zl();var o=new Set,u=d=>{for(var f=0;f<d.length;f++){var v=d[f];if(!o.has(v)){o.add(v);var m=vu(v);e.addEventListener(v,cr,{passive:m});var g=zn.get(v);g===void 0?(document.addEventListener(v,cr,{passive:m}),zn.set(v,1)):zn.set(v,g+1)}}};u(bi(du)),Zs.add(u);var l=void 0,c=eu(()=>{var d=n??e.appendChild(Ie());return Xl(d,{pending:()=>{}},f=>{if(s){se({});var v=ft;v.c=s}i&&(r.$$events=i),l=t(f,r)||{},s&&ae()}),()=>{for(var f of o){e.removeEventListener(f,cr);var v=zn.get(f);--v===0?(document.removeEventListener(f,cr),zn.delete(f)):zn.set(f,v)}Zs.delete(u),d!==n&&d.parentNode?.removeChild(d)}});return yu.set(l,c),l}let yu=new WeakMap;class xu{anchor;#t=new Map;#e=new Map;#r=new Map;#n=new Set;#l=!0;constructor(e,n=!0){this.anchor=e,this.#l=n}#s=()=>{var e=rt;if(this.#t.has(e)){var n=this.#t.get(e),r=this.#e.get(n);if(r)ks(r),this.#n.delete(n);else{var i=this.#r.get(n);i&&(this.#e.set(n,i.effect),this.#r.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,a]of this.#t){if(this.#t.delete(s),s===e)break;const o=this.#r.get(a);o&&(Pt(o.effect),this.#r.delete(a))}for(const[s,a]of this.#e){if(s===n||this.#n.has(s))continue;const o=()=>{if(Array.from(this.#t.values()).includes(s)){var l=document.createDocumentFragment();uo(a,l),l.append(Ie()),this.#r.set(s,{effect:a,fragment:l})}else Pt(a);this.#n.delete(s),this.#e.delete(s)};this.#l||!r?(this.#n.add(s),fn(a,o,!1)):o()}}};#i=e=>{this.#t.delete(e);const n=Array.from(this.#t.values());for(const[r,i]of this.#r)n.includes(r)||(Pt(i.effect),this.#r.delete(r))};ensure(e,n){var r=rt,i=to();if(n&&!this.#e.has(e)&&!this.#r.has(e))if(i){var s=document.createDocumentFragment(),a=Ie();s.append(a),this.#r.set(e,{effect:Zt(()=>n(a)),fragment:s})}else this.#e.set(e,Zt(()=>n(this.anchor)));if(this.#t.set(r,e),i){for(const[o,u]of this.#e)o===e?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[o,u]of this.#r)o===e?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(this.#s),r.ondiscard(this.#i)}else this.#s()}}function vt(t,e,n=!1){var r=new xu(t),i=n?Dn:0;function s(a,o){r.ensure(a,o)}Es(()=>{var a=!1;e((o,u=!0)=>{a=!0,s(u,o)}),a||s(!1,null)},i)}function Te(t,e){return e}function wu(t,e,n){for(var r=[],i=e.length,s,a=e.length,o=0;o<i;o++){let d=e[o];fn(d,()=>{if(s){if(s.pending.delete(d),s.done.add(d),s.pending.size===0){var f=t.outrogroups;ns(bi(s.done)),f.delete(s),f.size===0&&(t.outrogroups=null)}}else a-=1},!1)}if(a===0){var u=r.length===0&&n!==null;if(u){var l=n,c=l.parentNode;Ql(c),c.append(l),t.items.clear()}ns(e,!u)}else s={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(s)}function ns(t,e=!0){for(var n=0;n<t.length;n++)Pt(t[n],e)}var js;function Me(t,e,n,r,i,s=null){var a=t,o=new Map,u=(e&Fa)!==0;if(u){var l=t;a=l.appendChild(Ie())}var c=null,d=Va(()=>{var _=n();return wi(_)?_:_==null?[]:bi(_)}),f,v=!0;function m(){p.fallback=c,bu(p,f,a,e,r),c!==null&&(f.length===0?(c.f&Ae)===0?ks(c):(c.f^=Ae,fr(c,null,a)):fn(c,()=>{c=null}))}var g=Es(()=>{f=h(d);for(var _=f.length,w=new Set,C=rt,y=to(),S=0;S<_;S+=1){var F=f[S],I=r(F,S),O=v?null:o.get(I);O?(O.v&&mn(O.v,F),O.i&&mn(O.i,S),y&&C.skipped_effects.delete(O.e)):(O=$u(o,v?a:js??=Ie(),F,I,S,i,e,n),v||(O.e.f|=Ae),o.set(I,O)),w.add(I)}if(_===0&&s&&!c&&(v?c=Zt(()=>s(a)):(c=Zt(()=>s(js??=Ie())),c.f|=Ae)),!v)if(y){for(const[j,V]of o)w.has(j)||C.skipped_effects.add(V.e);C.oncommit(m),C.ondiscard(()=>{})}else m();h(d)}),p={effect:g,items:o,outrogroups:null,fallback:c};v=!1}function bu(t,e,n,r,i){var s=(r&zl)!==0,a=e.length,o=t.items,u=t.effect.first,l,c=null,d,f=[],v=[],m,g,p,_;if(s)for(_=0;_<a;_+=1)m=e[_],g=i(m,_),p=o.get(g).e,(p.f&Ae)===0&&(p.nodes?.a?.measure(),(d??=new Set).add(p));for(_=0;_<a;_+=1){if(m=e[_],g=i(m,_),p=o.get(g).e,t.outrogroups!==null)for(const V of t.outrogroups)V.pending.delete(p),V.done.delete(p);if((p.f&Ae)!==0)if(p.f^=Ae,p===u)fr(p,null,n);else{var w=c?c.next:u;p===t.effect.last&&(t.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),Ue(t,c,p),Ue(t,p,w),fr(p,w,n),c=p,f=[],v=[],u=c.next;continue}if((p.f&Yt)!==0&&(ks(p),s&&(p.nodes?.a?.unfix(),(d??=new Set).delete(p))),p!==u){if(l!==void 0&&l.has(p)){if(f.length<v.length){var C=v[0],y;c=C.prev;var S=f[0],F=f[f.length-1];for(y=0;y<f.length;y+=1)fr(f[y],C,n);for(y=0;y<v.length;y+=1)l.delete(v[y]);Ue(t,S.prev,F.next),Ue(t,c,S),Ue(t,F,C),u=C,c=F,_-=1,f=[],v=[]}else l.delete(p),fr(p,u,n),Ue(t,p.prev,p.next),Ue(t,p,c===null?t.effect.first:c.next),Ue(t,c,p),c=p;continue}for(f=[],v=[];u!==null&&u!==p;)(l??=new Set).add(u),v.push(u),u=u.next;if(u===null)continue}(p.f&Ae)===0&&f.push(p),c=p,u=p.next}if(t.outrogroups!==null){for(const V of t.outrogroups)V.pending.size===0&&(ns(bi(V.done)),t.outrogroups?.delete(V));t.outrogroups.size===0&&(t.outrogroups=null)}if(u!==null||l!==void 0){var I=[];if(l!==void 0)for(p of l)(p.f&Yt)===0&&I.push(p);for(;u!==null;)(u.f&Yt)===0&&u!==t.fallback&&I.push(u),u=u.next;var O=I.length;if(O>0){var j=(r&Fa)!==0&&a===0?n:null;if(s){for(_=0;_<O;_+=1)I[_].nodes?.a?.measure();for(_=0;_<O;_+=1)I[_].nodes?.a?.fix()}wu(t,I,j)}}s&&Vn(()=>{if(d!==void 0)for(p of d)p.nodes?.a?.apply()})}function $u(t,e,n,r,i,s,a,o){var u=(a&Tl)!==0?(a&Al)===0?at(n,!1,!1):gn(n):null,l=(a&Ml)!==0?gn(i):null;return{v:u,i:l,e:Zt(()=>(s(e,u??n,l??i,o),()=>{t.delete(r)}))}}function fr(t,e,n){if(t.nodes)for(var r=t.nodes.start,i=t.nodes.end,s=e&&(e.f&Ae)===0?e.nodes.start:n;r!==null;){var a=zr(r);if(s.before(r),r===i)return;r=a}}function Ue(t,e,n){e===null?t.effect.first=n:e.next=n,n===null?t.effect.last=e:n.prev=e}const Js=[...` 	
\r\f \v\uFEFF`];function Eu(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,a=0;(a=r.indexOf(i,a))>=0;){var o=a+s;(a===0||Js.includes(r[a-1]))&&(o===r.length||Js.includes(r[o]))?r=(a===0?"":r.substring(0,a))+r.substring(o+1):a=o}}return r===""?null:r}function ku(t,e){return t==null?null:String(t)}function yt(t,e,n,r,i,s){var a=t.__className;if(a!==n||a===void 0){var o=Eu(n,r,s);o==null?t.removeAttribute("class"):t.className=o,t.__className=n}else if(s&&i!==s)for(var u in s){var l=!!s[u];(i==null||l!==!!i[u])&&t.classList.toggle(u,l)}return s}function In(t,e,n,r){var i=t.__style;if(i!==e){var s=ku(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}function go(t,e,n=!1){if(t.multiple){if(e==null)return;if(!wi(e))return Il();for(var r of t.options)r.selected=e.includes(mr(r));return}for(r of t.options){var i=mr(r);if(Gl(i,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Tu(t){var e=new MutationObserver(()=>{go(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Mi(()=>{e.disconnect()})}function Mu(t,e,n=e){var r=new WeakSet,i=!0;$s(t,"change",s=>{var a=s?"[selected]":":checked",o;if(t.multiple)o=[].map.call(t.querySelectorAll(a),mr);else{var u=t.querySelector(a)??t.querySelector("option:not([disabled])");o=u&&mr(u)}n(o),rt!==null&&r.add(rt)}),ro(()=>{var s=e();if(t===document.activeElement){var a=pr??rt;if(r.has(a))return}if(go(t,s,i),i&&s===void 0){var o=t.querySelector(":checked");o!==null&&(s=mr(o),n(s))}t.__value=s,i=!1}),Tu(t)}function mr(t){return"__value"in t?t.__value:t.value}const zu=Symbol("is custom element"),Au=Symbol("is html");function Xi(t,e,n,r){var i=Nu(t);i[e]!==(i[e]=n)&&(n==null?t.removeAttribute(e):typeof n!="string"&&Su(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Nu(t){return t.__attributes??={[zu]:t.nodeName.includes("-"),[Au]:t.namespaceURI===Cl}}var ta=new Map;function Su(t){var e=t.getAttribute("is")||t.nodeName,n=ta.get(e);if(n)return n;ta.set(e,n=[]);for(var r,i=t,s=Element.prototype;s!==i;){r=Ca(i);for(var a in r)r[a].set&&n.push(a);i=_s(i)}return n}function fi(t,e,n=e){var r=new WeakSet;$s(t,"input",async i=>{var s=i?t.defaultValue:t.value;if(s=Yi(t)?Bi(s):s,n(s),rt!==null&&r.add(rt),await cu(),s!==(s=e())){var a=t.selectionStart,o=t.selectionEnd,u=t.value.length;if(t.value=s??"",o!==null){var l=t.value.length;a===o&&o===u&&l>u?(t.selectionStart=l,t.selectionEnd=l):(t.selectionStart=a,t.selectionEnd=Math.min(o,l))}}}),A(e)==null&&t.value&&(n(Yi(t)?Bi(t.value):t.value),rt!==null&&r.add(rt)),Un(()=>{var i=e();if(t===document.activeElement){var s=pr??rt;if(r.has(s))return}Yi(t)&&i===Bi(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function ea(t,e,n=e){$s(t,"change",r=>{var i=r?t.defaultChecked:t.checked;n(i)}),A(e)==null&&n(t.checked),Un(()=>{var r=e();t.checked=!!r})}function Yi(t){var e=t.type;return e==="number"||e==="range"}function Bi(t){return t===""?null:+t}function na(t,e){return t===e||t?.[je]===e}function Cu(t={},e,n,r){return ro(()=>{var i,s;return Un(()=>{i=s,s=[],A(()=>{t!==n(...s)&&(e(t,...s),i&&na(n(...i),t)&&e(null,...i))})}),()=>{Vn(()=>{s&&na(n(...s),t)&&e(null,...s)})}}),t}function _e(t=!1){const e=ft,n=e.l.u;if(!n)return;let r=()=>ee(e.s);if(t){let i=0,s={};const a=ws(()=>{let o=!1;const u=e.s;for(const l in u)u[l]!==s[l]&&(s[l]=u[l],o=!0);return o&&i++,i});r=()=>h(a)}n.b.length&&tu(()=>{ra(e,r),ii(n.b)}),ts(()=>{const i=A(()=>n.m.map(pl));return()=>{for(const s of i)typeof s=="function"&&s()}}),n.a.length&&ts(()=>{ra(e,r),ii(n.a)})}function ra(t,e){if(t.l.s)for(const n of t.l.s)h(n);e()}function Ts(t,e,n){if(t==null)return e(void 0),n&&n(void 0),Ge;const r=A(()=>t.subscribe(e,n));return r.unsubscribe?()=>r.unsubscribe():r}const An=[];function Iu(t,e){return{subscribe:Ft(t,e).subscribe}}function Ft(t,e=Ge){let n=null;const r=new Set;function i(o){if(La(t,o)&&(t=o,n)){const u=!An.length;for(const l of r)l[1](),An.push(l,t);if(u){for(let l=0;l<An.length;l+=2)An[l][0](An[l+1]);An.length=0}}}function s(o){i(o(t))}function a(o,u=Ge){const l=[o,u];return r.add(l),r.size===1&&(n=e(i,s)||Ge),o(t),()=>{r.delete(l),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:a}}function Pu(t,e,n){const r=!Array.isArray(t),i=r?[t]:t;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return Iu(n,(a,o)=>{let u=!1;const l=[];let c=0,d=Ge;const f=()=>{if(c)return;d();const m=e(r?l[0]:l,a,o);s?a(m):d=typeof m=="function"?m:Ge},v=i.map((m,g)=>Ts(m,p=>{l[g]=p,c&=~(1<<g),u&&f()},()=>{c|=1<<g}));return u=!0,f(),function(){ii(v),d(),u=!1}})}function he(t){let e;return Ts(t,n=>e=n)(),e}let rs=Symbol();function jt(t,e,n){const r=n[e]??={store:null,source:at(void 0),unsubscribe:Ge};if(r.store!==t&&!(rs in n))if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=Ge;else{var i=!0;r.unsubscribe=Ts(t,s=>{i?r.source.v=s:Y(r.source,s)}),i=!1}return t&&rs in n?he(t):h(r.source)}function Ru(t,e){return t.set(e),e}function Le(){const t={};function e(){Mi(()=>{for(var n in t)t[n].unsubscribe();Sa(t,rs,{enumerable:!1,value:!0})})}return[t,e]}function Ms(t){ft===null&&xs(),Tr&&ft.l!==null?Ou(ft).m.push(t):ts(()=>{const e=A(t);if(typeof e=="function")return e})}function Fu(t){ft===null&&xs(),Ms(()=>()=>A(t))}function Du(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function Lu(){const t=ft;return t===null&&xs(),(e,n,r)=>{const i=t.s.$$events?.[e];if(i){const s=wi(i)?i.slice():[i],a=Du(e,n,r);for(const o of s)o.call(t.x,a);return!a.defaultPrevented}return!0}}function Ou(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const qu="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(qu);Fl();var Hu=W('<header class="svelte-1elxaub"><div class="logo svelte-1elxaub"><div class="logo-text svelte-1elxaub">smeecher</div></div> <a href="https://www.pramit.gg" target="_blank" rel="noopener" class="by-line svelte-1elxaub">by JoyFired</a></header>');function Xu(t){var e=Hu();H(t,e)}const zs="";async function Yu(t){return(await fetch(`${zs}/search?q=${encodeURIComponent(t)}`)).json()}async function Bu(t,e=15){const n=t.join(",");return(await fetch(`${zs}/graph?tokens=${encodeURIComponent(n)}&top_k=${e}&t=${Date.now()}`)).json()}async function Vu(t,e={}){const n=t.join(","),r=new URLSearchParams({tokens:n,t:String(Date.now()),...Object.fromEntries(Object.entries(e).map(([a,o])=>[a,String(o)]))}),i=await fetch(`${zs}/clusters?${r.toString()}`),s=await i.json();if(!i.ok)throw new Error(s?.detail||"Failed to fetch clusters");return s}const bn=Ft([]),As=Ft(null),zi=Ft(new Set(["unit","item","trait"])),hi=Ft(new Set),Hn=Ft({visible:!1,x:0,y:0,content:null,fromTouch:!1}),is=Ft(15),Uu=Pu(As,t=>t?.base?{games:t.base.n,avgPlacement:t.base.avg_placement}:{games:0,avgPlacement:4.5});function vi(t){bn.update(e=>e.includes(t)?e:[...e,t])}function Wu(t){bn.update(e=>{const n=new Set(e),r=[...e];for(const i of t)n.has(i)||(n.add(i),r.push(i));return r})}function Ku(t){bn.set(t)}function Gu(t){bn.update(e=>e.filter(n=>n!==t))}function Pn(t){zi.update(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n})}function ia(t,e,n,r=!1){Hn.set({visible:!0,x:t,y:e,content:n,fromTouch:r})}function Vi(){Hn.update(t=>t.fromTouch?t:{...t,visible:!1})}function Zu(){Hn.set({visible:!1,x:0,y:0,content:null,fromTouch:!1})}function Qu(t){hi.set(new Set(t))}function sa(){hi.set(new Set)}const un="https://raw.communitydragon.org/latest/plugins/rcp-be-lol-game-data/global/default",mo=Ft(new Map),yo=Ft(new Map),xo=Ft(new Map),wo=Ft(new Map),bo=Ft(new Map),$o=Ft(new Set),aa=Ft(!1);async function ju(){try{const[t,e]=await Promise.all([fetch(`${un}/v1/tftitems.json`),fetch(`${un}/v1/tfttraits.json`)]),[n,r]=await Promise.all([t.json(),e.json()]),i=new Map,s=new Map,a=new Map,o=new Map,u=new Map;n.forEach(l=>{const c=l.name?.replace(/<[^>]*>/g,"").trim(),d=l.nameId||"",f=l.squareIconPath||l.iconPath;if(c&&f){const v=`${un}${f.toLowerCase().replace("/lol-game-data/assets","")}`;if(i.set(c.toLowerCase(),v),d){i.set(d.toLowerCase(),v),s.set(d.toLowerCase(),c);const m=d.replace(/^TFT\d*_Item_/i,"").replace(/^TFT_Item_/i,"");m!==d&&(i.set(m.toLowerCase(),v),s.set(m.toLowerCase(),c)),u.set(c.toLowerCase(),{apiName:m!==d?m:d.replace(/^TFT_Item_/i,""),type:"item",displayName:c})}}}),r.forEach(l=>{const c=l.display_name,d=l.trait_id||"",f=l.icon_path;if(c&&f){const v=`${un}${f.toLowerCase().replace("/lol-game-data/assets","")}`;if(a.set(c.toLowerCase(),v),d){a.set(d.toLowerCase(),v),o.set(d.toLowerCase(),c);const m=d.replace(/^TFT\d*_/i,"").replace(/^Set\d*_/i,"");m!==d&&(a.set(m.toLowerCase(),v),o.set(m.toLowerCase(),c)),d.startsWith("TFT16_")&&u.set(c.toLowerCase(),{apiName:m,type:"trait",displayName:c})}}}),mo.set(i),yo.set(s),xo.set(a),wo.set(o),bo.set(u),aa.set(!0),console.log(`Loaded ${i.size} item mappings, ${a.size} trait mappings`)}catch(t){console.warn("Failed to load CDragon data:",t),aa.set(!0)}}function Eo(t,e){const n=e.toLowerCase();switch(t){case"unit":return`${un}/assets/characters/tft16_${n}/hud/tft16_${n}_square.tft_set16.png`;case"item":{const r=he(mo);return r.has(n)?r.get(n):`${un}/assets/maps/tft/icons/items/hexcore/tft_item_${n.replace(/['\s]/g,"")}.tft_set13.png`}case"trait":{const r=he(xo);return r.has(n)?r.get(n):`${un}/assets/ux/traiticons/trait_icon_16_${n.replace(/\s/g,"")}.tft_set16.png`}default:return null}}function Se(t,e){const n=e.toLowerCase();if(t==="item"){const r=he(yo);if(r.has(n))return r.get(n)}if(t==="trait"){const r=he(wo);if(r.has(n))return r.get(n)}return e}function Jr(t,e){$o.update(n=>{const r=new Set(n);return r.add(`${t}:${e}`),r})}function an(t,e){return he($o).has(`${t}:${e}`)}var Ju=W("<span> </span>"),tc=W('<button class="search-result svelte-yyldap"><span class="label svelte-yyldap"> </span> <span class="meta svelte-yyldap"><span> </span> <!></span></button>'),ec=W('<div class="search-result no-results svelte-yyldap"><span class="label svelte-yyldap">No results found</span></div>'),nc=W('<div class="search-results svelte-yyldap"></div>'),rc=W('<div class="search-container svelte-yyldap"><input type="text" placeholder="Search units, items, traits..." autocomplete="off" class="svelte-yyldap"/> <!></div>');function ic(t,e){se(e,!1);let n=at(""),r=at([]),i=at(!1),s;async function a(){if(clearTimeout(s),h(n).length<2){Y(r,[]),Y(i,!1);return}s=setTimeout(async()=>{try{const g=await Yu(h(n)),p=h(n).toLowerCase(),_=[],w=new Set(g.map(y=>y.token)),C=he(bo);for(const[y,S]of C)if(y.includes(p)){const I=(S.type==="item"?"I:":"T:")+S.apiName;w.has(I)||(_.push({token:I,label:S.apiName,type:S.type,count:0}),w.add(I))}Y(r,[...g,..._]),Y(i,h(r).length>0)}catch(g){console.error("Search error:",g)}},150)}function o(g){vi(g),Y(n,""),Y(r,[]),Y(i,!1)}function u(){h(r).length>0&&Y(i,!0)}function l(g){g.target.closest(".search-container")||Y(i,!1)}function c(g){return g==="unit"?"unit":g==="item"?"item":g==="trait"?"trait":"item"}_e();var d=rc();ht("click",Za,l);var f=b(d),v=M(f,2);{var m=g=>{var p=nc();Me(p,5,()=>h(r),Te,(_,w)=>{var C=tc(),y=b(C),S=b(y),F=M(y,2),I=b(F),O=b(I),j=M(I,2);{var V=tt=>{var ct=Ju(),it=b(ct);nt(x=>G(it,`${x??""} games`),[()=>h(w).count.toLocaleString()]),H(tt,ct)};vt(j,tt=>{h(w).count>0&&tt(V)})}nt((tt,ct)=>{G(S,tt),yt(I,1,`type-badge ${ct??""}`,"svelte-yyldap"),G(O,h(w).type)},[()=>Se(h(w).type,h(w).label),()=>c(h(w).type)]),ht("click",C,()=>o(h(w).token)),H(_,C)},_=>{var w=ec();H(_,w)}),H(g,p)};vt(v,g=>{h(i)&&g(m)})}fi(f,()=>h(n),g=>Y(n,g)),ht("input",f,a),ht("focus",f,u),H(t,d),ae()}var sc=W('<div class="filter-toggles svelte-1dvg93b"><button>Units</button> <button>Items</button> <button>Traits</button></div>');function ac(t,e){se(e,!1);const n=()=>jt(zi,"$activeTypes",r),[r,i]=Le(),s=at(),a=at(),o=at();xt(()=>n(),()=>{Y(s,n().has("unit"))}),xt(()=>n(),()=>{Y(a,n().has("item"))}),xt(()=>n(),()=>{Y(o,n().has("trait"))}),wn(),_e();var u=sc(),l=b(u);let c;var d=M(l,2);let f;var v=M(d,2);let m;nt(()=>{c=yt(l,1,"filter-toggle unit svelte-1dvg93b",null,c,{active:h(s)}),f=yt(d,1,"filter-toggle item svelte-1dvg93b",null,f,{active:h(a)}),m=yt(v,1,"filter-toggle trait svelte-1dvg93b",null,m,{active:h(o)})}),ht("click",l,()=>Pn("unit")),ht("click",d,()=>Pn("item")),ht("click",v,()=>Pn("trait")),H(t,u),ae(),i()}function Ee(t){const i=Math.max(1,Math.min(8,t));if(i<=4.5){const s=(i-1)/3.5,a=Math.round(34+s*221),o=Math.round(197-s*17),u=Math.round(94-s*54);return`rgb(${a}, ${o}, ${u})`}else{const s=(i-4.5)/3.5,a=255,o=Math.round(180-s*130),u=Math.round(40+s*20);return`rgb(${a}, ${o}, ${u})`}}var oc=W('<div class="stats svelte-1tib2rn"><div class="stat-inline svelte-1tib2rn"><span class="stat-label svelte-1tib2rn">Games</span> <span class="stat-value svelte-1tib2rn"> </span></div> <div class="stat-inline svelte-1tib2rn"><span class="stat-label svelte-1tib2rn">Avg Place</span> <span class="stat-value svelte-1tib2rn"> </span></div></div>');function lc(t,e){se(e,!1);const n=()=>jt(Uu,"$stats",r),[r,i]=Le(),s=at();xt(()=>n(),()=>{Y(s,Ee(n().avgPlacement))}),wn(),_e();var a=oc(),o=b(a),u=M(b(o),2),l=b(u),c=M(o,2),d=M(b(c),2),f=b(d);nt((v,m)=>{G(l,v),In(d,`color: ${h(s)??""}`),G(f,m)},[()=>(n(),A(()=>n().games.toLocaleString())),()=>(n(),A(()=>n().avgPlacement.toFixed(2)))]),H(t,a),ae(),i()}function Nt(t){return t.startsWith("U:")?"unit":t.startsWith("I:")?"item":t.startsWith("E:")?"equipped":t.startsWith("T:")?"trait":"unknown"}function uc(t){switch(Nt(t)){case"unit":return{type:"unit",unit:t.slice(2)};case"item":return{type:"item",item:t.slice(2)};case"equipped":{const[n,r]=t.slice(2).split("|");return{type:"equipped",unit:n,item:r}}case"trait":{const n=t.slice(2).split(":");return n.length===2?{type:"trait",trait:n[0],tier:parseInt(n[1])}:{type:"trait",trait:n[0],tier:null}}default:return{type:"unknown"}}}function cc(t,e){const n=uc(t);switch(n.type){case"unit":return e("unit",n.unit);case"item":return e("item",n.item);case"equipped":return`${e("unit",n.unit)} → ${e("item",n.item)}`;case"trait":const r=e("trait",n.trait);return n.tier?`${r} ${n.tier}`:r;default:return t}}var fc=W('<div class="empty-message svelte-1mf077">No filters applied. Search and select units, items, or traits to start.</div>'),hc=W('<div><span> </span> <button aria-label="Remove filter" class="svelte-1mf077">×</button></div>'),vc=W('<div class="chips-section svelte-1mf077"><div class="section-title svelte-1mf077">Active Filters</div> <div class="chips svelte-1mf077"><!></div></div>');function dc(t,e){se(e,!1);const n=()=>jt(bn,"$selectedTokens",r),[r,i]=Le();function s(f){const v=Nt(f);if(f.startsWith("E:")){const[m,g]=f.slice(2).split("|");return`${Se("unit",m)} → ${Se("item",g)}`}return Se(v,f.slice(2))}function a(f){return f.startsWith("E:")?"equipped":Nt(f)}_e();var o=vc(),u=M(b(o),2),l=b(u);{var c=f=>{var v=fc();H(f,v)},d=f=>{var v=ci(),m=Ne(v);Me(m,1,n,Te,(g,p)=>{var _=hc(),w=b(_),C=b(w),y=M(w,2);nt((S,F)=>{yt(_,1,`chip ${S??""}`,"svelte-1mf077"),G(C,F)},[()=>a(h(p)),()=>s(h(p))]),ht("click",y,()=>Gu(h(p))),H(g,_)}),H(f,v)};vt(l,f=>{n().length===0?f(c):f(d,!1)})}H(t,o),ae(),i()}var pc=W('<div class="topk-control svelte-5yceyo"><span class="label svelte-5yceyo">Top-K</span> <input type="number" min="0" max="500" title="0 = unlimited" class="svelte-5yceyo"/></div>');function _c(t,e){se(e,!1);const n=()=>jt(is,"$topK",r),[r,i]=Le(),s=Lu();function a(){s("change")}_e();var o=pc(),u=M(b(o),2);fi(u,n,l=>Ru(is,l)),ht("change",u,a),H(t,o),ae(),i()}var gc=W('<span class="toggle-sub svelte-nsv0zx">close</span>'),mc=W('<span class="toggle-sub svelte-nsv0zx">explore comps</span>'),yc=W('<span> </span> <span class="dot svelte-nsv0zx">•</span> <span> </span>',1),xc=W("<span> </span>"),wc=W('<span class="tiny svelte-nsv0zx"> </span>'),bc=W('<span class="tiny svelte-nsv0zx"> </span>'),$c=W('<div class="callout warning svelte-nsv0zx"> </div>'),Ec=W('<div class="callout error svelte-nsv0zx"> </div>'),kc=W('<div class="callout svelte-nsv0zx">No clusters met the minimum size. Try lowering <span class="mono svelte-nsv0zx">min</span> or increasing the sample.</div>'),Tc=W('<div class="bar svelte-nsv0zx"></div>'),Mc=W('<span class="def"> </span>'),zc=W('<div class="defining svelte-nsv0zx"></div>'),Ac=W('<div class="defining muted svelte-nsv0zx">(mixed)</div>'),Nc=W('<button><div class="cluster-top svelte-nsv0zx"><div class="cluster-id svelte-nsv0zx"> </div> <div class="cluster-size svelte-nsv0zx"> </div></div> <div class="cluster-stats svelte-nsv0zx"><span class="avg svelte-nsv0zx"> </span> <span> </span> <span class="share svelte-nsv0zx"> </span> <span class="tiny svelte-nsv0zx"> </span></div> <div class="hist svelte-nsv0zx"></div> <!></button>'),Sc=W("<button> </button>"),Cc=W('<div class="sig svelte-nsv0zx"><div class="sig-title svelte-nsv0zx">Signature</div> <div class="sig-chips svelte-nsv0zx"></div></div>'),Ic=W('<img class="icon svelte-nsv0zx" alt="" loading="lazy"/>'),Pc=W("<div></div>"),Rc=W('<button class="token svelte-nsv0zx"><!> <div class="token-main svelte-nsv0zx"><div class="name svelte-nsv0zx"> </div> <div class="sub svelte-nsv0zx"><span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="muted svelte-nsv0zx"> </span></div></div> <div class="plus svelte-nsv0zx">+</div></button>'),Fc=W('<img class="icon svelte-nsv0zx" alt="" loading="lazy"/>'),Dc=W("<div></div>"),Lc=W('<button class="token svelte-nsv0zx"><!> <div class="token-main svelte-nsv0zx"><div class="name svelte-nsv0zx"> </div> <div class="sub svelte-nsv0zx"><span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="muted svelte-nsv0zx"> </span></div></div> <div class="plus svelte-nsv0zx">+</div></button>'),Oc=W('<img class="icon svelte-nsv0zx" alt="" loading="lazy"/>'),qc=W("<div></div>"),Hc=W('<button class="token svelte-nsv0zx"><!> <div class="token-main svelte-nsv0zx"><div class="name svelte-nsv0zx"> </div> <div class="sub svelte-nsv0zx"><span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="muted svelte-nsv0zx"> </span></div></div> <div class="plus svelte-nsv0zx">+</div></button>'),Xc=W('<div class="group"><div class="group-title svelte-nsv0zx">Items</div> <div class="tokens svelte-nsv0zx"></div></div>'),Yc=W('<div class="details-header svelte-nsv0zx"><div class="details-title svelte-nsv0zx"> <span class="details-sub svelte-nsv0zx"> </span></div> <div class="details-actions svelte-nsv0zx"><button class="action svelte-nsv0zx">Add</button> <button class="action primary svelte-nsv0zx">Explore</button></div></div> <div class="details-grid svelte-nsv0zx"><div class="metric svelte-nsv0zx"><div class="k svelte-nsv0zx">Avg</div> <div class="v svelte-nsv0zx"> </div></div> <div class="metric svelte-nsv0zx"><div class="k svelte-nsv0zx">Δ vs base</div> <div> </div></div> <div class="metric svelte-nsv0zx"><div class="k svelte-nsv0zx">Top4</div> <div class="v svelte-nsv0zx"> </div></div> <div class="metric svelte-nsv0zx"><div class="k svelte-nsv0zx">Win</div> <div class="v svelte-nsv0zx"> </div></div></div> <!> <div class="token-groups svelte-nsv0zx"><div class="group"><div class="group-title svelte-nsv0zx">Units</div> <div class="tokens svelte-nsv0zx"></div></div> <div class="group"><div class="group-title svelte-nsv0zx">Traits</div> <div class="tokens svelte-nsv0zx"></div></div> <!></div>',1),Bc=W('<div class="details-empty svelte-nsv0zx">Select a cluster to inspect defining units, traits, and item prevalence.</div>'),Vc=W('<div class="panel svelte-nsv0zx"><div class="panel-header svelte-nsv0zx"><div class="panel-title svelte-nsv0zx">Cluster exploration</div> <div class="panel-meta svelte-nsv0zx"><!></div></div> <div class="controls svelte-nsv0zx"><label class="control svelte-nsv0zx"><span class="svelte-nsv0zx">k</span> <input type="number" min="2" max="50" step="1" class="svelte-nsv0zx"/></label> <label class="checkbox svelte-nsv0zx"><input type="checkbox" class="svelte-nsv0zx"/> <span>traits</span></label> <label class="checkbox svelte-nsv0zx"><input type="checkbox" class="svelte-nsv0zx"/> <span>items</span></label> <label class="control svelte-nsv0zx"><span class="svelte-nsv0zx">min</span> <input type="number" min="1" max="5000" step="10" class="svelte-nsv0zx"/></label> <button class="run svelte-nsv0zx"><!></button></div> <div class="subcontrols svelte-nsv0zx"><div class="subcontrols-left"><label class="select svelte-nsv0zx"><span>Sort</span> <select class="svelte-nsv0zx"><option>best avg</option><option>best top4</option><option>most played</option></select></label></div> <div class="subcontrols-right"><!> <!></div></div> <!> <!> <!> <div class="content svelte-nsv0zx"><div class="cluster-list svelte-nsv0zx"></div> <div class="details svelte-nsv0zx"><!></div></div></div>'),Uc=W('<div><button class="toggle svelte-nsv0zx" aria-label="Toggle cluster explorer"><span class="toggle-title svelte-nsv0zx">Clusters</span> <!></button> <!></div>');function Wc(t,e){se(e,!1);const n=()=>jt(bn,"$selectedTokens",r),[r,i]=Le(),s=at(),a=at(),o=at(),u=at(),l=at();let c=at(!1),d=at(!1),f=at(null),v=at(null),m=at(null),g=at("avg"),p=at({n_clusters:15,use_units:!0,use_traits:!0,use_items:!0,min_token_freq:100,min_cluster_size:50,top_k_tokens:10,random_state:42}),_=at(""),w=at(!1);function C(){if(Y(c,!h(c)),!h(c)){Y(m,null),Y(w,!1),sa();return}h(v)||y()}async function y(){Y(d,!0),Y(f,null),Y(w,!1),Y(m,null),sa(),Y(_,h(s));try{Y(v,await Vu(n(),h(p)))}catch(z){Y(f,z?.message??String(z))}finally{Y(d,!1)}}function S(z){Y(m,z.cluster_id),Qu(z.signature_tokens??[])}function F(z){return cc(z,Se)}function I(z){const N=Nt(z);return N==="unknown"||N==="equipped"?null:Eo(N,z.slice(2))}function O(z){const N=Nt(z);return N==="equipped"?"item":N}function j(){h(l)?.signature_tokens?.length&&Ku(h(l).signature_tokens)}function V(){h(l)?.signature_tokens?.length&&Wu(h(l).signature_tokens)}function tt(z){vi(z)}function ct(z){return Math.max(1,...z??[1])}function it(z){return`${Math.round((z??0)*100)}%`}function x(z){return z==null?"—":z>=9.95?"×10+":`×${z.toFixed(2)}`}xt(()=>n(),()=>{Y(s,n().slice().sort().join(","))}),xt(()=>(h(c),h(_),h(s)),()=>{h(c)&&h(_)&&h(s)!==h(_)&&Y(w,!0)}),xt(()=>h(v),()=>{Y(a,h(v)?.clusters??[])}),xt(()=>h(v),()=>{Y(o,h(v)?.meta?.warning??null)}),xt(()=>(h(a),h(g)),()=>{Y(u,(()=>{const z=[...h(a)];return h(g)==="size"?z.sort((N,$)=>$.size-N.size):h(g)==="top4"?z.sort((N,$)=>$.top4_rate-N.top4_rate):z.sort((N,$)=>N.avg_placement-$.avg_placement),z})())}),xt(()=>(h(u),h(m)),()=>{Y(l,h(u).find(z=>z.cluster_id===h(m))??null)}),wn(),_e();var D=Uc();let k;var L=b(D),U=M(b(L),2);{var Z=z=>{var N=gc();H(z,N)},T=z=>{var N=mc();H(z,N)};vt(U,z=>{h(c)?z(Z):z(T,!1)})}var E=M(L,2);{var R=z=>{var N=Vc(),$=b(N),B=M(b($),2),J=b(B);{var Q=X=>{var q=yc(),dt=Ne(q),ye=b(dt),ue=M(dt,4),Lt=b(ue);nt((xe,tr,en)=>{G(ye,`${xe??""} games`),In(ue,`color: ${tr??""}`),G(Lt,`${en??""} avg`)},[()=>(h(v),A(()=>h(v).base.n.toLocaleString())),()=>(ee(Ee),h(v),A(()=>Ee(h(v).base.avg_placement))),()=>(h(v),A(()=>h(v).base.avg_placement.toFixed(2)))]),H(X,q)},ot=X=>{var q=xc(),dt=b(q);nt(()=>G(dt,`${n(),A(()=>n().length)??""} filters`)),H(X,q)};vt(J,X=>{h(v),A(()=>h(v)?.base)?X(Q):X(ot,!1)})}var ut=M($,2),pt=b(ut),mt=M(b(pt),2),Oe=M(pt,2),Gn=b(Oe),$n=M(Oe,2),Zn=b($n),Dt=M($n,2),me=M(b(Dt),2),P=M(Dt,2),le=b(P);{var Cr=X=>{var q=Hi("Running…");H(X,q)},Ci=X=>{var q=ci(),dt=Ne(q);{var ye=Lt=>{var xe=Hi("Refresh");H(Lt,xe)},ue=Lt=>{var xe=Hi("Run");H(Lt,xe)};vt(dt,Lt=>{h(w)?Lt(ye):Lt(ue,!1)},!0)}H(X,q)};vt(le,X=>{h(d)?X(Cr):X(Ci,!1)})}var Ir=M(ut,2),Pr=b(Ir),Ii=b(Pr),Rr=M(b(Ii),2);nt(()=>{h(g),au(()=>{})});var Qn=b(Rr);Qn.value=Qn.__value="avg";var jn=M(Qn);jn.value=jn.__value="top4";var tn=M(jn);tn.value=tn.__value="size";var Pi=M(Pr,2),Fr=b(Pi);{var Ri=X=>{var q=wc(),dt=b(q);nt(()=>G(dt,`${h(v),A(()=>h(v).meta.compute_ms)??""}ms`)),H(X,q)};vt(Fr,X=>{h(v),A(()=>h(v)?.meta?.compute_ms)&&X(Ri)})}var Dr=M(Fr,2);{var Lr=X=>{var q=bc(),dt=b(q);nt(()=>G(dt,`${h(v),A(()=>h(v).meta.features_used)??""} features`)),H(X,q)};vt(Dr,X=>{h(v),A(()=>h(v)?.meta?.features_used)&&X(Lr)})}var Jn=M(Ir,2);{var Jt=X=>{var q=$c(),dt=b(q);nt(()=>G(dt,h(o))),H(X,q)};vt(Jn,X=>{h(o)&&X(Jt)})}var Os=M(Jn,2);{var nl=X=>{var q=Ec(),dt=b(q);nt(()=>G(dt,`Failed to load clusters: ${h(f)??""}`)),H(X,q)};vt(Os,X=>{h(f)&&X(nl)})}var qs=M(Os,2);{var rl=X=>{var q=kc();H(X,q)};vt(qs,X=>{h(d),h(v),h(u),h(o),A(()=>!h(d)&&h(v)&&h(u).length===0&&!h(o))&&X(rl)})}var il=M(qs,2),Hs=b(il);Me(Hs,5,()=>h(u),Te,(X,q)=>{var dt=Nc();let ye;var ue=b(dt),Lt=b(ue),xe=b(Lt),tr=M(Lt,2),en=b(tr),er=M(ue,2),En=b(er),Or=b(En),kn=M(En,2);let qr;var Hr=b(kn),nr=M(kn,2),Xr=b(nr),Fi=M(nr,2),Yr=b(Fi),Br=M(er,2);Me(Br,5,()=>(h(q),A(()=>h(q).placement_hist)),Te,(Vt,Ut,nn)=>{var we=Tc();nt((qe,He)=>In(we,`
                                            height: ${qe??""}%;
                                            background: ${He??""};
                                        `),[()=>(h(Ut),h(q),A(()=>Math.max(2,h(Ut)/ct(h(q).placement_hist)*100))),()=>(ee(Ee),A(()=>Ee(nn+1)))]),H(Vt,we)});var Di=M(Br,2);{var Li=Vt=>{var Ut=zc();Me(Ut,5,()=>(h(q),A(()=>h(q).defining_units)),Te,(nn,we,qe)=>{var He=Mc(),Vr=b(He);nt(qi=>G(Vr,`${qi??""}${h(q),A(()=>qe<h(q).defining_units.length-1?", ":"")??""}`),[()=>(h(we),A(()=>F(h(we).token)))]),H(nn,He)}),H(Vt,Ut)},Oi=Vt=>{var Ut=Ac();H(Vt,Ut)};vt(Di,Vt=>{h(q),A(()=>h(q).defining_units?.length)?Vt(Li):Vt(Oi,!1)})}nt((Vt,Ut,nn,we,qe,He)=>{ye=yt(dt,1,"cluster svelte-nsv0zx",null,ye,{selected:h(q).cluster_id===h(m)}),G(xe,`#${h(q),A(()=>h(q).cluster_id)??""}`),G(en,Vt),In(En,`color: ${Ut??""}`),G(Or,nn),qr=yt(kn,1,"delta svelte-nsv0zx",null,qr,{pos:h(q).delta_vs_base<0,neg:h(q).delta_vs_base>0}),G(Hr,`${h(q),A(()=>h(q).delta_vs_base>0?"+":"")??""}${we??""}`),G(Xr,`${qe??""}%`),G(Yr,`top4 ${He??""}`)},[()=>(h(q),A(()=>h(q).size.toLocaleString())),()=>(ee(Ee),h(q),A(()=>Ee(h(q).avg_placement))),()=>(h(q),A(()=>h(q).avg_placement.toFixed(2))),()=>(h(q),A(()=>h(q).delta_vs_base.toFixed(2))),()=>(h(q),A(()=>Math.round(h(q).share*100))),()=>(h(q),A(()=>it(h(q).top4_rate)))]),ht("click",dt,()=>S(h(q))),H(X,dt)});var sl=M(Hs,2),al=b(sl);{var ol=X=>{var q=Yc(),dt=Ne(q),ye=b(dt),ue=b(ye),Lt=M(ue),xe=b(Lt),tr=M(ye,2),en=b(tr),er=M(en,2),En=M(dt,2),Or=b(En),kn=M(b(Or),2),qr=b(kn),Hr=M(Or,2),nr=M(b(Hr),2);let Xr;var Fi=b(nr),Yr=M(Hr,2),Br=M(b(Yr),2),Di=b(Br),Li=M(Yr,2),Oi=M(b(Li),2),Vt=b(Oi),Ut=M(En,2);{var nn=Ot=>{var K=Cc(),qt=M(b(K),2);Me(qt,5,()=>(h(l),A(()=>h(l).signature_tokens)),Te,(te,st)=>{var At=Sc(),Xe=b(At);nt((be,rn)=>{yt(At,1,`sig-chip ${be??""}`,"svelte-nsv0zx"),G(Xe,rn)},[()=>(h(st),A(()=>O(h(st)))),()=>(h(st),A(()=>F(h(st))))]),ht("click",At,()=>tt(h(st))),H(te,At)}),H(Ot,K)};vt(Ut,Ot=>{h(l),A(()=>h(l).signature_tokens?.length)&&Ot(nn)})}var we=M(Ut,2),qe=b(we),He=M(b(qe),2);Me(He,5,()=>(h(l),A(()=>h(l).top_units)),Te,(Ot,K)=>{var qt=Rc(),te=b(qt);{var st=_t=>{var gt=Ic();nt(Ht=>Xi(gt,"src",Ht),[()=>(h(K),A(()=>I(h(K).token)))]),ht("error",gt,()=>Jr(Nt(h(K).token),h(K).token.slice(2))),H(_t,gt)},At=_t=>{var gt=Pc();nt(Ht=>yt(gt,1,`fallback ${Ht??""}`,"svelte-nsv0zx"),[()=>(h(K),A(()=>O(h(K).token)))]),H(_t,gt)};vt(te,_t=>{h(K),ee(an),ee(Nt),A(()=>I(h(K).token)&&!an(Nt(h(K).token),h(K).token.slice(2)))?_t(st):_t(At,!1)})}var Xe=M(te,2),be=b(Xe),rn=b(be),rr=M(be,2),Ye=b(rr),ir=b(Ye),sn=M(Ye,4),Tn=b(sn),sr=M(sn,4),Mn=b(sr);nt((_t,gt,Ht,Wt)=>{G(rn,_t),G(ir,gt),G(Tn,Ht),G(Mn,`base ${Wt??""}`)},[()=>(h(K),A(()=>F(h(K).token))),()=>(h(K),A(()=>it(h(K).pct))),()=>(h(K),A(()=>x(h(K).lift))),()=>(h(K),A(()=>it(h(K).base_pct)))]),ht("click",qt,()=>tt(h(K).token)),H(Ot,qt)});var Vr=M(qe,2),qi=M(b(Vr),2);Me(qi,5,()=>(h(l),A(()=>h(l).top_traits)),Te,(Ot,K)=>{var qt=Lc(),te=b(qt);{var st=_t=>{var gt=Fc();nt(Ht=>Xi(gt,"src",Ht),[()=>(h(K),A(()=>I(h(K).token)))]),ht("error",gt,()=>Jr(Nt(h(K).token),h(K).token.slice(2))),H(_t,gt)},At=_t=>{var gt=Dc();nt(Ht=>yt(gt,1,`fallback ${Ht??""}`,"svelte-nsv0zx"),[()=>(h(K),A(()=>O(h(K).token)))]),H(_t,gt)};vt(te,_t=>{h(K),ee(an),ee(Nt),A(()=>I(h(K).token)&&!an(Nt(h(K).token),h(K).token.slice(2)))?_t(st):_t(At,!1)})}var Xe=M(te,2),be=b(Xe),rn=b(be),rr=M(be,2),Ye=b(rr),ir=b(Ye),sn=M(Ye,4),Tn=b(sn),sr=M(sn,4),Mn=b(sr);nt((_t,gt,Ht,Wt)=>{G(rn,_t),G(ir,gt),G(Tn,Ht),G(Mn,`base ${Wt??""}`)},[()=>(h(K),A(()=>F(h(K).token))),()=>(h(K),A(()=>it(h(K).pct))),()=>(h(K),A(()=>x(h(K).lift))),()=>(h(K),A(()=>it(h(K).base_pct)))]),ht("click",qt,()=>tt(h(K).token)),H(Ot,qt)});var ul=M(Vr,2);{var cl=Ot=>{var K=Xc(),qt=M(b(K),2);Me(qt,5,()=>(h(l),A(()=>h(l).top_items)),Te,(te,st)=>{var At=Hc(),Xe=b(At);{var be=Wt=>{var Be=Oc();nt(ar=>Xi(Be,"src",ar),[()=>(h(st),A(()=>I(h(st).token)))]),ht("error",Be,()=>Jr(Nt(h(st).token),h(st).token.slice(2))),H(Wt,Be)},rn=Wt=>{var Be=qc();nt(ar=>yt(Be,1,`fallback ${ar??""}`,"svelte-nsv0zx"),[()=>(h(st),A(()=>O(h(st).token)))]),H(Wt,Be)};vt(Xe,Wt=>{h(st),ee(an),ee(Nt),A(()=>I(h(st).token)&&!an(Nt(h(st).token),h(st).token.slice(2)))?Wt(be):Wt(rn,!1)})}var rr=M(Xe,2),Ye=b(rr),ir=b(Ye),sn=M(Ye,2),Tn=b(sn),sr=b(Tn),Mn=M(Tn,4),_t=b(Mn),gt=M(Mn,4),Ht=b(gt);nt((Wt,Be,ar,fl)=>{G(ir,Wt),G(sr,Be),G(_t,ar),G(Ht,`base ${fl??""}`)},[()=>(h(st),A(()=>F(h(st).token))),()=>(h(st),A(()=>it(h(st).pct))),()=>(h(st),A(()=>x(h(st).lift))),()=>(h(st),A(()=>it(h(st).base_pct)))]),ht("click",At,()=>tt(h(st).token)),H(te,At)}),H(Ot,K)};vt(ul,Ot=>{h(p),A(()=>h(p).use_items)&&Ot(cl)})}nt((Ot,K,qt,te,st,At)=>{G(ue,`Cluster #${h(l),A(()=>h(l).cluster_id)??""} `),G(xe,`${Ot??""} games`),en.disabled=(h(l),A(()=>!h(l).signature_tokens?.length)),er.disabled=(h(l),A(()=>!h(l).signature_tokens?.length)),In(kn,`color: ${K??""}`),G(qr,qt),Xr=yt(nr,1,"v svelte-nsv0zx",null,Xr,{pos:h(l).delta_vs_base<0,neg:h(l).delta_vs_base>0}),G(Fi,`${h(l),A(()=>h(l).delta_vs_base>0?"+":"")??""}${te??""}`),G(Di,st),G(Vt,At)},[()=>(h(l),A(()=>h(l).size.toLocaleString())),()=>(ee(Ee),h(l),A(()=>Ee(h(l).avg_placement))),()=>(h(l),A(()=>h(l).avg_placement.toFixed(2))),()=>(h(l),A(()=>h(l).delta_vs_base.toFixed(2))),()=>(h(l),A(()=>it(h(l).top4_rate))),()=>(h(l),A(()=>it(h(l).win_rate)))]),ht("click",en,V),ht("click",er,j),H(X,q)},ll=X=>{var q=Bc();H(X,q)};vt(al,X=>{h(l)?X(ol):X(ll,!1)})}nt(()=>P.disabled=h(d)),fi(mt,()=>h(p).n_clusters,X=>Wr(p,h(p).n_clusters=X)),ea(Gn,()=>h(p).use_traits,X=>Wr(p,h(p).use_traits=X)),ea(Zn,()=>h(p).use_items,X=>Wr(p,h(p).use_items=X)),fi(me,()=>h(p).min_token_freq,X=>Wr(p,h(p).min_token_freq=X)),ht("click",P,y),Mu(Rr,()=>h(g),X=>Y(g,X)),H(z,N)};vt(E,z=>{h(c)&&z(R)})}nt(()=>k=yt(D,1,"cluster-explorer svelte-nsv0zx",null,k,{open:h(c)})),ht("click",L,C),H(t,D),ae(),i()}function oa(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}var Kc={value:()=>{}};function Ar(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ti(n)}function ti(t){this._=t}function Gc(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ti.prototype=Ar.prototype={constructor:ti,on:function(t,e){var n=this._,r=Gc(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=Zc(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=la(n[i],t.name,e);else if(e==null)for(i in n)n[i]=la(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ti(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Zc(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function la(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Kc,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ss="http://www.w3.org/1999/xhtml";const ua={svg:"http://www.w3.org/2000/svg",xhtml:ss,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ai(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),ua.hasOwnProperty(e)?{space:ua[e],local:t}:t}function Qc(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ss&&e.documentElement.namespaceURI===ss?e.createElement(t):e.createElementNS(n,t)}}function jc(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ko(t){var e=Ai(t);return(e.local?jc:Qc)(e)}function Jc(){}function Ns(t){return t==null?Jc:function(){return this.querySelector(t)}}function tf(t){typeof t!="function"&&(t=Ns(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=new Array(a),u,l,c=0;c<a;++c)(u=s[c])&&(l=t.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),o[c]=l);return new Bt(r,this._parents)}function ef(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function nf(){return[]}function To(t){return t==null?nf:function(){return this.querySelectorAll(t)}}function rf(t){return function(){return ef(t.apply(this,arguments))}}function sf(t){typeof t=="function"?t=rf(t):t=To(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],o=a.length,u,l=0;l<o;++l)(u=a[l])&&(r.push(t.call(u,u.__data__,l,a)),i.push(u));return new Bt(r,i)}function Mo(t){return function(){return this.matches(t)}}function zo(t){return function(e){return e.matches(t)}}var af=Array.prototype.find;function of(t){return function(){return af.call(this.children,t)}}function lf(){return this.firstElementChild}function uf(t){return this.select(t==null?lf:of(typeof t=="function"?t:zo(t)))}var cf=Array.prototype.filter;function ff(){return Array.from(this.children)}function hf(t){return function(){return cf.call(this.children,t)}}function vf(t){return this.selectAll(t==null?ff:hf(typeof t=="function"?t:zo(t)))}function df(t){typeof t!="function"&&(t=Mo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],u,l=0;l<a;++l)(u=s[l])&&t.call(u,u.__data__,l,s)&&o.push(u);return new Bt(r,this._parents)}function Ao(t){return new Array(t.length)}function pf(){return new Bt(this._enter||this._groups.map(Ao),this._parents)}function di(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}di.prototype={constructor:di,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function _f(t){return function(){return t}}function gf(t,e,n,r,i,s){for(var a=0,o,u=e.length,l=s.length;a<l;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new di(t,s[a]);for(;a<u;++a)(o=e[a])&&(i[a]=o)}function mf(t,e,n,r,i,s,a){var o,u,l=new Map,c=e.length,d=s.length,f=new Array(c),v;for(o=0;o<c;++o)(u=e[o])&&(f[o]=v=a.call(u,u.__data__,o,e)+"",l.has(v)?i[o]=u:l.set(v,u));for(o=0;o<d;++o)v=a.call(t,s[o],o,s)+"",(u=l.get(v))?(r[o]=u,u.__data__=s[o],l.delete(v)):n[o]=new di(t,s[o]);for(o=0;o<c;++o)(u=e[o])&&l.get(f[o])===u&&(i[o]=u)}function yf(t){return t.__data__}function xf(t,e){if(!arguments.length)return Array.from(this,yf);var n=e?mf:gf,r=this._parents,i=this._groups;typeof t!="function"&&(t=_f(t));for(var s=i.length,a=new Array(s),o=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],d=i[l],f=d.length,v=wf(t.call(c,c&&c.__data__,l,r)),m=v.length,g=o[l]=new Array(m),p=a[l]=new Array(m),_=u[l]=new Array(f);n(c,d,g,p,_,v,e);for(var w=0,C=0,y,S;w<m;++w)if(y=g[w]){for(w>=C&&(C=w+1);!(S=p[C])&&++C<m;);y._next=S||null}}return a=new Bt(a,r),a._enter=o,a._exit=u,a}function wf(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function bf(){return new Bt(this._exit||this._groups.map(Ao),this._parents)}function $f(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Ef(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),u=0;u<a;++u)for(var l=n[u],c=r[u],d=l.length,f=o[u]=new Array(d),v,m=0;m<d;++m)(v=l[m]||c[m])&&(f[m]=v);for(;u<i;++u)o[u]=n[u];return new Bt(o,this._parents)}function kf(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Tf(t){t||(t=Mf);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,u=i[s]=new Array(o),l,c=0;c<o;++c)(l=a[c])&&(u[c]=l);u.sort(e)}return new Bt(i,this._parents).order()}function Mf(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function zf(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Af(){return Array.from(this)}function Nf(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function Sf(){let t=0;for(const e of this)++t;return t}function Cf(){return!this.node()}function If(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function Pf(t){return function(){this.removeAttribute(t)}}function Rf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ff(t,e){return function(){this.setAttribute(t,e)}}function Df(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Lf(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Of(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function qf(t,e){var n=Ai(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Rf:Pf:typeof e=="function"?n.local?Of:Lf:n.local?Df:Ff)(n,e))}function No(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Hf(t){return function(){this.style.removeProperty(t)}}function Xf(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Yf(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Bf(t,e,n){return arguments.length>1?this.each((e==null?Hf:typeof e=="function"?Yf:Xf)(t,e,n??"")):Xn(this.node(),t)}function Xn(t,e){return t.style.getPropertyValue(e)||No(t).getComputedStyle(t,null).getPropertyValue(e)}function Vf(t){return function(){delete this[t]}}function Uf(t,e){return function(){this[t]=e}}function Wf(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Kf(t,e){return arguments.length>1?this.each((e==null?Vf:typeof e=="function"?Wf:Uf)(t,e)):this.node()[t]}function So(t){return t.trim().split(/^|\s+/)}function Ss(t){return t.classList||new Co(t)}function Co(t){this._node=t,this._names=So(t.getAttribute("class")||"")}Co.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Io(t,e){for(var n=Ss(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Po(t,e){for(var n=Ss(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Gf(t){return function(){Io(this,t)}}function Zf(t){return function(){Po(this,t)}}function Qf(t,e){return function(){(e.apply(this,arguments)?Io:Po)(this,t)}}function jf(t,e){var n=So(t+"");if(arguments.length<2){for(var r=Ss(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Qf:e?Gf:Zf)(n,e))}function Jf(){this.textContent=""}function th(t){return function(){this.textContent=t}}function eh(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function nh(t){return arguments.length?this.each(t==null?Jf:(typeof t=="function"?eh:th)(t)):this.node().textContent}function rh(){this.innerHTML=""}function ih(t){return function(){this.innerHTML=t}}function sh(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function ah(t){return arguments.length?this.each(t==null?rh:(typeof t=="function"?sh:ih)(t)):this.node().innerHTML}function oh(){this.nextSibling&&this.parentNode.appendChild(this)}function lh(){return this.each(oh)}function uh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ch(){return this.each(uh)}function fh(t){var e=typeof t=="function"?t:ko(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function hh(){return null}function vh(t,e){var n=typeof t=="function"?t:ko(t),r=e==null?hh:typeof e=="function"?e:Ns(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function dh(){var t=this.parentNode;t&&t.removeChild(this)}function ph(){return this.each(dh)}function _h(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function gh(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function mh(t){return this.select(t?gh:_h)}function yh(t){return arguments.length?this.property("__data__",t):this.node().__data__}function xh(t){return function(e){t.call(this,e,this.__data__)}}function wh(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function bh(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function $h(t,e,n){return function(){var r=this.__on,i,s=xh(e);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Eh(t,e,n){var r=wh(t+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var u=0,l=o.length,c;u<l;++u)for(i=0,c=o[u];i<s;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(o=e?$h:bh,i=0;i<s;++i)this.each(o(r[i],e,n));return this}function Ro(t,e,n){var r=No(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function kh(t,e){return function(){return Ro(this,t,e)}}function Th(t,e){return function(){return Ro(this,t,e.apply(this,arguments))}}function Mh(t,e){return this.each((typeof e=="function"?Th:kh)(t,e))}function*zh(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var Fo=[null];function Bt(t,e){this._groups=t,this._parents=e}function Nr(){return new Bt([[document.documentElement]],Fo)}function Ah(){return this}Bt.prototype=Nr.prototype={constructor:Bt,select:tf,selectAll:sf,selectChild:uf,selectChildren:vf,filter:df,data:xf,enter:pf,exit:bf,join:$f,merge:Ef,selection:Ah,order:kf,sort:Tf,call:zf,nodes:Af,node:Nf,size:Sf,empty:Cf,each:If,attr:qf,style:Bf,property:Kf,classed:jf,text:nh,html:ah,raise:lh,lower:ch,append:fh,insert:vh,remove:ph,clone:mh,datum:yh,on:Eh,dispatch:Mh,[Symbol.iterator]:zh};function St(t){return typeof t=="string"?new Bt([[document.querySelector(t)]],[document.documentElement]):new Bt([[t]],Fo)}function Nh(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ze(t,e){if(t=Nh(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Sh={passive:!1},wr={capture:!0,passive:!1};function Ui(t){t.stopImmediatePropagation()}function Rn(t){t.preventDefault(),t.stopImmediatePropagation()}function Do(t){var e=t.document.documentElement,n=St(t).on("dragstart.drag",Rn,wr);"onselectstart"in e?n.on("selectstart.drag",Rn,wr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Lo(t,e){var n=t.document.documentElement,r=St(t).on("dragstart.drag",null);e&&(r.on("click.drag",Rn,wr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Kr=t=>()=>t;function as(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:a,y:o,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}as.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Ch(t){return!t.ctrlKey&&!t.button}function Ih(){return this.parentNode}function Ph(t,e){return e??{x:t.x,y:t.y}}function Rh(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fh(){var t=Ch,e=Ih,n=Ph,r=Rh,i={},s=Ar("start","drag","end"),a=0,o,u,l,c,d=0;function f(y){y.on("mousedown.drag",v).filter(r).on("touchstart.drag",p).on("touchmove.drag",_,Sh).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(y,S){if(!(c||!t.call(this,y,S))){var F=C(this,e.call(this,y,S),y,S,"mouse");F&&(St(y.view).on("mousemove.drag",m,wr).on("mouseup.drag",g,wr),Do(y.view),Ui(y),l=!1,o=y.clientX,u=y.clientY,F("start",y))}}function m(y){if(Rn(y),!l){var S=y.clientX-o,F=y.clientY-u;l=S*S+F*F>d}i.mouse("drag",y)}function g(y){St(y.view).on("mousemove.drag mouseup.drag",null),Lo(y.view,l),Rn(y),i.mouse("end",y)}function p(y,S){if(t.call(this,y,S)){var F=y.changedTouches,I=e.call(this,y,S),O=F.length,j,V;for(j=0;j<O;++j)(V=C(this,I,y,S,F[j].identifier,F[j]))&&(Ui(y),V("start",y,F[j]))}}function _(y){var S=y.changedTouches,F=S.length,I,O;for(I=0;I<F;++I)(O=i[S[I].identifier])&&(Rn(y),O("drag",y,S[I]))}function w(y){var S=y.changedTouches,F=S.length,I,O;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),I=0;I<F;++I)(O=i[S[I].identifier])&&(Ui(y),O("end",y,S[I]))}function C(y,S,F,I,O,j){var V=s.copy(),tt=ze(j||F,S),ct,it,x;if((x=n.call(y,new as("beforestart",{sourceEvent:F,target:f,identifier:O,active:a,x:tt[0],y:tt[1],dx:0,dy:0,dispatch:V}),I))!=null)return ct=x.x-tt[0]||0,it=x.y-tt[1]||0,function D(k,L,U){var Z=tt,T;switch(k){case"start":i[O]=D,T=a++;break;case"end":delete i[O],--a;case"drag":tt=ze(U||L,S),T=a;break}V.call(k,y,new as(k,{sourceEvent:L,subject:x,target:f,identifier:O,active:T,x:tt[0]+ct,y:tt[1]+it,dx:tt[0]-Z[0],dy:tt[1]-Z[1],dispatch:V}),I)}}return f.filter=function(y){return arguments.length?(t=typeof y=="function"?y:Kr(!!y),f):t},f.container=function(y){return arguments.length?(e=typeof y=="function"?y:Kr(y),f):e},f.subject=function(y){return arguments.length?(n=typeof y=="function"?y:Kr(y),f):n},f.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:Kr(!!y),f):r},f.on=function(){var y=s.on.apply(s,arguments);return y===s?f:y},f.clickDistance=function(y){return arguments.length?(d=(y=+y)*y,f):Math.sqrt(d)},f}function Cs(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Oo(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Sr(){}var br=.7,pi=1/br,Fn="\\s*([+-]?\\d+)\\s*",$r="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Dh=/^#([0-9a-f]{3,8})$/,Lh=new RegExp(`^rgb\\(${Fn},${Fn},${Fn}\\)$`),Oh=new RegExp(`^rgb\\(${ve},${ve},${ve}\\)$`),qh=new RegExp(`^rgba\\(${Fn},${Fn},${Fn},${$r}\\)$`),Hh=new RegExp(`^rgba\\(${ve},${ve},${ve},${$r}\\)$`),Xh=new RegExp(`^hsl\\(${$r},${ve},${ve}\\)$`),Yh=new RegExp(`^hsla\\(${$r},${ve},${ve},${$r}\\)$`),ca={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cs(Sr,Er,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:fa,formatHex:fa,formatHex8:Bh,formatHsl:Vh,formatRgb:ha,toString:ha});function fa(){return this.rgb().formatHex()}function Bh(){return this.rgb().formatHex8()}function Vh(){return qo(this).formatHsl()}function ha(){return this.rgb().formatRgb()}function Er(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Dh.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?va(e):n===3?new It(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Gr(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Gr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Lh.exec(t))?new It(e[1],e[2],e[3],1):(e=Oh.exec(t))?new It(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=qh.exec(t))?Gr(e[1],e[2],e[3],e[4]):(e=Hh.exec(t))?Gr(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Xh.exec(t))?_a(e[1],e[2]/100,e[3]/100,1):(e=Yh.exec(t))?_a(e[1],e[2]/100,e[3]/100,e[4]):ca.hasOwnProperty(t)?va(ca[t]):t==="transparent"?new It(NaN,NaN,NaN,0):null}function va(t){return new It(t>>16&255,t>>8&255,t&255,1)}function Gr(t,e,n,r){return r<=0&&(t=e=n=NaN),new It(t,e,n,r)}function Uh(t){return t instanceof Sr||(t=Er(t)),t?(t=t.rgb(),new It(t.r,t.g,t.b,t.opacity)):new It}function os(t,e,n,r){return arguments.length===1?Uh(t):new It(t,e,n,r??1)}function It(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Cs(It,os,Oo(Sr,{brighter(t){return t=t==null?pi:Math.pow(pi,t),new It(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?br:Math.pow(br,t),new It(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new It(dn(this.r),dn(this.g),dn(this.b),_i(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:da,formatHex:da,formatHex8:Wh,formatRgb:pa,toString:pa}));function da(){return`#${cn(this.r)}${cn(this.g)}${cn(this.b)}`}function Wh(){return`#${cn(this.r)}${cn(this.g)}${cn(this.b)}${cn((isNaN(this.opacity)?1:this.opacity)*255)}`}function pa(){const t=_i(this.opacity);return`${t===1?"rgb(":"rgba("}${dn(this.r)}, ${dn(this.g)}, ${dn(this.b)}${t===1?")":`, ${t})`}`}function _i(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function dn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function cn(t){return t=dn(t),(t<16?"0":"")+t.toString(16)}function _a(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ne(t,e,n,r)}function qo(t){if(t instanceof ne)return new ne(t.h,t.s,t.l,t.opacity);if(t instanceof Sr||(t=Er(t)),!t)return new ne;if(t instanceof ne)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,u=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=u<.5?s+i:2-s-i,a*=60):o=u>0&&u<1?0:a,new ne(a,o,u,t.opacity)}function Kh(t,e,n,r){return arguments.length===1?qo(t):new ne(t,e,n,r??1)}function ne(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Cs(ne,Kh,Oo(Sr,{brighter(t){return t=t==null?pi:Math.pow(pi,t),new ne(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?br:Math.pow(br,t),new ne(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new It(Wi(t>=240?t-240:t+120,i,r),Wi(t,i,r),Wi(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ne(ga(this.h),Zr(this.s),Zr(this.l),_i(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=_i(this.opacity);return`${t===1?"hsl(":"hsla("}${ga(this.h)}, ${Zr(this.s)*100}%, ${Zr(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ga(t){return t=(t||0)%360,t<0?t+360:t}function Zr(t){return Math.max(0,Math.min(1,t||0))}function Wi(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ho=t=>()=>t;function Gh(t,e){return function(n){return t+n*e}}function Zh(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Qh(t){return(t=+t)==1?Xo:function(e,n){return n-e?Zh(e,n,t):Ho(isNaN(e)?n:e)}}function Xo(t,e){var n=e-t;return n?Gh(t,n):Ho(isNaN(t)?e:t)}const ma=(function t(e){var n=Qh(e);function r(i,s){var a=n((i=os(i)).r,(s=os(s)).r),o=n(i.g,s.g),u=n(i.b,s.b),l=Xo(i.opacity,s.opacity);return function(c){return i.r=a(c),i.g=o(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=t,r})(1);function We(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var ls=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ki=new RegExp(ls.source,"g");function jh(t){return function(){return t}}function Jh(t){return function(e){return t(e)+""}}function tv(t,e){var n=ls.lastIndex=Ki.lastIndex=0,r,i,s,a=-1,o=[],u=[];for(t=t+"",e=e+"";(r=ls.exec(t))&&(i=Ki.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,u.push({i:a,x:We(r,i)})),n=Ki.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?u[0]?Jh(u[0].x):jh(e):(e=u.length,function(l){for(var c=0,d;c<e;++c)o[(d=u[c]).i]=d.x(l);return o.join("")})}var ya=180/Math.PI,us={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Yo(t,e,n,r,i,s){var a,o,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,u/=o),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*ya,skewX:Math.atan(u)*ya,scaleX:a,scaleY:o}}var Qr;function ev(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?us:Yo(e.a,e.b,e.c,e.d,e.e,e.f)}function nv(t){return t==null||(Qr||(Qr=document.createElementNS("http://www.w3.org/2000/svg","g")),Qr.setAttribute("transform",t),!(t=Qr.transform.baseVal.consolidate()))?us:(t=t.matrix,Yo(t.a,t.b,t.c,t.d,t.e,t.f))}function Bo(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,d,f,v,m){if(l!==d||c!==f){var g=v.push("translate(",null,e,null,n);m.push({i:g-4,x:We(l,d)},{i:g-2,x:We(c,f)})}else(d||f)&&v.push("translate("+d+e+f+n)}function a(l,c,d,f){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:We(l,c)})):c&&d.push(i(d)+"rotate("+c+r)}function o(l,c,d,f){l!==c?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:We(l,c)}):c&&d.push(i(d)+"skewX("+c+r)}function u(l,c,d,f,v,m){if(l!==d||c!==f){var g=v.push(i(v)+"scale(",null,",",null,")");m.push({i:g-4,x:We(l,d)},{i:g-2,x:We(c,f)})}else(d!==1||f!==1)&&v.push(i(v)+"scale("+d+","+f+")")}return function(l,c){var d=[],f=[];return l=t(l),c=t(c),s(l.translateX,l.translateY,c.translateX,c.translateY,d,f),a(l.rotate,c.rotate,d,f),o(l.skewX,c.skewX,d,f),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,d,f),l=c=null,function(v){for(var m=-1,g=f.length,p;++m<g;)d[(p=f[m]).i]=p.x(v);return d.join("")}}}var rv=Bo(ev,"px, ","px)","deg)"),iv=Bo(nv,", ",")",")"),sv=1e-12;function xa(t){return((t=Math.exp(t))+1/t)/2}function av(t){return((t=Math.exp(t))-1/t)/2}function ov(t){return((t=Math.exp(2*t))-1)/(t+1)}const lv=(function t(e,n,r){function i(s,a){var o=s[0],u=s[1],l=s[2],c=a[0],d=a[1],f=a[2],v=c-o,m=d-u,g=v*v+m*m,p,_;if(g<sv)_=Math.log(f/l)/e,p=function(I){return[o+I*v,u+I*m,l*Math.exp(e*I*_)]};else{var w=Math.sqrt(g),C=(f*f-l*l+r*g)/(2*l*n*w),y=(f*f-l*l-r*g)/(2*f*n*w),S=Math.log(Math.sqrt(C*C+1)-C),F=Math.log(Math.sqrt(y*y+1)-y);_=(F-S)/e,p=function(I){var O=I*_,j=xa(S),V=l/(n*w)*(j*ov(e*O+S)-av(S));return[o+V*v,u+V*m,l*j/xa(e*O+S)]}}return p.duration=_*1e3*e/Math.SQRT2,p}return i.rho=function(s){var a=Math.max(.001,+s),o=a*a,u=o*o;return t(a,o,u)},i})(Math.SQRT2,2,4);var Yn=0,hr=0,or=0,Vo=1e3,gi,vr,mi=0,yn=0,Ni=0,kr=typeof performance=="object"&&performance.now?performance:Date,Uo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Is(){return yn||(Uo(uv),yn=kr.now()+Ni)}function uv(){yn=0}function yi(){this._call=this._time=this._next=null}yi.prototype=Ps.prototype={constructor:yi,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Is():+n)+(e==null?0:+e),!this._next&&vr!==this&&(vr?vr._next=this:gi=this,vr=this),this._call=t,this._time=n,cs()},stop:function(){this._call&&(this._call=null,this._time=1/0,cs())}};function Ps(t,e,n){var r=new yi;return r.restart(t,e,n),r}function cv(){Is(),++Yn;for(var t=gi,e;t;)(e=yn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Yn}function wa(){yn=(mi=kr.now())+Ni,Yn=hr=0;try{cv()}finally{Yn=0,hv(),yn=0}}function fv(){var t=kr.now(),e=t-mi;e>Vo&&(Ni-=e,mi=t)}function hv(){for(var t,e=gi,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:gi=n);vr=t,cs(r)}function cs(t){if(!Yn){hr&&(hr=clearTimeout(hr));var e=t-yn;e>24?(t<1/0&&(hr=setTimeout(wa,t-kr.now()-Ni)),or&&(or=clearInterval(or))):(or||(mi=kr.now(),or=setInterval(fv,Vo)),Yn=1,Uo(wa))}}function ba(t,e,n){var r=new yi;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var vv=Ar("start","end","cancel","interrupt"),dv=[],Wo=0,$a=1,fs=2,ei=3,Ea=4,hs=5,ni=6;function Si(t,e,n,r,i,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;pv(t,n,{name:e,index:r,group:i,on:vv,tween:dv,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Wo})}function Rs(t,e){var n=oe(t,e);if(n.state>Wo)throw new Error("too late; already scheduled");return n}function ge(t,e){var n=oe(t,e);if(n.state>ei)throw new Error("too late; already running");return n}function oe(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function pv(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Ps(s,0,n.time);function s(l){n.state=$a,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var c,d,f,v;if(n.state!==$a)return u();for(c in r)if(v=r[c],v.name===n.name){if(v.state===ei)return ba(a);v.state===Ea?(v.state=ni,v.timer.stop(),v.on.call("interrupt",t,t.__data__,v.index,v.group),delete r[c]):+c<e&&(v.state=ni,v.timer.stop(),v.on.call("cancel",t,t.__data__,v.index,v.group),delete r[c])}if(ba(function(){n.state===ei&&(n.state=Ea,n.timer.restart(o,n.delay,n.time),o(l))}),n.state=fs,n.on.call("start",t,t.__data__,n.index,n.group),n.state===fs){for(n.state=ei,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(v=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=v);i.length=d+1}}function o(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=hs,1),d=-1,f=i.length;++d<f;)i[d].call(t,c);n.state===hs&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=ni,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function ri(t,e){var n=t.__transition,r,i,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){s=!1;continue}i=r.state>fs&&r.state<hs,r.state=ni,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}s&&delete t.__transition}}function _v(t){return this.each(function(){ri(this,t)})}function gv(t,e){var n,r;return function(){var i=ge(this,t),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function mv(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=ge(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=o;break}u===l&&i.push(o)}s.tween=i}}function yv(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=oe(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?gv:mv)(n,t,e))}function Fs(t,e,n){var r=t._id;return t.each(function(){var i=ge(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return oe(i,r).value[e]}}function Ko(t,e){var n;return(typeof e=="number"?We:e instanceof Er?ma:(n=Er(e))?(e=n,ma):tv)(t,e)}function xv(t){return function(){this.removeAttribute(t)}}function wv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function bv(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===r?s:s=e(r=a,n)}}function $v(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?s:s=e(r=a,n)}}function Ev(t,e,n){var r,i,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),u=o+"",a===u?null:a===r&&u===i?s:(i=u,s=e(r=a,o)))}}function kv(t,e,n){var r,i,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),u=o+"",a===u?null:a===r&&u===i?s:(i=u,s=e(r=a,o)))}}function Tv(t,e){var n=Ai(t),r=n==="transform"?iv:Ko;return this.attrTween(t,typeof e=="function"?(n.local?kv:Ev)(n,r,Fs(this,"attr."+t,e)):e==null?(n.local?wv:xv)(n):(n.local?$v:bv)(n,r,e))}function Mv(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function zv(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Av(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&zv(t,s)),n}return i._value=e,i}function Nv(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Mv(t,s)),n}return i._value=e,i}function Sv(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ai(t);return this.tween(n,(r.local?Av:Nv)(r,e))}function Cv(t,e){return function(){Rs(this,t).delay=+e.apply(this,arguments)}}function Iv(t,e){return e=+e,function(){Rs(this,t).delay=e}}function Pv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Cv:Iv)(e,t)):oe(this.node(),e).delay}function Rv(t,e){return function(){ge(this,t).duration=+e.apply(this,arguments)}}function Fv(t,e){return e=+e,function(){ge(this,t).duration=e}}function Dv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Rv:Fv)(e,t)):oe(this.node(),e).duration}function Lv(t,e){if(typeof e!="function")throw new Error;return function(){ge(this,t).ease=e}}function Ov(t){var e=this._id;return arguments.length?this.each(Lv(e,t)):oe(this.node(),e).ease}function qv(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ge(this,t).ease=n}}function Hv(t){if(typeof t!="function")throw new Error;return this.each(qv(this._id,t))}function Xv(t){typeof t!="function"&&(t=Mo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],u,l=0;l<a;++l)(u=s[l])&&t.call(u,u.__data__,l,s)&&o.push(u);return new Re(r,this._parents,this._name,this._id)}function Yv(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var u=e[o],l=n[o],c=u.length,d=a[o]=new Array(c),f,v=0;v<c;++v)(f=u[v]||l[v])&&(d[v]=f);for(;o<r;++o)a[o]=e[o];return new Re(a,this._parents,this._name,this._id)}function Bv(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Vv(t,e,n){var r,i,s=Bv(e)?Rs:ge;return function(){var a=s(this,t),o=a.on;o!==r&&(i=(r=o).copy()).on(e,n),a.on=i}}function Uv(t,e){var n=this._id;return arguments.length<2?oe(this.node(),n).on.on(t):this.each(Vv(n,t,e))}function Wv(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Kv(){return this.on("end.remove",Wv(this._id))}function Gv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ns(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],u=o.length,l=s[a]=new Array(u),c,d,f=0;f<u;++f)(c=o[f])&&(d=t.call(c,c.__data__,f,o))&&("__data__"in c&&(d.__data__=c.__data__),l[f]=d,Si(l[f],e,n,f,l,oe(c,n)));return new Re(s,this._parents,e,n)}function Zv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=To(t));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var u=r[o],l=u.length,c,d=0;d<l;++d)if(c=u[d]){for(var f=t.call(c,c.__data__,d,u),v,m=oe(c,n),g=0,p=f.length;g<p;++g)(v=f[g])&&Si(v,e,n,g,f,m);s.push(f),a.push(c)}return new Re(s,a,e,n)}var Qv=Nr.prototype.constructor;function jv(){return new Qv(this._groups,this._parents)}function Jv(t,e){var n,r,i;return function(){var s=Xn(this,t),a=(this.style.removeProperty(t),Xn(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}function Go(t){return function(){this.style.removeProperty(t)}}function td(t,e,n){var r,i=n+"",s;return function(){var a=Xn(this,t);return a===i?null:a===r?s:s=e(r=a,n)}}function ed(t,e,n){var r,i,s;return function(){var a=Xn(this,t),o=n(this),u=o+"";return o==null&&(u=o=(this.style.removeProperty(t),Xn(this,t))),a===u?null:a===r&&u===i?s:(i=u,s=e(r=a,o))}}function nd(t,e){var n,r,i,s="style."+e,a="end."+s,o;return function(){var u=ge(this,t),l=u.on,c=u.value[s]==null?o||(o=Go(e)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(a,i=c),u.on=r}}function rd(t,e,n){var r=(t+="")=="transform"?rv:Ko;return e==null?this.styleTween(t,Jv(t,r)).on("end.style."+t,Go(t)):typeof e=="function"?this.styleTween(t,ed(t,r,Fs(this,"style."+t,e))).each(nd(this._id,t)):this.styleTween(t,td(t,r,e),n).on("end.style."+t,null)}function id(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function sd(t,e,n){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&id(t,a,n)),r}return s._value=e,s}function ad(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,sd(t,e,n??""))}function od(t){return function(){this.textContent=t}}function ld(t){return function(){var e=t(this);this.textContent=e??""}}function ud(t){return this.tween("text",typeof t=="function"?ld(Fs(this,"text",t)):od(t==null?"":t+""))}function cd(t){return function(e){this.textContent=t.call(this,e)}}function fd(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&cd(i)),e}return r._value=t,r}function hd(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,fd(t))}function vd(){for(var t=this._name,e=this._id,n=Zo(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,u,l=0;l<o;++l)if(u=a[l]){var c=oe(u,e);Si(u,t,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Re(r,this._parents,t,n)}function dd(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},u={value:function(){--i===0&&s()}};n.each(function(){var l=ge(this,r),c=l.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(u)),l.on=e}),i===0&&s()})}var pd=0;function Re(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Zo(){return++pd}var $e=Nr.prototype;Re.prototype={constructor:Re,select:Gv,selectAll:Zv,selectChild:$e.selectChild,selectChildren:$e.selectChildren,filter:Xv,merge:Yv,selection:jv,transition:vd,call:$e.call,nodes:$e.nodes,node:$e.node,size:$e.size,empty:$e.empty,each:$e.each,on:Uv,attr:Tv,attrTween:Sv,style:rd,styleTween:ad,text:ud,textTween:hd,remove:Kv,tween:yv,delay:Pv,duration:Dv,ease:Ov,easeVarying:Hv,end:dd,[Symbol.iterator]:$e[Symbol.iterator]};function _d(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var gd={time:null,delay:0,duration:250,ease:_d};function md(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function yd(t){var e,n;t instanceof Re?(e=t._id,t=t._name):(e=Zo(),(n=gd).time=Is(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,u,l=0;l<o;++l)(u=a[l])&&Si(u,t,e,l,a,n||md(u,e));return new Re(r,this._parents,t,e)}Nr.prototype.interrupt=_v;Nr.prototype.transition=yd;const vs=Math.PI,ds=2*vs,on=1e-6,xd=ds-on;function Qo(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function wd(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Qo;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class bd{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Qo:wd(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,u=r-e,l=i-n,c=a-e,d=o-n,f=c*c+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>on)if(!(Math.abs(d*u-l*c)>on)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-a,m=i-o,g=u*u+l*l,p=v*v+m*m,_=Math.sqrt(g),w=Math.sqrt(f),C=s*Math.tan((vs-Math.acos((g+f-p)/(2*_*w)))/2),y=C/w,S=C/_;Math.abs(y-1)>on&&this._append`L${e+y*c},${n+y*d}`,this._append`A${s},${s},0,0,${+(d*v>c*m)},${this._x1=e+S*u},${this._y1=n+S*l}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),u=r*Math.sin(i),l=e+o,c=n+u,d=1^a,f=a?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>on||Math.abs(this._y1-c)>on)&&this._append`L${l},${c}`,r&&(f<0&&(f=f%ds+ds),f>xd?this._append`A${r},${r},0,1,${d},${e-o},${n-u}A${r},${r},0,1,${d},${this._x1=l},${this._y1=c}`:f>on&&this._append`A${r},${r},0,${+(f>=vs)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function $d(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var s,a=n.length,o,u=0,l=0;for(s=0;s<a;++s)o=n[s],u+=o.x,l+=o.y;for(u=(u/a-t)*r,l=(l/a-e)*r,s=0;s<a;++s)o=n[s],o.x-=u,o.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(t=+s,i):t},i.y=function(s){return arguments.length?(e=+s,i):e},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Ed(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return jo(this.cover(e,n),e,n,t)}function jo(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s=t._root,a={data:r},o=t._x0,u=t._y0,l=t._x1,c=t._y1,d,f,v,m,g,p,_,w;if(!s)return t._root=a,t;for(;s.length;)if((g=e>=(d=(o+l)/2))?o=d:l=d,(p=n>=(f=(u+c)/2))?u=f:c=f,i=s,!(s=s[_=p<<1|g]))return i[_]=a,t;if(v=+t._x.call(null,s.data),m=+t._y.call(null,s.data),e===v&&n===m)return a.next=s,i?i[_]=a:t._root=a,t;do i=i?i[_]=new Array(4):t._root=new Array(4),(g=e>=(d=(o+l)/2))?o=d:l=d,(p=n>=(f=(u+c)/2))?u=f:c=f;while((_=p<<1|g)===(w=(m>=f)<<1|v>=d));return i[w]=s,i[_]=a,t}function kd(t){var e,n,r=t.length,i,s,a=new Array(r),o=new Array(r),u=1/0,l=1/0,c=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(a[n]=i,o[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>d&&(d=s));if(u>c||l>d)return this;for(this.cover(u,l).cover(c,d),n=0;n<r;++n)jo(this,a[n],o[n],t[n]);return this}function Td(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else{for(var a=i-n||1,o=this._root,u,l;n>t||t>=i||r>e||e>=s;)switch(l=(e<r)<<1|t<n,u=new Array(4),u[l]=o,o=u,a*=2,l){case 0:i=n+a,s=r+a;break;case 1:n=i-a,s=r+a;break;case 2:i=n+a,r=s-a;break;case 3:n=i-a,r=s-a;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Md(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function zd(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Tt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Ad(t,e,n){var r,i=this._x0,s=this._y0,a,o,u,l,c=this._x1,d=this._y1,f=[],v=this._root,m,g;for(v&&f.push(new Tt(v,i,s,c,d)),n==null?n=1/0:(i=t-n,s=e-n,c=t+n,d=e+n,n*=n);m=f.pop();)if(!(!(v=m.node)||(a=m.x0)>c||(o=m.y0)>d||(u=m.x1)<i||(l=m.y1)<s))if(v.length){var p=(a+u)/2,_=(o+l)/2;f.push(new Tt(v[3],p,_,u,l),new Tt(v[2],a,_,p,l),new Tt(v[1],p,o,u,_),new Tt(v[0],a,o,p,_)),(g=(e>=_)<<1|t>=p)&&(m=f[f.length-1],f[f.length-1]=f[f.length-1-g],f[f.length-1-g]=m)}else{var w=t-+this._x.call(null,v.data),C=e-+this._y.call(null,v.data),y=w*w+C*C;if(y<n){var S=Math.sqrt(n=y);i=t-S,s=e-S,c=t+S,d=e+S,r=v.data}}return r}function Nd(t){if(isNaN(c=+this._x.call(null,t))||isNaN(d=+this._y.call(null,t)))return this;var e,n=this._root,r,i,s,a=this._x0,o=this._y0,u=this._x1,l=this._y1,c,d,f,v,m,g,p,_;if(!n)return this;if(n.length)for(;;){if((m=c>=(f=(a+u)/2))?a=f:u=f,(g=d>=(v=(o+l)/2))?o=v:l=v,e=n,!(n=n[p=g<<1|m]))return this;if(!n.length)break;(e[p+1&3]||e[p+2&3]||e[p+3&3])&&(r=e,_=p)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):e?(s?e[p]=s:delete e[p],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[_]=n:this._root=n),this):(this._root=s,this)}function Sd(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Cd(){return this._root}function Id(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Pd(t){var e=[],n,r=this._root,i,s,a,o,u;for(r&&e.push(new Tt(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,s=n.x0,a=n.y0,o=n.x1,u=n.y1)&&r.length){var l=(s+o)/2,c=(a+u)/2;(i=r[3])&&e.push(new Tt(i,l,c,o,u)),(i=r[2])&&e.push(new Tt(i,s,c,l,u)),(i=r[1])&&e.push(new Tt(i,l,a,o,c)),(i=r[0])&&e.push(new Tt(i,s,a,l,c))}return this}function Rd(t){var e=[],n=[],r;for(this._root&&e.push(new Tt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,a=r.x0,o=r.y0,u=r.x1,l=r.y1,c=(a+u)/2,d=(o+l)/2;(s=i[0])&&e.push(new Tt(s,a,o,c,d)),(s=i[1])&&e.push(new Tt(s,c,o,u,d)),(s=i[2])&&e.push(new Tt(s,a,d,c,l)),(s=i[3])&&e.push(new Tt(s,c,d,u,l))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Fd(t){return t[0]}function Dd(t){return arguments.length?(this._x=t,this):this._x}function Ld(t){return t[1]}function Od(t){return arguments.length?(this._y=t,this):this._y}function Ds(t,e,n){var r=new Ls(e??Fd,n??Ld,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Ls(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function ka(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var zt=Ds.prototype=Ls.prototype;zt.copy=function(){var t=new Ls(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=ka(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=ka(r));return t};zt.add=Ed;zt.addAll=kd;zt.cover=Td;zt.data=Md;zt.extent=zd;zt.find=Ad;zt.remove=Nd;zt.removeAll=Sd;zt.root=Cd;zt.size=Id;zt.visit=Pd;zt.visitAfter=Rd;zt.x=Dd;zt.y=Od;function Mt(t){return function(){return t}}function Ke(t){return(t()-.5)*1e-6}function qd(t){return t.x+t.vx}function Hd(t){return t.y+t.vy}function Xd(t){var e,n,r,i=1,s=1;typeof t!="function"&&(t=Mt(t==null?1:+t));function a(){for(var l,c=e.length,d,f,v,m,g,p,_=0;_<s;++_)for(d=Ds(e,qd,Hd).visitAfter(o),l=0;l<c;++l)f=e[l],g=n[f.index],p=g*g,v=f.x+f.vx,m=f.y+f.vy,d.visit(w);function w(C,y,S,F,I){var O=C.data,j=C.r,V=g+j;if(O){if(O.index>f.index){var tt=v-O.x-O.vx,ct=m-O.y-O.vy,it=tt*tt+ct*ct;it<V*V&&(tt===0&&(tt=Ke(r),it+=tt*tt),ct===0&&(ct=Ke(r),it+=ct*ct),it=(V-(it=Math.sqrt(it)))/it*i,f.vx+=(tt*=it)*(V=(j*=j)/(p+j)),f.vy+=(ct*=it)*V,O.vx-=tt*(V=1-V),O.vy-=ct*V)}return}return y>v+V||F<v-V||S>m+V||I<m-V}}function o(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(e){var l,c=e.length,d;for(n=new Array(c),l=0;l<c;++l)d=e[l],n[d.index]=+t(d,l,e)}}return a.initialize=function(l,c){e=l,r=c,u()},a.iterations=function(l){return arguments.length?(s=+l,a):s},a.strength=function(l){return arguments.length?(i=+l,a):i},a.radius=function(l){return arguments.length?(t=typeof l=="function"?l:Mt(+l),u(),a):t},a}function Yd(t){return t.index}function Ta(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Bd(t){var e=Yd,n=d,r,i=Mt(30),s,a,o,u,l,c=1;t==null&&(t=[]);function d(p){return 1/Math.min(o[p.source.index],o[p.target.index])}function f(p){for(var _=0,w=t.length;_<c;++_)for(var C=0,y,S,F,I,O,j,V;C<w;++C)y=t[C],S=y.source,F=y.target,I=F.x+F.vx-S.x-S.vx||Ke(l),O=F.y+F.vy-S.y-S.vy||Ke(l),j=Math.sqrt(I*I+O*O),j=(j-s[C])/j*p*r[C],I*=j,O*=j,F.vx-=I*(V=u[C]),F.vy-=O*V,S.vx+=I*(V=1-V),S.vy+=O*V}function v(){if(a){var p,_=a.length,w=t.length,C=new Map(a.map((S,F)=>[e(S,F,a),S])),y;for(p=0,o=new Array(_);p<w;++p)y=t[p],y.index=p,typeof y.source!="object"&&(y.source=Ta(C,y.source)),typeof y.target!="object"&&(y.target=Ta(C,y.target)),o[y.source.index]=(o[y.source.index]||0)+1,o[y.target.index]=(o[y.target.index]||0)+1;for(p=0,u=new Array(w);p<w;++p)y=t[p],u[p]=o[y.source.index]/(o[y.source.index]+o[y.target.index]);r=new Array(w),m(),s=new Array(w),g()}}function m(){if(a)for(var p=0,_=t.length;p<_;++p)r[p]=+n(t[p],p,t)}function g(){if(a)for(var p=0,_=t.length;p<_;++p)s[p]=+i(t[p],p,t)}return f.initialize=function(p,_){a=p,l=_,v()},f.links=function(p){return arguments.length?(t=p,v(),f):t},f.id=function(p){return arguments.length?(e=p,f):e},f.iterations=function(p){return arguments.length?(c=+p,f):c},f.strength=function(p){return arguments.length?(n=typeof p=="function"?p:Mt(+p),m(),f):n},f.distance=function(p){return arguments.length?(i=typeof p=="function"?p:Mt(+p),g(),f):i},f}const Vd=1664525,Ud=1013904223,Ma=4294967296;function Wd(){let t=1;return()=>(t=(Vd*t+Ud)%Ma)/Ma}function Kd(t){return t.x}function Gd(t){return t.y}var Zd=10,Qd=Math.PI*(3-Math.sqrt(5));function jd(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,a=.6,o=new Map,u=Ps(d),l=Ar("tick","end"),c=Wd();t==null&&(t=[]);function d(){f(),l.call("tick",e),n<r&&(u.stop(),l.call("end",e))}function f(g){var p,_=t.length,w;g===void 0&&(g=1);for(var C=0;C<g;++C)for(n+=(s-n)*i,o.forEach(function(y){y(n)}),p=0;p<_;++p)w=t[p],w.fx==null?w.x+=w.vx*=a:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=a:(w.y=w.fy,w.vy=0);return e}function v(){for(var g=0,p=t.length,_;g<p;++g){if(_=t[g],_.index=g,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var w=Zd*Math.sqrt(.5+g),C=g*Qd;_.x=w*Math.cos(C),_.y=w*Math.sin(C)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function m(g){return g.initialize&&g.initialize(t,c),g}return v(),e={tick:f,restart:function(){return u.restart(d),e},stop:function(){return u.stop(),e},nodes:function(g){return arguments.length?(t=g,v(),o.forEach(m),e):t},alpha:function(g){return arguments.length?(n=+g,e):n},alphaMin:function(g){return arguments.length?(r=+g,e):r},alphaDecay:function(g){return arguments.length?(i=+g,e):+i},alphaTarget:function(g){return arguments.length?(s=+g,e):s},velocityDecay:function(g){return arguments.length?(a=1-g,e):1-a},randomSource:function(g){return arguments.length?(c=g,o.forEach(m),e):c},force:function(g,p){return arguments.length>1?(p==null?o.delete(g):o.set(g,m(p)),e):o.get(g)},find:function(g,p,_){var w=0,C=t.length,y,S,F,I,O;for(_==null?_=1/0:_*=_,w=0;w<C;++w)I=t[w],y=g-I.x,S=p-I.y,F=y*y+S*S,F<_&&(O=I,_=F);return O},on:function(g,p){return arguments.length>1?(l.on(g,p),e):l.on(g)}}}function Jd(){var t,e,n,r,i=Mt(-30),s,a=1,o=1/0,u=.81;function l(v){var m,g=t.length,p=Ds(t,Kd,Gd).visitAfter(d);for(r=v,m=0;m<g;++m)e=t[m],p.visit(f)}function c(){if(t){var v,m=t.length,g;for(s=new Array(m),v=0;v<m;++v)g=t[v],s[g.index]=+i(g,v,t)}}function d(v){var m=0,g,p,_=0,w,C,y;if(v.length){for(w=C=y=0;y<4;++y)(g=v[y])&&(p=Math.abs(g.value))&&(m+=g.value,_+=p,w+=p*g.x,C+=p*g.y);v.x=w/_,v.y=C/_}else{g=v,g.x=g.data.x,g.y=g.data.y;do m+=s[g.data.index];while(g=g.next)}v.value=m}function f(v,m,g,p){if(!v.value)return!0;var _=v.x-e.x,w=v.y-e.y,C=p-m,y=_*_+w*w;if(C*C/u<y)return y<o&&(_===0&&(_=Ke(n),y+=_*_),w===0&&(w=Ke(n),y+=w*w),y<a&&(y=Math.sqrt(a*y)),e.vx+=_*v.value*r/y,e.vy+=w*v.value*r/y),!0;if(v.length||y>=o)return;(v.data!==e||v.next)&&(_===0&&(_=Ke(n),y+=_*_),w===0&&(w=Ke(n),y+=w*w),y<a&&(y=Math.sqrt(a*y)));do v.data!==e&&(C=s[v.data.index]*r/y,e.vx+=_*C,e.vy+=w*C);while(v=v.next)}return l.initialize=function(v,m){t=v,n=m,c()},l.strength=function(v){return arguments.length?(i=typeof v=="function"?v:Mt(+v),c(),l):i},l.distanceMin=function(v){return arguments.length?(a=v*v,l):Math.sqrt(a)},l.distanceMax=function(v){return arguments.length?(o=v*v,l):Math.sqrt(o)},l.theta=function(v){return arguments.length?(u=v*v,l):Math.sqrt(u)},l}function tp(t){var e=Mt(.1),n,r,i;typeof t!="function"&&(t=Mt(t==null?0:+t));function s(o){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*o}function a(){if(n){var o,u=n.length;for(r=new Array(u),i=new Array(u),o=0;o<u;++o)r[o]=isNaN(i[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return s.initialize=function(o){n=o,a()},s.strength=function(o){return arguments.length?(e=typeof o=="function"?o:Mt(+o),a(),s):e},s.x=function(o){return arguments.length?(t=typeof o=="function"?o:Mt(+o),a(),s):t},s}function ep(t){var e=Mt(.1),n,r,i;typeof t!="function"&&(t=Mt(t==null?0:+t));function s(o){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*o}function a(){if(n){var o,u=n.length;for(r=new Array(u),i=new Array(u),o=0;o<u;++o)r[o]=isNaN(i[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return s.initialize=function(o){n=o,a()},s.strength=function(o){return arguments.length?(e=typeof o=="function"?o:Mt(+o),a(),s):e},s.y=function(o){return arguments.length?(t=typeof o=="function"?o:Mt(+o),a(),s):t},s}function np(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function rp(t,e){return t[0]-e[0]||t[1]-e[1]}function za(t){const e=t.length,n=[0,1];let r=2,i;for(i=2;i<e;++i){for(;r>1&&np(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function ip(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(rp),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var s=za(r),a=za(i),o=a[0]===s[0],u=a[a.length-1]===s[s.length-1],l=[];for(e=s.length-1;e>=0;--e)l.push(t[r[s[e]][2]]);for(e=+o;e<a.length-u;++e)l.push(t[r[a[e]][2]]);return l}function Nn(t){return function(){return t}}function sp(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new bd(e)}function ap(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Jo(t){this._context=t}Jo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function op(t){return new Jo(t)}function lp(t){return t[0]}function up(t){return t[1]}function cp(t,e){var n=Nn(!0),r=null,i=op,s=null,a=sp(o);t=typeof t=="function"?t:t===void 0?lp:Nn(t),e=typeof e=="function"?e:e===void 0?up:Nn(e);function o(u){var l,c=(u=ap(u)).length,d,f=!1,v;for(r==null&&(s=i(v=a())),l=0;l<=c;++l)!(l<c&&n(d=u[l],l,u))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(d,l,u),+e(d,l,u));if(v)return s=null,v+""||null}return o.x=function(u){return arguments.length?(t=typeof u=="function"?u:Nn(+u),o):t},o.y=function(u){return arguments.length?(e=typeof u=="function"?u:Nn(+u),o):e},o.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Nn(!!u),o):n},o.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),o):i},o.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),o):r},o}function Aa(){}function ps(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function tl(t,e){this._context=t,this._k=(1-e)/6}tl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ps(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ps(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new tl(r,e)}return n.tension=function(r){return t(+r)},n})(0);function el(t,e){this._context=t,this._k=(1-e)/6}el.prototype={areaStart:Aa,areaEnd:Aa,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ps(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const fp=(function t(e){function n(r){return new el(r,e)}return n.tension=function(r){return t(+r)},n})(0),jr=t=>()=>t;function hp(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ce(t,e,n){this.k=t,this.x=e,this.y=n}Ce.prototype={constructor:Ce,scale:function(t){return t===1?this:new Ce(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ce(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var xi=new Ce(1,0,0);Ce.prototype;function Gi(t){t.stopImmediatePropagation()}function lr(t){t.preventDefault(),t.stopImmediatePropagation()}function vp(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function dp(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Na(){return this.__zoom||xi}function pp(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function _p(){return navigator.maxTouchPoints||"ontouchstart"in this}function gp(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function mp(){var t=vp,e=dp,n=gp,r=pp,i=_p,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],o=250,u=lv,l=Ar("start","zoom","end"),c,d,f,v=500,m=150,g=0,p=10;function _(x){x.property("__zoom",Na).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",V).filter(i).on("touchstart.zoom",tt).on("touchmove.zoom",ct).on("touchend.zoom touchcancel.zoom",it).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(x,D,k,L){var U=x.selection?x.selection():x;U.property("__zoom",Na),x!==U?S(x,D,k,L):U.interrupt().each(function(){F(this,arguments).event(L).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},_.scaleBy=function(x,D,k,L){_.scaleTo(x,function(){var U=this.__zoom.k,Z=typeof D=="function"?D.apply(this,arguments):D;return U*Z},k,L)},_.scaleTo=function(x,D,k,L){_.transform(x,function(){var U=e.apply(this,arguments),Z=this.__zoom,T=k==null?y(U):typeof k=="function"?k.apply(this,arguments):k,E=Z.invert(T),R=typeof D=="function"?D.apply(this,arguments):D;return n(C(w(Z,R),T,E),U,a)},k,L)},_.translateBy=function(x,D,k,L){_.transform(x,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof k=="function"?k.apply(this,arguments):k),e.apply(this,arguments),a)},null,L)},_.translateTo=function(x,D,k,L,U){_.transform(x,function(){var Z=e.apply(this,arguments),T=this.__zoom,E=L==null?y(Z):typeof L=="function"?L.apply(this,arguments):L;return n(xi.translate(E[0],E[1]).scale(T.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof k=="function"?-k.apply(this,arguments):-k),Z,a)},L,U)};function w(x,D){return D=Math.max(s[0],Math.min(s[1],D)),D===x.k?x:new Ce(D,x.x,x.y)}function C(x,D,k){var L=D[0]-k[0]*x.k,U=D[1]-k[1]*x.k;return L===x.x&&U===x.y?x:new Ce(x.k,L,U)}function y(x){return[(+x[0][0]+ +x[1][0])/2,(+x[0][1]+ +x[1][1])/2]}function S(x,D,k,L){x.on("start.zoom",function(){F(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(L).end()}).tween("zoom",function(){var U=this,Z=arguments,T=F(U,Z).event(L),E=e.apply(U,Z),R=k==null?y(E):typeof k=="function"?k.apply(U,Z):k,z=Math.max(E[1][0]-E[0][0],E[1][1]-E[0][1]),N=U.__zoom,$=typeof D=="function"?D.apply(U,Z):D,B=u(N.invert(R).concat(z/N.k),$.invert(R).concat(z/$.k));return function(J){if(J===1)J=$;else{var Q=B(J),ot=z/Q[2];J=new Ce(ot,R[0]-Q[0]*ot,R[1]-Q[1]*ot)}T.zoom(null,J)}})}function F(x,D,k){return!k&&x.__zooming||new I(x,D)}function I(x,D){this.that=x,this.args=D,this.active=0,this.sourceEvent=null,this.extent=e.apply(x,D),this.taps=0}I.prototype={event:function(x){return x&&(this.sourceEvent=x),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(x,D){return this.mouse&&x!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&x!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&x!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(x){var D=St(this.that).datum();l.call(x,this.that,new hp(x,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:l}),D)}};function O(x,...D){if(!t.apply(this,arguments))return;var k=F(this,D).event(x),L=this.__zoom,U=Math.max(s[0],Math.min(s[1],L.k*Math.pow(2,r.apply(this,arguments)))),Z=ze(x);if(k.wheel)(k.mouse[0][0]!==Z[0]||k.mouse[0][1]!==Z[1])&&(k.mouse[1]=L.invert(k.mouse[0]=Z)),clearTimeout(k.wheel);else{if(L.k===U)return;k.mouse=[Z,L.invert(Z)],ri(this),k.start()}lr(x),k.wheel=setTimeout(T,m),k.zoom("mouse",n(C(w(L,U),k.mouse[0],k.mouse[1]),k.extent,a));function T(){k.wheel=null,k.end()}}function j(x,...D){if(f||!t.apply(this,arguments))return;var k=x.currentTarget,L=F(this,D,!0).event(x),U=St(x.view).on("mousemove.zoom",R,!0).on("mouseup.zoom",z,!0),Z=ze(x,k),T=x.clientX,E=x.clientY;Do(x.view),Gi(x),L.mouse=[Z,this.__zoom.invert(Z)],ri(this),L.start();function R(N){if(lr(N),!L.moved){var $=N.clientX-T,B=N.clientY-E;L.moved=$*$+B*B>g}L.event(N).zoom("mouse",n(C(L.that.__zoom,L.mouse[0]=ze(N,k),L.mouse[1]),L.extent,a))}function z(N){U.on("mousemove.zoom mouseup.zoom",null),Lo(N.view,L.moved),lr(N),L.event(N).end()}}function V(x,...D){if(t.apply(this,arguments)){var k=this.__zoom,L=ze(x.changedTouches?x.changedTouches[0]:x,this),U=k.invert(L),Z=k.k*(x.shiftKey?.5:2),T=n(C(w(k,Z),L,U),e.apply(this,D),a);lr(x),o>0?St(this).transition().duration(o).call(S,T,L,x):St(this).call(_.transform,T,L,x)}}function tt(x,...D){if(t.apply(this,arguments)){var k=x.touches,L=k.length,U=F(this,D,x.changedTouches.length===L).event(x),Z,T,E,R;for(Gi(x),T=0;T<L;++T)E=k[T],R=ze(E,this),R=[R,this.__zoom.invert(R),E.identifier],U.touch0?!U.touch1&&U.touch0[2]!==R[2]&&(U.touch1=R,U.taps=0):(U.touch0=R,Z=!0,U.taps=1+!!c);c&&(c=clearTimeout(c)),Z&&(U.taps<2&&(d=R[0],c=setTimeout(function(){c=null},v)),ri(this),U.start())}}function ct(x,...D){if(this.__zooming){var k=F(this,D).event(x),L=x.changedTouches,U=L.length,Z,T,E,R;for(lr(x),Z=0;Z<U;++Z)T=L[Z],E=ze(T,this),k.touch0&&k.touch0[2]===T.identifier?k.touch0[0]=E:k.touch1&&k.touch1[2]===T.identifier&&(k.touch1[0]=E);if(T=k.that.__zoom,k.touch1){var z=k.touch0[0],N=k.touch0[1],$=k.touch1[0],B=k.touch1[1],J=(J=$[0]-z[0])*J+(J=$[1]-z[1])*J,Q=(Q=B[0]-N[0])*Q+(Q=B[1]-N[1])*Q;T=w(T,Math.sqrt(J/Q)),E=[(z[0]+$[0])/2,(z[1]+$[1])/2],R=[(N[0]+B[0])/2,(N[1]+B[1])/2]}else if(k.touch0)E=k.touch0[0],R=k.touch0[1];else return;k.zoom("touch",n(C(T,E,R),k.extent,a))}}function it(x,...D){if(this.__zooming){var k=F(this,D).event(x),L=x.changedTouches,U=L.length,Z,T;for(Gi(x),f&&clearTimeout(f),f=setTimeout(function(){f=null},v),Z=0;Z<U;++Z)T=L[Z],k.touch0&&k.touch0[2]===T.identifier?delete k.touch0:k.touch1&&k.touch1[2]===T.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(T=ze(T,this),Math.hypot(d[0]-T[0],d[1]-T[1])<p)){var E=St(this).on("dblclick.zoom");E&&E.apply(this,arguments)}}}return _.wheelDelta=function(x){return arguments.length?(r=typeof x=="function"?x:jr(+x),_):r},_.filter=function(x){return arguments.length?(t=typeof x=="function"?x:jr(!!x),_):t},_.touchable=function(x){return arguments.length?(i=typeof x=="function"?x:jr(!!x),_):i},_.extent=function(x){return arguments.length?(e=typeof x=="function"?x:jr([[+x[0][0],+x[0][1]],[+x[1][0],+x[1][1]]]),_):e},_.scaleExtent=function(x){return arguments.length?(s[0]=+x[0],s[1]=+x[1],_):[s[0],s[1]]},_.translateExtent=function(x){return arguments.length?(a[0][0]=+x[0][0],a[1][0]=+x[1][0],a[0][1]=+x[0][1],a[1][1]=+x[1][1],_):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},_.constrain=function(x){return arguments.length?(n=x,_):n},_.duration=function(x){return arguments.length?(o=+x,_):o},_.interpolate=function(x){return arguments.length?(u=x,_):u},_.on=function(){var x=l.on.apply(l,arguments);return x===l?_:x},_.clickDistance=function(x){return arguments.length?(g=(x=+x)*x,_):Math.sqrt(g)},_.tapDistance=function(x){return arguments.length?(p=+x,_):p},_}var yp=W('<div class="graph-section svelte-zf24ck"><div class="graph-container svelte-zf24ck"><svg id="graph" class="svelte-zf24ck"></svg></div></div>');function xp(t,e){se(e,!1);const n=()=>jt(As,"$graphData",s),r=()=>jt(zi,"$activeTypes",s),i=()=>jt(hi,"$highlightedTokens",s),[s,a]=Le();let o=at(),u=at(),l=null,c=xi,d=new Map,f=null,v=!1,m={x:0,y:0},g=null,p=[],_=at(null);Ms(()=>{Y(u,St(h(o))),n()&&w(n(),r());const T=new ResizeObserver(()=>{n()&&w(n(),r())});return T.observe(h(o)),()=>{T.disconnect(),f&&cancelAnimationFrame(f),l&&l.stop()}}),Fu(()=>{f&&cancelAnimationFrame(f),l&&l.stop()});function w(T,E){if(!h(u))return;h(u).selectAll("*").remove(),Y(_,null);const R=h(o).clientWidth,z=h(o).clientHeight;h(u).attr("viewBox",[0,0,R,z]);const N=h(u).append("g").attr("class","graph-container-g");N.attr("transform",c),y(N,40),N.append("rect").attr("class","grid-bg").attr("x",-5e3).attr("y",-5e3).attr("width",1e4).attr("height",1e4).attr("fill","url(#grid)").on("touchstart",()=>{he(Hn).fromTouch&&(Zu(),N.selectAll(".link").classed("active",!1))});const $=mp().scaleExtent([.3,3]).on("start",P=>{P.sourceEvent&&(v=!0,g={x:c.x,y:c.y})}).on("zoom",P=>{P.sourceEvent&&g&&(m.x=m.x*.6+(P.transform.x-g.x)*.4,m.y=m.y*.6+(P.transform.y-g.y)*.4,g={x:P.transform.x,y:P.transform.y}),c=P.transform,N.attr("transform",P.transform),he(Hn).fromTouch||Vi(),l&&(Math.abs(m.x)>.5||Math.abs(m.y)>.5)&&l.alpha(.15).restart()}).on("end",()=>{v=!1,g=null});if(h(u).call($),h(u).call($.transform,c),D(h(u),$,R,z,E),!T||T.nodes.length===0){k(N,R,z);return}S(N);const B=T.nodes.filter(P=>E.has(P.type)),J=new Set(B.map(P=>P.id)),Q=B.map(P=>{const le=d.get(P.id);return{...P,radius:P.isCenter?28:20,x:le?le.x:R/2+(Math.random()-.5)*100,y:le?le.y:z/2+(Math.random()-.5)*100}}),ot=new Map(Q.map(P=>[P.id,P])),ut=T.edges.filter(P=>J.has(P.from)&&J.has(P.to)).map(P=>({...P,source:ot.get(P.from),target:ot.get(P.to)})).filter(P=>P.source&&P.target);p=Q;const pt=Q.filter(P=>P.isCenter),mt=pt.length>1;l=jd(Q).force("link",Bd(ut).id(P=>P.id).distance(140)).force("charge",Jd().strength(-300)).force("center",$d(R/2,z/2)).force("x",tp(R/2).strength(.04)).force("y",ep(z/2).strength(.04)).force("collision",Xd().radius(P=>P.radius+8)).alphaDecay(.02).velocityDecay(.3),l.force("panInertia",()=>{Q.forEach(P=>{P.vx-=m.x*2.5,P.vy-=m.y*2.5}),m.x*=.92,m.y*=.92,Math.abs(m.x)<.01&&(m.x=0),Math.abs(m.y)<.01&&(m.y=0)}),mt&&it(l,pt);let Oe=null;mt&&(Oe=N.append("path").attr("class","team-hull").attr("fill","rgba(0, 112, 243, 0.08)").attr("stroke","rgba(0, 112, 243, 0.25)").attr("stroke-width",2).attr("stroke-dasharray","8,4"));const Gn=N.append("g"),{link:$n,linkOverlay:Zn}=F(Gn,ut),Dt=N.append("defs");Q.forEach(P=>{Dt.append("clipPath").attr("id",`clip-${P.id.replace(/[^a-zA-Z0-9]/g,"_")}`).append("circle").attr("r",P.radius-2)});const me=I(N,Q,l,T);Y(_,me),C(he(hi)),l.on("tick",()=>{Q.forEach(P=>d.set(P.id,{x:P.x,y:P.y})),Oe&&pt.length>=2&&x(Oe,pt),Zn.attr("x1",P=>P.source.x).attr("y1",P=>P.source.y).attr("x2",P=>P.target.x).attr("y2",P=>P.target.y),$n.attr("x1",P=>P.source.x).attr("y1",P=>P.source.y).attr("x2",P=>P.target.x).attr("y2",P=>P.target.y),me.attr("transform",P=>`translate(${P.x},${P.y})`)})}function C(T){if(!h(_))return;const E=T&&T.size>0;h(_).classed("highlight",R=>E&&T.has(R.id)).classed("dimmed",R=>E&&!T.has(R.id)&&!R.isCenter),E&&h(_).filter(R=>T.has(R.id)).raise()}function y(T,E){const z=T.append("defs").append("pattern").attr("id","grid").attr("width",E).attr("height",E).attr("patternUnits","userSpaceOnUse");z.append("rect").attr("width",E).attr("height",E).attr("fill","#0a0a0a"),z.append("line").attr("x1",E).attr("y1",0).attr("x2",E).attr("y2",E).attr("stroke","#1a1a1a").attr("stroke-width",1),z.append("line").attr("x1",0).attr("y1",E).attr("x2",E).attr("y2",E).attr("stroke","#1a1a1a").attr("stroke-width",1)}function S(T){const E=T.append("defs");[{id:"equipped",color:"#f5a623"},{id:"cooccur",color:"#666666"},{id:"positive",color:"#00d9a5"},{id:"negative",color:"#ff4444"}].forEach(({id:z,color:N})=>{E.append("marker").attr("id",`arrow-${z}`).attr("viewBox","0 -5 10 10").attr("refX",28).attr("refY",0).attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("fill",N).attr("d","M0,-5L10,0L0,5")})}function F(T,E,R){const z=T.selectAll(".link-visible").data(E).join("line").attr("class",$=>{const B=["link",$.type];return $.delta!==void 0&&B.push($.delta<=0?"positive":"negative"),B.join(" ")}).attr("stroke-width",$=>$.delta!==void 0?Math.max(2,Math.min(6,Math.abs($.delta)*5)):$.type==="equipped"?3:1.5).attr("marker-end",$=>$.delta!==void 0?`url(#arrow-${$.delta<=0?"positive":"negative"})`:`url(#arrow-${$.type})`),N=T.selectAll(".link-overlay").data(E).join("line").attr("class","link-overlay").on("mouseover",($,B)=>{z.filter(J=>J===B).classed("active",!0),tt($,B)}).on("mouseout",($,B)=>{z.filter(J=>J===B).classed("active",!1),Vi()}).on("touchstart",function($,B){$.preventDefault(),$.stopPropagation(),z.classed("active",!1),z.filter(J=>J===B).classed("active",!0),tt($,B,!0)},{passive:!1});return{link:z,linkOverlay:N}}function I(T,E,R,z){const N=T.append("g").selectAll("g").data(E).join("g").attr("class",$=>`node ${$.type} ${$.isCenter?"center":""}`).call(O(R)).on("click",($,B)=>j($,B,z)).on("mouseover",($,B)=>V($,B)).on("mouseout",Vi).on("touchstart",function($,B){$.preventDefault(),$.stopPropagation(),V($,B,!0)},{passive:!1});return N.append("circle").attr("class","node-bg").attr("r",$=>$.radius),N.append("circle").attr("class","node-ring").attr("r",$=>$.radius),N.each(function($){if(an($.type,$.label))St(this).append("circle").attr("class","node-fallback").attr("r",$.radius-4);else{const B=Eo($.type,$.label);B&&St(this).append("image").attr("class","node-icon").attr("x",-($.radius-2)).attr("y",-($.radius-2)).attr("width",($.radius-2)*2).attr("height",($.radius-2)*2).attr("clip-path",`url(#clip-${$.id.replace(/[^a-zA-Z0-9]/g,"_")})`).attr("href",B).attr("preserveAspectRatio","xMidYMid slice").on("error",function(){Jr($.type,$.label),St(this).remove(),St(this.parentNode).append("circle").attr("class","node-fallback").attr("r",$.radius-4)})}}),N.append("text").attr("dy",$=>$.radius+16).text($=>Se($.type,$.label)),N}function O(T){return Fh().on("start",(E,R)=>{E.active||T.alphaTarget(.3).restart(),R.fx=R.x,R.fy=R.y}).on("drag",(E,R)=>{R.fx=E.x,R.fy=E.y}).on("end",(E,R)=>{E.active||T.alphaTarget(0),R.fx=null,R.fy=null})}function j(T,E,R){T.stopPropagation();const z=R.edges.find(N=>(N.from===E.id||N.to===E.id)&&!E.isCenter);z?vi(z.token):E.isCenter||vi(E.id)}function V(T,E,R=!1){const{x:z,y:N}=ct(T);ia(z,N,{type:"node",title:Se(E.type,E.label),nodeType:E.type,isCenter:E.isCenter},R)}function tt(T,E,R=!1){const{x:z,y:N}=ct(T);let $=E.token.slice(2);if(E.token.startsWith("E:")){const[B,J]=E.token.slice(2).split("|");$=`${Se("unit",B)} → ${Se("item",J)}`}ia(z,N,{type:"edge",title:$,delta:E.delta,avgWith:E.avg_with,avgBase:E.avg_base,nWith:E.n_with,nBase:E.n_base},R)}function ct(T){let E,R;return T.touches?.length>0?(E=T.touches[0].pageX,R=T.touches[0].pageY):T.changedTouches?.length>0?(E=T.changedTouches[0].pageX,R=T.changedTouches[0].pageY):(E=T.pageX,R=T.pageY),{x:E+12,y:R+12}}function it(T,E){T.force("centerCluster",()=>{let z=0,N=0;E.forEach($=>{z+=$.x||0,N+=$.y||0}),z/=E.length,N/=E.length,E.forEach($=>{$.vx+=(z-$.x)*.03,$.vy+=(N-$.y)*.03});for(let $=0;$<E.length;$++)for(let B=$+1;B<E.length;B++){const J=E[$],Q=E[B],ot=Q.x-J.x,ut=Q.y-J.y,pt=Math.sqrt(ot*ot+ut*ut)||1;if(pt<120){const mt=(120-pt)*.5/pt;J.vx-=ot*mt,J.vy-=ut*mt,Q.vx+=ot*mt,Q.vy+=ut*mt}}})}function x(T,E){const z=E.map(N=>[N.x,N.y]);if(E.length===2){const[N,$]=z,B=$[0]-N[0],J=$[1]-N[1],Q=Math.sqrt(B*B+J*J),ot=-J/Q*45,ut=B/Q*45;T.attr("d",`
                M ${N[0]+ot} ${N[1]+ut}
                L ${$[0]+ot} ${$[1]+ut}
                A 45 45 0 0 1 ${$[0]-ot} ${$[1]-ut}
                L ${N[0]-ot} ${N[1]-ut}
                A 45 45 0 0 1 ${N[0]+ot} ${N[1]+ut} Z
            `)}else{const N=ip(z);if(N){const $=oa(N,Q=>Q[0]),B=oa(N,Q=>Q[1]),J=N.map(Q=>{const ot=Q[0]-$,ut=Q[1]-B,pt=Math.sqrt(ot*ot+ut*ut),mt=(pt+45)/pt;return[$+ot*mt,B+ut*mt]});T.attr("d",cp().curve(fp.tension(.7))(J))}}}function D(T,E,R,z,N){f&&cancelAnimationFrame(f);const $=.02,B=.85;function J(){if(f=requestAnimationFrame(J),v||!p.length)return;let Q=1/0,ot=-1/0,ut=1/0,pt=-1/0;if(p.forEach(Jt=>{N.has(Jt.type)&&(Jt.x<Q&&(Q=Jt.x),Jt.x>ot&&(ot=Jt.x),Jt.y<ut&&(ut=Jt.y),Jt.y>pt&&(pt=Jt.y))}),Q===1/0)return;const mt=60;Q-=mt,ot+=mt,ut-=mt,pt+=mt;const Oe=ot-Q,Gn=pt-ut,$n=(Q+ot)/2,Zn=(ut+pt)/2,{k:Dt,x:me,y:P}=c,le=-me/Dt,Cr=-P/Dt,Ci=R/Dt,Ir=z/Dt,Pr=Math.max(0,Math.min(ot,le+Ci)-Math.max(Q,le)),Ii=Math.max(0,Math.min(pt,Cr+Ir)-Math.max(ut,Cr)),Rr=Pr<=0||Ii<=0,Qn=R*B/Math.max(Oe,100),jn=z*B/Math.max(Gn,100);let tn=Math.max(.3,Math.min(2.5,Math.min(Qn,jn)));const Pi=Dt<=tn*1.1;if(!Rr&&!Pi)return;const Fr=R/2-$n*tn,Ri=z/2-Zn*tn,Dr=Dt+(tn-Dt)*$,Lr=me+(Fr-me)*$,Jn=P+(Ri-P)*$;(Math.abs(Dr-Dt)>1e-4||Math.abs(Lr-me)>.1||Math.abs(Jn-P)>.1)&&T.call(E.transform,xi.translate(Lr,Jn).scale(Dr))}J()}function k(T,E,R){T.append("foreignObject").attr("x",E/2-200).attr("y",R/2-60).attr("width",400).attr("height",120).append("xhtml:div").attr("class","empty-state").html(`
                <div class="empty-state-title">No data to display</div>
                <div class="empty-state-text">Search and select units, items, or traits to visualize relationships</div>
            `)}xt(()=>(h(u),n(),r()),()=>{h(u)&&n()&&w(n(),r())}),xt(()=>(h(_),i()),()=>{h(_)&&C(i())}),wn(),_e();var L=yp(),U=b(L),Z=b(U);Cu(Z,T=>Y(o,T),()=>h(o)),H(t,L),ae(),a()}var wp=W('<div class="legend svelte-1wfxrff"><div class="legend-group svelte-1wfxrff"><div class="legend-group-title svelte-1wfxrff">Node Types</div> <div class="legend-items svelte-1wfxrff"><button><div class="legend-dot unit svelte-1wfxrff"></div> <span>Unit</span></button> <button><div class="legend-dot item svelte-1wfxrff"></div> <span>Item</span></button> <button><div class="legend-dot trait svelte-1wfxrff"></div> <span>Trait</span></button></div></div> <div class="legend-group svelte-1wfxrff"><div class="legend-group-title svelte-1wfxrff">Placement Impact</div> <div class="legend-items svelte-1wfxrff"><div class="legend-item static svelte-1wfxrff"><div class="legend-line positive svelte-1wfxrff"></div> <span>Improves placement</span></div> <div class="legend-item static svelte-1wfxrff"><div class="legend-line negative svelte-1wfxrff"></div> <span>Worsens placement</span></div></div></div></div>');function bp(t,e){se(e,!1);const n=()=>jt(zi,"$activeTypes",r),[r,i]=Le(),s=at(),a=at(),o=at();xt(()=>n(),()=>{Y(s,!n().has("unit"))}),xt(()=>n(),()=>{Y(a,!n().has("item"))}),xt(()=>n(),()=>{Y(o,!n().has("trait"))}),wn(),_e();var u=wp(),l=b(u),c=M(b(l),2),d=b(c);let f;var v=M(d,2);let m;var g=M(v,2);let p;nt(()=>{f=yt(d,1,"legend-item svelte-1wfxrff",null,f,{disabled:h(s)}),m=yt(v,1,"legend-item svelte-1wfxrff",null,m,{disabled:h(a)}),p=yt(g,1,"legend-item svelte-1wfxrff",null,p,{disabled:h(o)})}),ht("click",d,()=>Pn("unit")),ht("click",v,()=>Pn("item")),ht("click",g,()=>Pn("trait")),H(t,u),ae(),i()}var $p=W('<div class="tooltip-title svelte-11extwn"> </div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">Type</span> <span class="value svelte-11extwn"> </span></div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">Action</span> <span class="value svelte-11extwn"> </span></div>',1),Ep=W('<div class="tooltip-title svelte-11extwn"> </div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">Placement Impact</span> <span> </span></div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">With this combo</span> <span class="value svelte-11extwn"> </span></div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">Base average</span> <span class="value svelte-11extwn"> </span></div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">Sample size</span> <span class="value svelte-11extwn"> </span></div>',1),kp=W('<div class="tooltip svelte-11extwn"><!></div>');function Tp(t,e){se(e,!1);const n=()=>jt(Hn,"$tooltip",r),[r,i]=Le(),s=at();xt(()=>n(),()=>{Y(s,`
        display: ${n().visible?"block":"none"};
        left: ${n().x}px;
        top: ${n().y}px;
    `)}),wn(),_e();var a=kp(),o=b(a);{var u=l=>{var c=ci(),d=Ne(c);{var f=m=>{var g=$p(),p=Ne(g),_=b(p),w=M(p,2),C=M(b(w),2),y=b(C),S=M(w,2),F=M(b(S),2),I=b(F);nt(()=>{G(_,(n(),A(()=>n().content.title))),G(y,(n(),A(()=>n().content.nodeType))),G(I,(n(),A(()=>n().content.isCenter?"Center node":"Click to add filter")))}),H(m,g)},v=m=>{var g=ci(),p=Ne(g);{var _=w=>{var C=Ep(),y=Ne(C),S=b(y),F=M(y,2),I=M(b(F),2);let O;var j=b(I),V=M(F,2),tt=M(b(V),2),ct=b(tt),it=M(V,2),x=M(b(it),2),D=b(x),k=M(it,2),L=M(b(k),2),U=b(L);nt((Z,T,E,R,z)=>{G(S,(n(),A(()=>n().content.title))),O=yt(I,1,"value impact svelte-11extwn",null,O,{positive:n().content.delta<=0,negative:n().content.delta>0}),G(j,`${n(),A(()=>n().content.delta>0?"+":"")??""}${Z??""}`),G(ct,T),G(D,E),G(U,`${R??""} / ${z??""}`)},[()=>(n(),A(()=>n().content.delta.toFixed(2))),()=>(n(),A(()=>n().content.avgWith.toFixed(2))),()=>(n(),A(()=>n().content.avgBase.toFixed(2))),()=>(n(),A(()=>n().content.nWith.toLocaleString())),()=>(n(),A(()=>n().content.nBase.toLocaleString()))]),H(w,C)};vt(p,w=>{n(),A(()=>n().content.type==="edge")&&w(_)},!0)}H(m,g)};vt(d,m=>{n(),A(()=>n().content.type==="node")?m(f):m(v,!1)})}H(l,c)};vt(o,l=>{n(),A(()=>n().content)&&l(u)})}nt(()=>In(a,h(s))),H(t,a),ae(),i()}var Mp=W('<div class="container svelte-1n46o8q"><!> <div class="control-panel svelte-1n46o8q"><div class="control-panel-top svelte-1n46o8q"><!> <!> <!></div> <div class="control-panel-bottom svelte-1n46o8q"><!> <!></div></div> <!> <!> <!></div> <!>',1);function zp(t,e){se(e,!1);const n=()=>jt(bn,"$selectedTokens",i),r=()=>jt(is,"$topK",i),[i,s]=Le();let a=at(!1);async function o(I,O){try{const j=await Bu(I,O);As.set(j)}catch(j){console.error("Failed to fetch graph:",j)}}Ms(async()=>{await ju(),Y(a,!0),await o(n(),r())}),xt(()=>(h(a),n(),r()),()=>{h(a)&&o(n(),r())}),wn(),_e();var u=Mp(),l=Ne(u),c=b(l);Xu(c);var d=M(c,2),f=b(d),v=b(f);ic(v,{});var m=M(v,2);ac(m,{});var g=M(m,2);lc(g,{});var p=M(f,2),_=b(p);dc(_,{});var w=M(_,2);_c(w,{$$events:{change:()=>o(n(),r())}});var C=M(d,2);Wc(C,{});var y=M(C,2);xp(y,{});var S=M(y,2);bp(S,{});var F=M(l,2);Tp(F,{}),H(t,u),ae(),s()}gu(zp,{target:document.getElementById("app")});
