(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const Qi=!1;var $i=Array.isArray,hl=Array.prototype.indexOf,Ei=Array.from,Sa=Object.defineProperty,pr=Object.getOwnPropertyDescriptor,Ca=Object.getOwnPropertyDescriptors,vl=Object.prototype,dl=Array.prototype,gs=Object.getPrototypeOf,Xs=Object.isExtensible;const Ge=()=>{};function pl(t){return t()}function ai(t){for(var e=0;e<t.length;e++)t[e]()}function Ia(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}const Et=2,ms=4,ki=8,_l=1<<24,De=16,Le=32,xn=64,Ti=128,se=512,bt=1024,Ft=2048,ae=4096,Yt=8192,Ze=16384,ys=32768,On=65536,Ys=1<<17,Pa=1<<18,Un=1<<19,Ra=1<<20,Ne=1<<25,pn=32768,ji=1<<21,xs=1<<22,Qe=1<<23,je=Symbol("$state"),Pn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ws(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function gl(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ml(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function yl(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function xl(t){throw new Error("https://svelte.dev/e/effect_orphan")}function wl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function bl(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function $l(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function El(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function kl(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Tl=1,Ml=2,Fa=4,zl=8,Al=16,Nl=1,Sl=2,kt=Symbol(),Cl="http://www.w3.org/1999/xhtml";function Il(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Pl(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Da(t){return t===this.v}function La(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Oa(t){return!La(t,this.v)}let Mr=!1,Rl=!1;function Fl(){Mr=!0}let ht=null;function qn(t){ht=t}function oe(t,e=!1,n){ht={p:ht,i:!1,c:null,e:null,s:t,x:null,l:Mr&&!e?{s:null,u:null,$:[]}:null}}function le(t){var e=ht,n=e.e;if(n!==null){e.e=null;for(var r of n)no(r)}return e.i=!0,ht=e.p,{}}function zr(){return!Mr||ht!==null&&ht.l===null}let ln=[];function qa(){var t=ln;ln=[],ai(t)}function Wn(t){if(ln.length===0&&!gr){var e=ln;queueMicrotask(()=>{e===ln&&qa()})}ln.push(t)}function Dl(){for(;ln.length>0;)qa()}function Ha(t){var e=lt;if(e===null)return nt.f|=Qe,t;if((e.f&ys)===0){if((e.f&Ti)===0)throw t;e.b.error(t)}else Hn(t,e)}function Hn(t,e){for(;e!==null;){if((e.f&Ti)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t}const Kr=new Set;let it=null,_r=null,Jt=null,Qt=[],Mi=null,Ji=!1,gr=!1;class he{committed=!1;current=new Map;previous=new Map;#t=new Set;#e=new Set;#r=0;#n=0;#l=null;#s=new Set;#i=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){Qt=[],_r=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const r of e)this.#a(r,n);this.is_fork||this.#c(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects)):(_r=this,it=null,Bs(n.render_effects),Bs(n.effects),_r=null,this.#l?.resolve()),Jt=null}#a(e,n){e.f^=bt;for(var r=e.first;r!==null;){var i=r.f,s=(i&(Le|xn))!==0,a=s&&(i&bt)!==0,o=a||(i&Yt)!==0||this.skipped_effects.has(r);if((r.f&Ti)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[]}),!o&&r.fn!==null){s?r.f^=bt:(i&ms)!==0?n.effects.push(r):Zn(r)&&((r.f&De)!==0&&this.#s.add(r),Xn(r));var u=r.first;if(u!==null){r=u;continue}}var l=r.parent;for(r=r.next;r===null&&l!==null;)l===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),n=n.parent),r=l.next,l=l.parent}}#o(e){for(const n of e)(n.f&Ft)!==0?this.#s.add(n):(n.f&ae)!==0&&this.#i.add(n),this.#u(n.deps),$t(n,bt)}#u(e){if(e!==null)for(const n of e)(n.f&Et)===0||(n.f&pn)===0||(n.f^=pn,this.#u(n.deps))}capture(e,n){this.previous.has(e)||this.previous.set(e,n),(e.f&Qe)===0&&(this.current.set(e,e.v),Jt?.set(e,e.v))}activate(){it=this,this.apply()}deactivate(){it===this&&(it=null,Jt=null)}flush(){if(this.activate(),Qt.length>0){if(Xa(),it!==null&&it!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#e)e(this);this.#e.clear()}#c(){if(this.#n===0){for(const e of this.#t)e();this.#t.clear()}this.#r===0&&this.#f()}#f(){if(Kr.size>1){this.previous.clear();var e=Jt,n=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const s of Kr){if(s===this){n=!1;continue}const a=[];for(const[u,l]of this.current){if(s.current.has(u))if(n&&l!==s.current.get(u))s.current.set(u,l);else continue;a.push(u)}if(a.length===0)continue;const o=[...s.current.keys()].filter(u=>!this.current.has(u));if(o.length>0){var i=Qt;Qt=[];const u=new Set,l=new Map;for(const c of a)Ya(c,o,u,l);if(Qt.length>0){it=s,s.apply();for(const c of Qt)s.#a(c,r);s.deactivate()}Qt=i}}it=null,Jt=e}this.committed=!0,Kr.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#s)this.#i.delete(e),$t(e,Ft),_n(e);for(const e of this.#i)$t(e,ae),_n(e);this.flush()}oncommit(e){this.#t.add(e)}ondiscard(e){this.#e.add(e)}settled(){return(this.#l??=Ia()).promise}static ensure(){if(it===null){const e=it=new he;Kr.add(it),gr||he.enqueue(()=>{it===e&&e.flush()})}return it}static enqueue(e){Wn(e)}apply(){}}function Ll(t){var e=gr;gr=!0;try{for(var n;;){if(Dl(),Qt.length===0&&(it?.flush(),Qt.length===0))return Mi=null,n;Xa()}}finally{gr=e}}function Xa(){var t=hn;Ji=!0;var e=null;try{var n=0;for(ui(!0);Qt.length>0;){var r=he.ensure();if(n++>1e3){var i,s;Ol()}r.process(Qt),Je.clear()}}finally{Ji=!1,ui(t),Mi=null}}function Ol(){try{wl()}catch(t){Hn(t,Mi)}}let Te=null;function Bs(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(Ze|Yt))===0&&Zn(r)&&(Te=new Set,Xn(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?ao(r):r.fn=null),Te?.size>0)){Je.clear();for(const i of Te){if((i.f&(Ze|Yt))!==0)continue;const s=[i];let a=i.parent;for(;a!==null;)Te.has(a)&&(Te.delete(a),s.push(a)),a=a.parent;for(let o=s.length-1;o>=0;o--){const u=s[o];(u.f&(Ze|Yt))===0&&Xn(u)}}Te.clear()}}Te=null}}function Ya(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const i of t.reactions){const s=i.f;(s&Et)!==0?Ya(i,e,n,r):(s&(xs|De))!==0&&(s&Ft)===0&&Ba(i,e,r)&&($t(i,Ft),_n(i))}}function Ba(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const i of t.deps){if(e.includes(i))return!0;if((i.f&Et)!==0&&Ba(i,e,n))return n.set(i,!0),!0}return n.set(t,!1),!1}function _n(t){for(var e=Mi=t;e.parent!==null;){e=e.parent;var n=e.f;if(Ji&&e===lt&&(n&De)!==0&&(n&Pa)===0)return;if((n&(xn|Le))!==0){if((n&bt)===0)return;e.f^=bt}}Qt.push(e)}function ql(t){let e=0,n=gn(0),r;return()=>{xr()&&(h(n),Kn(()=>(e===0&&(r=z(()=>t(()=>mr(n)))),e+=1,()=>{Wn(()=>{e-=1,e===0&&(r?.(),r=void 0,mr(n))})})))}}var Hl=On|Un|Ti;function Xl(t,e,n){new Yl(t,e,n)}class Yl{parent;#t=!1;#e;#r=null;#n;#l;#s;#i=null;#a=null;#o=null;#u=null;#c=null;#f=0;#h=0;#d=!1;#v=null;#y=ql(()=>(this.#v=gn(this.#f),()=>{this.#v=null}));constructor(e,n,r){this.#e=e,this.#n=n,this.#l=r,this.parent=lt.b,this.#t=!!this.#n.pending,this.#s=ks(()=>{lt.b=this;{var i=this.#g();try{this.#i=jt(()=>r(i))}catch(s){this.error(s)}this.#h>0?this.#_():this.#t=!1}return()=>{this.#c?.remove()}},Hl)}#x(){try{this.#i=jt(()=>this.#l(this.#e))}catch(e){this.error(e)}this.#t=!1}#w(){const e=this.#n.pending;e&&(this.#a=jt(()=>e(this.#e)),he.enqueue(()=>{var n=this.#g();this.#i=this.#p(()=>(he.ensure(),jt(()=>this.#l(n)))),this.#h>0?this.#_():(fn(this.#a,()=>{this.#a=null}),this.#t=!1)}))}#g(){var e=this.#e;return this.#t&&(this.#c=Pe(),this.#e.before(this.#c),e=this.#c),e}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(e){var n=lt,r=nt,i=ht;_e(this.#s),It(this.#s),qn(this.#s.ctx);try{return e()}catch(s){return Ha(s),null}finally{_e(n),It(r),qn(i)}}#_(){const e=this.#n.pending;this.#i!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#c),uo(this.#i,this.#u)),this.#a===null&&(this.#a=jt(()=>e(this.#e)))}#m(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(e);return}this.#h+=e,this.#h===0&&(this.#t=!1,this.#a&&fn(this.#a,()=>{this.#a=null}),this.#u&&(this.#e.before(this.#u),this.#u=null))}update_pending_count(e){this.#m(e),this.#f+=e,this.#v&&mn(this.#v,this.#f)}get_effect_pending(){return this.#y(),h(this.#v)}error(e){var n=this.#n.onerror;let r=this.#n.failed;if(this.#d||!n&&!r)throw e;this.#i&&(Rt(this.#i),this.#i=null),this.#a&&(Rt(this.#a),this.#a=null),this.#o&&(Rt(this.#o),this.#o=null);var i=!1,s=!1;const a=()=>{if(i){Pl();return}i=!0,s&&kl(),he.ensure(),this.#f=0,this.#o!==null&&fn(this.#o,()=>{this.#o=null}),this.#t=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#d=!1,jt(()=>this.#l(this.#e)))),this.#h>0?this.#_():this.#t=!1};var o=nt;try{It(null),s=!0,n?.(e,a),s=!1}catch(u){Hn(u,this.#s&&this.#s.parent)}finally{It(o)}r&&Wn(()=>{this.#o=this.#p(()=>{he.ensure(),this.#d=!0;try{return jt(()=>{r(this.#e,()=>e,()=>a)})}catch(u){return Hn(u,this.#s.parent),null}finally{this.#d=!1}})})}}function Bl(t,e,n,r){const i=zr()?bs:Va;if(n.length===0&&t.length===0){r(e.map(i));return}var s=it,a=lt,o=Vl();function u(){Promise.all(n.map(l=>Ul(l))).then(l=>{o();try{r([...e.map(i),...l])}catch(c){(a.f&Ze)===0&&Hn(c,a)}s?.deactivate(),oi()}).catch(l=>{Hn(l,a)})}t.length>0?Promise.all(t).then(()=>{o();try{return u()}finally{s?.deactivate(),oi()}}):u()}function Vl(){var t=lt,e=nt,n=ht,r=it;return function(s=!0){_e(t),It(e),qn(n),s&&r?.activate()}}function oi(){_e(null),It(null),qn(null)}function bs(t){var e=Et|Ft,n=nt!==null&&(nt.f&Et)!==0?nt:null;return lt!==null&&(lt.f|=Un),{ctx:ht,deps:null,effects:null,equals:Da,f:e,fn:t,reactions:null,rv:0,v:kt,wv:0,parent:n??lt,ac:null}}function Ul(t,e){let n=lt;n===null&&gl();var r=n.b,i=void 0,s=gn(kt),a=!nt,o=new Map;return nu(()=>{var u=Ia();i=u.promise;try{Promise.resolve(t()).then(u.resolve,u.reject).then(()=>{l===it&&l.committed&&l.deactivate(),oi()})}catch(f){u.reject(f),oi()}var l=it;if(a){var c=!r.is_pending();r.update_pending_count(1),l.increment(c),o.get(l)?.reject(Pn),o.delete(l),o.set(l,u)}const d=(f,v=void 0)=>{if(l.activate(),v)v!==Pn&&(s.f|=Qe,mn(s,v));else{(s.f&Qe)!==0&&(s.f^=Qe),mn(s,f);for(const[m,g]of o){if(o.delete(m),m===l)break;g.reject(Pn)}}a&&(r.update_pending_count(-1),l.decrement(c))};u.promise.then(d,f=>d(null,f||"unknown"))}),Ai(()=>{for(const u of o.values())u.reject(Pn)}),new Promise(u=>{function l(c){function d(){c===i?u(s):l(i)}c.then(d,d)}l(i)})}function Va(t){const e=bs(t);return e.equals=Oa,e}function Ua(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)Rt(e[n])}}function Wl(t){for(var e=t.parent;e!==null;){if((e.f&Et)===0)return(e.f&Ze)===0?e:null;e=e.parent}return null}function $s(t){var e,n=lt;_e(Wl(t));try{t.f&=~pn,Ua(t),e=vo(t)}finally{_e(n)}return e}function Wa(t){var e=$s(t);if(t.equals(e)||(it?.is_fork||(t.v=e),t.wv=fo()),!Gn)if(Jt!==null)(xr()||it?.is_fork)&&Jt.set(t,e);else{var n=(t.f&se)===0?ae:bt;$t(t,n)}}let ts=new Set;const Je=new Map;let Ka=!1;function gn(t,e){var n={f:0,v:t,reactions:null,equals:Da,rv:0,wv:0};return n}function Ve(t,e){const n=gn(t);return ou(n),n}function ot(t,e=!1,n=!0){const r=gn(t);return e||(r.equals=Oa),Mr&&n&&ht!==null&&ht.l!==null&&(ht.l.s??=[]).push(r),r}function Gr(t,e){return B(t,z(()=>h(t))),e}function B(t,e,n=!1){nt!==null&&(!ve||(nt.f&Ys)!==0)&&zr()&&(nt.f&(Et|De|xs|Ys))!==0&&!Re?.includes(t)&&El();let r=n?cr(e):e;return mn(t,r)}function mn(t,e){if(!t.equals(e)){var n=t.v;Gn?Je.set(t,e):Je.set(t,n),t.v=e;var r=he.ensure();r.capture(t,n),(t.f&Et)!==0&&((t.f&Ft)!==0&&$s(t),$t(t,(t.f&se)!==0?bt:ae)),t.wv=fo(),Ga(t,Ft),zr()&&lt!==null&&(lt.f&bt)!==0&&(lt.f&(Le|xn))===0&&(Zt===null?lu([t]):Zt.push(t)),!r.is_fork&&ts.size>0&&!Ka&&Kl()}return e}function Kl(){Ka=!1;var t=hn;ui(!0);const e=Array.from(ts);try{for(const n of e)(n.f&bt)!==0&&$t(n,ae),Zn(n)&&Xn(n)}finally{ui(t)}ts.clear()}function mr(t){B(t,t.v+1)}function Ga(t,e){var n=t.reactions;if(n!==null)for(var r=zr(),i=n.length,s=0;s<i;s++){var a=n[s],o=a.f;if(!(!r&&a===lt)){var u=(o&Ft)===0;if(u&&$t(a,e),(o&Et)!==0){var l=a;Jt?.delete(l),(o&pn)===0&&(o&se&&(a.f|=pn),Ga(l,ae))}else u&&((o&De)!==0&&Te!==null&&Te.add(a),_n(a))}}}function cr(t){if(typeof t!="object"||t===null||je in t)return t;const e=gs(t);if(e!==vl&&e!==dl)return t;var n=new Map,r=$i(t),i=Ve(0),s=vn,a=o=>{if(vn===s)return o();var u=nt,l=vn;It(null),Gs(s);var c=o();return It(u),Gs(l),c};return r&&n.set("length",Ve(t.length)),new Proxy(t,{defineProperty(o,u,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&bl();var c=n.get(u);return c===void 0?c=a(()=>{var d=Ve(l.value);return n.set(u,d),d}):B(c,l.value,!0),!0},deleteProperty(o,u){var l=n.get(u);if(l===void 0){if(u in o){const c=a(()=>Ve(kt));n.set(u,c),mr(i)}}else B(l,kt),mr(i);return!0},get(o,u,l){if(u===je)return t;var c=n.get(u),d=u in o;if(c===void 0&&(!d||pr(o,u)?.writable)&&(c=a(()=>{var v=cr(d?o[u]:kt),m=Ve(v);return m}),n.set(u,c)),c!==void 0){var f=h(c);return f===kt?void 0:f}return Reflect.get(o,u,l)},getOwnPropertyDescriptor(o,u){var l=Reflect.getOwnPropertyDescriptor(o,u);if(l&&"value"in l){var c=n.get(u);c&&(l.value=h(c))}else if(l===void 0){var d=n.get(u),f=d?.v;if(d!==void 0&&f!==kt)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return l},has(o,u){if(u===je)return!0;var l=n.get(u),c=l!==void 0&&l.v!==kt||Reflect.has(o,u);if(l!==void 0||lt!==null&&(!c||pr(o,u)?.writable)){l===void 0&&(l=a(()=>{var f=c?cr(o[u]):kt,v=Ve(f);return v}),n.set(u,l));var d=h(l);if(d===kt)return!1}return c},set(o,u,l,c){var d=n.get(u),f=u in o;if(r&&u==="length")for(var v=l;v<d.v;v+=1){var m=n.get(v+"");m!==void 0?B(m,kt):v in o&&(m=a(()=>Ve(kt)),n.set(v+"",m))}if(d===void 0)(!f||pr(o,u)?.writable)&&(d=a(()=>Ve(void 0)),B(d,cr(l)),n.set(u,d));else{f=d.v!==kt;var g=a(()=>cr(l));B(d,g)}var p=Reflect.getOwnPropertyDescriptor(o,u);if(p?.set&&p.set.call(c,l),!f){if(r&&typeof u=="string"){var _=n.get("length"),w=Number(u);Number.isInteger(w)&&w>=_.v&&B(_,w+1)}mr(i)}return!0},ownKeys(o){h(i);var u=Reflect.ownKeys(o).filter(d=>{var f=n.get(d);return f===void 0||f.v!==kt});for(var[l,c]of n)c.v!==kt&&!(l in o)&&u.push(l);return u},setPrototypeOf(){$l()}})}function Vs(t){try{if(t!==null&&typeof t=="object"&&je in t)return t[je]}catch{}return t}function Gl(t,e){return Object.is(Vs(t),Vs(e))}var Us,Za,Qa,ja,Ja;function Zl(){if(Us===void 0){Us=window,Za=document,Qa=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;ja=pr(e,"firstChild").get,Ja=pr(e,"nextSibling").get,Xs(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Xs(n)&&(n.__t=void 0)}}function Pe(t=""){return document.createTextNode(t)}function li(t){return ja.call(t)}function Ar(t){return Ja.call(t)}function b(t,e){return li(t)}function Se(t,e=!1){{var n=li(t);return n instanceof Comment&&n.data===""?Ar(n):n}}function M(t,e=1,n=!1){let r=t;for(;e--;)r=Ar(r);return r}function Ql(t){t.textContent=""}function to(){return!1}let Ws=!1;function jl(){Ws||(Ws=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function zi(t){var e=nt,n=lt;It(null),_e(null);try{return t()}finally{It(e),_e(n)}}function Es(t,e,n,r=n){t.addEventListener(e,()=>zi(n));const i=t.__on_r;i?t.__on_r=()=>{i(),r(!0)}:t.__on_r=()=>r(!0),jl()}function eo(t){lt===null&&(nt===null&&xl(),yl()),Gn&&ml()}function Jl(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function ge(t,e,n){var r=lt;r!==null&&(r.f&Yt)!==0&&(t|=Yt);var i={ctx:ht,deps:null,nodes:null,f:t|Ft|se,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{Xn(i),i.f|=ys}catch(o){throw Rt(i),o}else e!==null&&_n(i);var s=i;if(n&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&Un)===0&&(s=s.first,(t&De)!==0&&(t&On)!==0&&s!==null&&(s.f|=On)),s!==null&&(s.parent=r,r!==null&&Jl(s,r),nt!==null&&(nt.f&Et)!==0&&(t&xn)===0)){var a=nt;(a.effects??=[]).push(s)}return i}function xr(){return nt!==null&&!ve}function Ai(t){const e=ge(ki,null,!1);return $t(e,bt),e.teardown=t,e}function es(t){eo();var e=lt.f,n=!nt&&(e&Le)!==0&&(e&ys)===0;if(n){var r=ht;(r.e??=[]).push(t)}else return no(t)}function no(t){return ge(ms|Ra,t,!1)}function tu(t){return eo(),ge(ki|Ra,t,!0)}function eu(t){he.ensure();const e=ge(xn|Un,t,!0);return(n={})=>new Promise(r=>{n.outro?fn(e,()=>{Rt(e),r(void 0)}):(Rt(e),r(void 0))})}function ro(t){return ge(ms,t,!1)}function wt(t,e){var n=ht,r={effect:null,ran:!1,deps:t};n.l.$.push(r),r.effect=Kn(()=>{t(),!r.ran&&(r.ran=!0,z(e))})}function wn(){var t=ht;Kn(()=>{for(var e of t.l.$){e.deps();var n=e.effect;(n.f&bt)!==0&&$t(n,ae),Zn(n)&&Xn(n),e.ran=!1}})}function nu(t){return ge(xs|Un,t,!0)}function Kn(t,e=0){return ge(ki|e,t,!0)}function rt(t,e=[],n=[],r=[]){Bl(r,e,n,i=>{ge(ki,()=>t(...i.map(h)),!0)})}function ks(t,e=0){var n=ge(De|e,t,!0);return n}function jt(t){return ge(Le|Un,t,!0)}function io(t){var e=t.teardown;if(e!==null){const n=Gn,r=nt;Ks(!0),It(null);try{e.call(null)}finally{Ks(n),It(r)}}}function so(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const i=n.ac;i!==null&&zi(()=>{i.abort(Pn)});var r=n.next;(n.f&xn)!==0?n.parent=null:Rt(n,e),n=r}}function ru(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Le)===0&&Rt(e),e=n}}function Rt(t,e=!0){var n=!1;(e||(t.f&Pa)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(iu(t.nodes.start,t.nodes.end),n=!0),so(t,e&&!n),ci(t,0),$t(t,Ze);var r=t.nodes&&t.nodes.t;if(r!==null)for(const s of r)s.stop();io(t);var i=t.parent;i!==null&&i.first!==null&&ao(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function iu(t,e){for(;t!==null;){var n=t===e?null:Ar(t);t.remove(),t=n}}function ao(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function fn(t,e,n=!0){var r=[];oo(t,r,!0);var i=()=>{n&&Rt(t),e&&e()},s=r.length;if(s>0){var a=()=>--s||i();for(var o of r)o.out(a)}else i()}function oo(t,e,n){if((t.f&Yt)===0){t.f^=Yt;var r=t.nodes&&t.nodes.t;if(r!==null)for(const o of r)(o.is_global||n)&&e.push(o);for(var i=t.first;i!==null;){var s=i.next,a=(i.f&On)!==0||(i.f&Le)!==0&&(t.f&De)!==0;oo(i,e,a?n:!1),i=s}}}function Ts(t){lo(t,!0)}function lo(t,e){if((t.f&Yt)!==0){t.f^=Yt,(t.f&bt)===0&&($t(t,Ft),_n(t));for(var n=t.first;n!==null;){var r=n.next,i=(n.f&On)!==0||(n.f&Le)!==0;lo(n,i?e:!1),n=r}var s=t.nodes&&t.nodes.t;if(s!==null)for(const a of s)(a.is_global||e)&&a.in()}}function uo(t,e){if(t.nodes)for(var n=t.nodes.start,r=t.nodes.end;n!==null;){var i=n===r?null:Ar(n);e.append(n),n=i}}let In=null;function su(t){var e=In;try{if(In=new Set,z(t),e!==null)for(var n of In)e.add(n);return In}finally{In=e}}function au(t){for(var e of su(t))mn(e,e.v)}let hn=!1;function ui(t){hn=t}let Gn=!1;function Ks(t){Gn=t}let nt=null,ve=!1;function It(t){nt=t}let lt=null;function _e(t){lt=t}let Re=null;function ou(t){nt!==null&&(Re===null?Re=[t]:Re.push(t))}let Tt=null,Xt=0,Zt=null;function lu(t){Zt=t}let co=1,wr=0,vn=wr;function Gs(t){vn=t}function fo(){return++co}function Zn(t){var e=t.f;if((e&Ft)!==0)return!0;if(e&Et&&(t.f&=~pn),(e&ae)!==0){var n=t.deps;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i];if(Zn(s)&&Wa(s),s.wv>t.wv)return!0}(e&se)!==0&&Jt===null&&$t(t,bt)}return!1}function ho(t,e,n=!0){var r=t.reactions;if(r!==null&&!Re?.includes(t))for(var i=0;i<r.length;i++){var s=r[i];(s.f&Et)!==0?ho(s,e,!1):e===s&&(n?$t(s,Ft):(s.f&bt)!==0&&$t(s,ae),_n(s))}}function vo(t){var e=Tt,n=Xt,r=Zt,i=nt,s=Re,a=ht,o=ve,u=vn,l=t.f;Tt=null,Xt=0,Zt=null,nt=(l&(Le|xn))===0?t:null,Re=null,qn(t.ctx),ve=!1,vn=++wr,t.ac!==null&&(zi(()=>{t.ac.abort(Pn)}),t.ac=null);try{t.f|=ji;var c=t.fn,d=c(),f=t.deps;if(Tt!==null){var v;if(ci(t,Xt),f!==null&&Xt>0)for(f.length=Xt+Tt.length,v=0;v<Tt.length;v++)f[Xt+v]=Tt[v];else t.deps=f=Tt;if(xr()&&(t.f&se)!==0)for(v=Xt;v<f.length;v++)(f[v].reactions??=[]).push(t)}else f!==null&&Xt<f.length&&(ci(t,Xt),f.length=Xt);if(zr()&&Zt!==null&&!ve&&f!==null&&(t.f&(Et|ae|Ft))===0)for(v=0;v<Zt.length;v++)ho(Zt[v],t);return i!==null&&i!==t&&(wr++,Zt!==null&&(r===null?r=Zt:r.push(...Zt))),(t.f&Qe)!==0&&(t.f^=Qe),d}catch(m){return Ha(m)}finally{t.f^=ji,Tt=e,Xt=n,Zt=r,nt=i,Re=s,qn(a),ve=o,vn=u}}function uu(t,e){let n=e.reactions;if(n!==null){var r=hl.call(n,t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(e.f&Et)!==0&&(Tt===null||!Tt.includes(e))&&($t(e,ae),(e.f&se)!==0&&(e.f^=se,e.f&=~pn),Ua(e),ci(e,0))}function ci(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)uu(t,n[r])}function Xn(t){var e=t.f;if((e&Ze)===0){$t(t,bt);var n=lt,r=hn;lt=t,hn=!0;try{(e&(De|_l))!==0?ru(t):so(t),io(t);var i=vo(t);t.teardown=typeof i=="function"?i:null,t.wv=co;var s;Qi&&Rl&&(t.f&Ft)!==0&&t.deps}finally{hn=r,lt=n}}}async function cu(){await Promise.resolve(),Ll()}function h(t){var e=t.f,n=(e&Et)!==0;if(In?.add(t),nt!==null&&!ve){var r=lt!==null&&(lt.f&Ze)!==0;if(!r&&!Re?.includes(t)){var i=nt.deps;if((nt.f&ji)!==0)t.rv<wr&&(t.rv=wr,Tt===null&&i!==null&&i[Xt]===t?Xt++:Tt===null?Tt=[t]:Tt.includes(t)||Tt.push(t));else{(nt.deps??=[]).push(t);var s=t.reactions;s===null?t.reactions=[nt]:s.includes(nt)||s.push(nt)}}}if(Gn){if(Je.has(t))return Je.get(t);if(n){var a=t,o=a.v;return((a.f&bt)===0&&a.reactions!==null||_o(a))&&(o=$s(a)),Je.set(a,o),o}}else n&&(!Jt?.has(t)||it?.is_fork&&!xr())&&(a=t,Zn(a)&&Wa(a),hn&&xr()&&(a.f&se)===0&&po(a));if(Jt?.has(t))return Jt.get(t);if((t.f&Qe)!==0)throw t.v;return t.v}function po(t){if(t.deps!==null){t.f^=se;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&Et)!==0&&(e.f&se)===0&&po(e)}}function _o(t){if(t.v===kt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Je.has(e)||(e.f&Et)!==0&&_o(e))return!0;return!1}function z(t){var e=ve;try{return ve=!0,t()}finally{ve=e}}const fu=-7169;function $t(t,e){t.f=t.f&fu|e}function re(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(je in t)ns(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&je in n&&ns(n)}}}function ns(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{ns(t[r],e)}catch{}const n=gs(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Ca(n);for(let i in r){const s=r[i].get;if(s)try{s.call(t)}catch{}}}}}const hu=["touchstart","touchmove"];function vu(t){return hu.includes(t)}const du=new Set,Zs=new Set;function pu(t,e,n,r={}){function i(s){if(r.capture||fr.call(e,s),!s.cancelBubble)return zi(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Wn(()=>{e.addEventListener(t,i,r)}):e.addEventListener(t,i,r),i}function vt(t,e,n,r,i){var s={capture:r,passive:i},a=pu(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Ai(()=>{e.removeEventListener(t,a,s)})}let Qs=null;function fr(t){var e=this,n=e.ownerDocument,r=t.type,i=t.composedPath?.()||[],s=i[0]||t.target;Qs=t;var a=0,o=Qs===t&&t.__root;if(o){var u=i.indexOf(o);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var l=i.indexOf(e);if(l===-1)return;u<=l&&(a=u)}if(s=i[a]||t.target,s!==e){Sa(t,"currentTarget",{configurable:!0,get(){return s||n}});var c=nt,d=lt;It(null),_e(null);try{for(var f,v=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var g=s["__"+r];g!=null&&(!s.disabled||t.target===s)&&g.call(s,t)}catch(p){f?v.push(p):f=p}if(t.cancelBubble||m===e||m===null)break;s=m}if(f){for(let p of v)queueMicrotask(()=>{throw p});throw f}}finally{t.__root=e,delete t.currentTarget,It(c),_e(d)}}}function _u(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function fi(t,e){var n=lt;n.nodes===null&&(n.nodes={start:t,end:e,a:null,t:null})}function W(t,e){var n=(e&Nl)!==0,r=(e&Sl)!==0,i,s=!t.startsWith("<!>");return()=>{i===void 0&&(i=_u(s?t:"<!>"+t),n||(i=li(i)));var a=r||Qa?document.importNode(i,!0):i.cloneNode(!0);if(n){var o=li(a),u=a.lastChild;fi(o,u)}else fi(a,a);return a}}function Xi(t=""){{var e=Pe(t+"");return fi(e,e),e}}function hi(){var t=document.createDocumentFragment(),e=document.createComment(""),n=Pe();return t.append(e,n),fi(e,n),t}function H(t,e){t!==null&&t.before(e)}function G(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function gu(t,e){return mu(t,e)}const Nn=new Map;function mu(t,{target:e,anchor:n,props:r={},events:i,context:s,intro:a=!0}){Zl();var o=new Set,u=d=>{for(var f=0;f<d.length;f++){var v=d[f];if(!o.has(v)){o.add(v);var m=vu(v);e.addEventListener(v,fr,{passive:m});var g=Nn.get(v);g===void 0?(document.addEventListener(v,fr,{passive:m}),Nn.set(v,1)):Nn.set(v,g+1)}}};u(Ei(du)),Zs.add(u);var l=void 0,c=eu(()=>{var d=n??e.appendChild(Pe());return Xl(d,{pending:()=>{}},f=>{if(s){oe({});var v=ht;v.c=s}i&&(r.$$events=i),l=t(f,r)||{},s&&le()}),()=>{for(var f of o){e.removeEventListener(f,fr);var v=Nn.get(f);--v===0?(document.removeEventListener(f,fr),Nn.delete(f)):Nn.set(f,v)}Zs.delete(u),d!==n&&d.parentNode?.removeChild(d)}});return yu.set(l,c),l}let yu=new WeakMap;class xu{anchor;#t=new Map;#e=new Map;#r=new Map;#n=new Set;#l=!0;constructor(e,n=!0){this.anchor=e,this.#l=n}#s=()=>{var e=it;if(this.#t.has(e)){var n=this.#t.get(e),r=this.#e.get(n);if(r)Ts(r),this.#n.delete(n);else{var i=this.#r.get(n);i&&(this.#e.set(n,i.effect),this.#r.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,a]of this.#t){if(this.#t.delete(s),s===e)break;const o=this.#r.get(a);o&&(Rt(o.effect),this.#r.delete(a))}for(const[s,a]of this.#e){if(s===n||this.#n.has(s))continue;const o=()=>{if(Array.from(this.#t.values()).includes(s)){var l=document.createDocumentFragment();uo(a,l),l.append(Pe()),this.#r.set(s,{effect:a,fragment:l})}else Rt(a);this.#n.delete(s),this.#e.delete(s)};this.#l||!r?(this.#n.add(s),fn(a,o,!1)):o()}}};#i=e=>{this.#t.delete(e);const n=Array.from(this.#t.values());for(const[r,i]of this.#r)n.includes(r)||(Rt(i.effect),this.#r.delete(r))};ensure(e,n){var r=it,i=to();if(n&&!this.#e.has(e)&&!this.#r.has(e))if(i){var s=document.createDocumentFragment(),a=Pe();s.append(a),this.#r.set(e,{effect:jt(()=>n(a)),fragment:s})}else this.#e.set(e,jt(()=>n(this.anchor)));if(this.#t.set(r,e),i){for(const[o,u]of this.#e)o===e?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[o,u]of this.#r)o===e?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(this.#s),r.ondiscard(this.#i)}else this.#s()}}function dt(t,e,n=!1){var r=new xu(t),i=n?On:0;function s(a,o){r.ensure(a,o)}ks(()=>{var a=!1;e((o,u=!0)=>{a=!0,s(u,o)}),a||s(!1,null)},i)}function Me(t,e){return e}function wu(t,e,n){for(var r=[],i=e.length,s,a=e.length,o=0;o<i;o++){let d=e[o];fn(d,()=>{if(s){if(s.pending.delete(d),s.done.add(d),s.pending.size===0){var f=t.outrogroups;rs(Ei(s.done)),f.delete(s),f.size===0&&(t.outrogroups=null)}}else a-=1},!1)}if(a===0){var u=r.length===0&&n!==null;if(u){var l=n,c=l.parentNode;Ql(c),c.append(l),t.items.clear()}rs(e,!u)}else s={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(s)}function rs(t,e=!0){for(var n=0;n<t.length;n++)Rt(t[n],e)}var js;function ze(t,e,n,r,i,s=null){var a=t,o=new Map,u=(e&Fa)!==0;if(u){var l=t;a=l.appendChild(Pe())}var c=null,d=Va(()=>{var _=n();return $i(_)?_:_==null?[]:Ei(_)}),f,v=!0;function m(){p.fallback=c,bu(p,f,a,e,r),c!==null&&(f.length===0?(c.f&Ne)===0?Ts(c):(c.f^=Ne,hr(c,null,a)):fn(c,()=>{c=null}))}var g=ks(()=>{f=h(d);for(var _=f.length,w=new Set,N=it,y=to(),A=0;A<_;A+=1){var P=f[A],I=r(P,A),D=v?null:o.get(I);D?(D.v&&mn(D.v,P),D.i&&mn(D.i,A),y&&N.skipped_effects.delete(D.e)):(D=$u(o,v?a:js??=Pe(),P,I,A,i,e,n),v||(D.e.f|=Ne),o.set(I,D)),w.add(I)}if(_===0&&s&&!c&&(v?c=jt(()=>s(a)):(c=jt(()=>s(js??=Pe())),c.f|=Ne)),!v)if(y){for(const[j,V]of o)w.has(j)||N.skipped_effects.add(V.e);N.oncommit(m),N.ondiscard(()=>{})}else m();h(d)}),p={effect:g,items:o,outrogroups:null,fallback:c};v=!1}function bu(t,e,n,r,i){var s=(r&zl)!==0,a=e.length,o=t.items,u=t.effect.first,l,c=null,d,f=[],v=[],m,g,p,_;if(s)for(_=0;_<a;_+=1)m=e[_],g=i(m,_),p=o.get(g).e,(p.f&Ne)===0&&(p.nodes?.a?.measure(),(d??=new Set).add(p));for(_=0;_<a;_+=1){if(m=e[_],g=i(m,_),p=o.get(g).e,t.outrogroups!==null)for(const V of t.outrogroups)V.pending.delete(p),V.done.delete(p);if((p.f&Ne)!==0)if(p.f^=Ne,p===u)hr(p,null,n);else{var w=c?c.next:u;p===t.effect.last&&(t.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),Ue(t,c,p),Ue(t,p,w),hr(p,w,n),c=p,f=[],v=[],u=c.next;continue}if((p.f&Yt)!==0&&(Ts(p),s&&(p.nodes?.a?.unfix(),(d??=new Set).delete(p))),p!==u){if(l!==void 0&&l.has(p)){if(f.length<v.length){var N=v[0],y;c=N.prev;var A=f[0],P=f[f.length-1];for(y=0;y<f.length;y+=1)hr(f[y],N,n);for(y=0;y<v.length;y+=1)l.delete(v[y]);Ue(t,A.prev,P.next),Ue(t,c,A),Ue(t,P,N),u=N,c=P,_-=1,f=[],v=[]}else l.delete(p),hr(p,u,n),Ue(t,p.prev,p.next),Ue(t,p,c===null?t.effect.first:c.next),Ue(t,c,p),c=p;continue}for(f=[],v=[];u!==null&&u!==p;)(l??=new Set).add(u),v.push(u),u=u.next;if(u===null)continue}(p.f&Ne)===0&&f.push(p),c=p,u=p.next}if(t.outrogroups!==null){for(const V of t.outrogroups)V.pending.size===0&&(rs(Ei(V.done)),t.outrogroups?.delete(V));t.outrogroups.size===0&&(t.outrogroups=null)}if(u!==null||l!==void 0){var I=[];if(l!==void 0)for(p of l)(p.f&Yt)===0&&I.push(p);for(;u!==null;)(u.f&Yt)===0&&u!==t.fallback&&I.push(u),u=u.next;var D=I.length;if(D>0){var j=(r&Fa)!==0&&a===0?n:null;if(s){for(_=0;_<D;_+=1)I[_].nodes?.a?.measure();for(_=0;_<D;_+=1)I[_].nodes?.a?.fix()}wu(t,I,j)}}s&&Wn(()=>{if(d!==void 0)for(p of d)p.nodes?.a?.apply()})}function $u(t,e,n,r,i,s,a,o){var u=(a&Tl)!==0?(a&Al)===0?ot(n,!1,!1):gn(n):null,l=(a&Ml)!==0?gn(i):null;return{v:u,i:l,e:jt(()=>(s(e,u??n,l??i,o),()=>{t.delete(r)}))}}function hr(t,e,n){if(t.nodes)for(var r=t.nodes.start,i=t.nodes.end,s=e&&(e.f&Ne)===0?e.nodes.start:n;r!==null;){var a=Ar(r);if(s.before(r),r===i)return;r=a}}function Ue(t,e,n){e===null?t.effect.first=n:e.next=n,n===null?t.effect.last=e:n.prev=e}const Js=[...` 	
\r\f \v\uFEFF`];function Eu(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,a=0;(a=r.indexOf(i,a))>=0;){var o=a+s;(a===0||Js.includes(r[a-1]))&&(o===r.length||Js.includes(r[o]))?r=(a===0?"":r.substring(0,a))+r.substring(o+1):a=o}}return r===""?null:r}function ku(t,e){return t==null?null:String(t)}function xt(t,e,n,r,i,s){var a=t.__className;if(a!==n||a===void 0){var o=Eu(n,r,s);o==null?t.removeAttribute("class"):t.className=o,t.__className=n}else if(s&&i!==s)for(var u in s){var l=!!s[u];(i==null||l!==!!i[u])&&t.classList.toggle(u,l)}return s}function Rn(t,e,n,r){var i=t.__style;if(i!==e){var s=ku(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}function go(t,e,n=!1){if(t.multiple){if(e==null)return;if(!$i(e))return Il();for(var r of t.options)r.selected=e.includes(yr(r));return}for(r of t.options){var i=yr(r);if(Gl(i,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Tu(t){var e=new MutationObserver(()=>{go(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ai(()=>{e.disconnect()})}function Mu(t,e,n=e){var r=new WeakSet,i=!0;Es(t,"change",s=>{var a=s?"[selected]":":checked",o;if(t.multiple)o=[].map.call(t.querySelectorAll(a),yr);else{var u=t.querySelector(a)??t.querySelector("option:not([disabled])");o=u&&yr(u)}n(o),it!==null&&r.add(it)}),ro(()=>{var s=e();if(t===document.activeElement){var a=_r??it;if(r.has(a))return}if(go(t,s,i),i&&s===void 0){var o=t.querySelector(":checked");o!==null&&(s=yr(o),n(s))}t.__value=s,i=!1}),Tu(t)}function yr(t){return"__value"in t?t.__value:t.value}const zu=Symbol("is custom element"),Au=Symbol("is html");function Yi(t,e,n,r){var i=Nu(t);i[e]!==(i[e]=n)&&(n==null?t.removeAttribute(e):typeof n!="string"&&Su(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Nu(t){return t.__attributes??={[zu]:t.nodeName.includes("-"),[Au]:t.namespaceURI===Cl}}var ta=new Map;function Su(t){var e=t.getAttribute("is")||t.nodeName,n=ta.get(e);if(n)return n;ta.set(e,n=[]);for(var r,i=t,s=Element.prototype;s!==i;){r=Ca(i);for(var a in r)r[a].set&&n.push(a);i=gs(i)}return n}function vi(t,e,n=e){var r=new WeakSet;Es(t,"input",async i=>{var s=i?t.defaultValue:t.value;if(s=Bi(t)?Vi(s):s,n(s),it!==null&&r.add(it),await cu(),s!==(s=e())){var a=t.selectionStart,o=t.selectionEnd,u=t.value.length;if(t.value=s??"",o!==null){var l=t.value.length;a===o&&o===u&&l>u?(t.selectionStart=l,t.selectionEnd=l):(t.selectionStart=a,t.selectionEnd=Math.min(o,l))}}}),z(e)==null&&t.value&&(n(Bi(t)?Vi(t.value):t.value),it!==null&&r.add(it)),Kn(()=>{var i=e();if(t===document.activeElement){var s=_r??it;if(r.has(s))return}Bi(t)&&i===Vi(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function ea(t,e,n=e){Es(t,"change",r=>{var i=r?t.defaultChecked:t.checked;n(i)}),z(e)==null&&n(t.checked),Kn(()=>{var r=e();t.checked=!!r})}function Bi(t){var e=t.type;return e==="number"||e==="range"}function Vi(t){return t===""?null:+t}function na(t,e){return t===e||t?.[je]===e}function Cu(t={},e,n,r){return ro(()=>{var i,s;return Kn(()=>{i=s,s=[],z(()=>{t!==n(...s)&&(e(t,...s),i&&na(n(...i),t)&&e(null,...i))})}),()=>{Wn(()=>{s&&na(n(...s),t)&&e(null,...s)})}}),t}function me(t=!1){const e=ht,n=e.l.u;if(!n)return;let r=()=>re(e.s);if(t){let i=0,s={};const a=bs(()=>{let o=!1;const u=e.s;for(const l in u)u[l]!==s[l]&&(s[l]=u[l],o=!0);return o&&i++,i});r=()=>h(a)}n.b.length&&tu(()=>{ra(e,r),ai(n.b)}),es(()=>{const i=z(()=>n.m.map(pl));return()=>{for(const s of i)typeof s=="function"&&s()}}),n.a.length&&es(()=>{ra(e,r),ai(n.a)})}function ra(t,e){if(t.l.s)for(const n of t.l.s)h(n);e()}function Ms(t,e,n){if(t==null)return e(void 0),n&&n(void 0),Ge;const r=z(()=>t.subscribe(e,n));return r.unsubscribe?()=>r.unsubscribe():r}const Sn=[];function Iu(t,e){return{subscribe:Dt(t,e).subscribe}}function Dt(t,e=Ge){let n=null;const r=new Set;function i(o){if(La(t,o)&&(t=o,n)){const u=!Sn.length;for(const l of r)l[1](),Sn.push(l,t);if(u){for(let l=0;l<Sn.length;l+=2)Sn[l][0](Sn[l+1]);Sn.length=0}}}function s(o){i(o(t))}function a(o,u=Ge){const l=[o,u];return r.add(l),r.size===1&&(n=e(i,s)||Ge),o(t),()=>{r.delete(l),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:a}}function Pu(t,e,n){const r=!Array.isArray(t),i=r?[t]:t;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return Iu(n,(a,o)=>{let u=!1;const l=[];let c=0,d=Ge;const f=()=>{if(c)return;d();const m=e(r?l[0]:l,a,o);s?a(m):d=typeof m=="function"?m:Ge},v=i.map((m,g)=>Ms(m,p=>{l[g]=p,c&=~(1<<g),u&&f()},()=>{c|=1<<g}));return u=!0,f(),function(){ai(v),d(),u=!1}})}function de(t){let e;return Ms(t,n=>e=n)(),e}let is=Symbol();function te(t,e,n){const r=n[e]??={store:null,source:ot(void 0),unsubscribe:Ge};if(r.store!==t&&!(is in n))if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=Ge;else{var i=!0;r.unsubscribe=Ms(t,s=>{i?r.source.v=s:B(r.source,s)}),i=!1}return t&&is in n?de(t):h(r.source)}function Ru(t,e){return t.set(e),e}function Oe(){const t={};function e(){Ai(()=>{for(var n in t)t[n].unsubscribe();Sa(t,is,{enumerable:!1,value:!0})})}return[t,e]}function zs(t){ht===null&&ws(),Mr&&ht.l!==null?Ou(ht).m.push(t):es(()=>{const e=z(t);if(typeof e=="function")return e})}function Fu(t){ht===null&&ws(),zs(()=>()=>z(t))}function Du(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function Lu(){const t=ht;return t===null&&ws(),(e,n,r)=>{const i=t.s.$$events?.[e];if(i){const s=$i(i)?i.slice():[i],a=Du(e,n,r);for(const o of s)o.call(t.x,a);return!a.defaultPrevented}return!0}}function Ou(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const qu="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(qu);Fl();var Hu=W('<header class="svelte-1elxaub"><div class="logo svelte-1elxaub"><div class="logo-text svelte-1elxaub">smeecher</div></div> <a href="https://www.pramit.gg" target="_blank" rel="noopener" class="by-line svelte-1elxaub">by JoyFired</a></header>');function Xu(t){var e=Hu();H(t,e)}const As="";async function Yu(t){return(await fetch(`${As}/search?q=${encodeURIComponent(t)}`)).json()}async function Bu(t,e=15){const n=t.join(",");return(await fetch(`${As}/graph?tokens=${encodeURIComponent(n)}&top_k=${e}&t=${Date.now()}`)).json()}async function Vu(t,e={}){const n=t.join(","),r=new URLSearchParams({tokens:n,t:String(Date.now()),...Object.fromEntries(Object.entries(e).map(([a,o])=>[a,String(o)]))}),i=await fetch(`${As}/clusters?${r.toString()}`),s=await i.json();if(!i.ok)throw new Error(s?.detail||"Failed to fetch clusters");return s}const bn=Dt([]),Ns=Dt(null),Ni=Dt(new Set(["unit","item","trait"])),di=Dt(new Set),Yn=Dt({visible:!1,x:0,y:0,content:null,fromTouch:!1}),ss=Dt(15),Uu=Pu(Ns,t=>t?.base?{games:t.base.n,avgPlacement:t.base.avg_placement}:{games:0,avgPlacement:4.5});function pi(t){bn.update(e=>e.includes(t)?e:[...e,t])}function Wu(t){bn.update(e=>{const n=new Set(e),r=[...e];for(const i of t)n.has(i)||(n.add(i),r.push(i));return r})}function Ku(t){bn.set(t)}function Gu(t){bn.update(e=>e.filter(n=>n!==t))}function Fn(t){Ni.update(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n})}function ia(t,e,n,r=!1){Yn.set({visible:!0,x:t,y:e,content:n,fromTouch:r})}function Ui(){Yn.update(t=>t.fromTouch?t:{...t,visible:!1})}function Zu(){Yn.set({visible:!1,x:0,y:0,content:null,fromTouch:!1})}function Qu(t){di.set(new Set(t))}function sa(){di.set(new Set)}const un="https://raw.communitydragon.org/latest/plugins/rcp-be-lol-game-data/global/default",mo=Dt(new Map),yo=Dt(new Map),xo=Dt(new Map),wo=Dt(new Map),bo=Dt(new Map),$o=Dt(new Set),aa=Dt(!1);async function ju(){try{const[t,e]=await Promise.all([fetch(`${un}/v1/tftitems.json`),fetch(`${un}/v1/tfttraits.json`)]),[n,r]=await Promise.all([t.json(),e.json()]),i=new Map,s=new Map,a=new Map,o=new Map,u=new Map;n.forEach(l=>{const c=l.name?.replace(/<[^>]*>/g,"").trim(),d=l.nameId||"",f=l.squareIconPath||l.iconPath;if(c&&f){const v=`${un}${f.toLowerCase().replace("/lol-game-data/assets","")}`;if(i.set(c.toLowerCase(),v),d){i.set(d.toLowerCase(),v),s.set(d.toLowerCase(),c);const m=d.replace(/^TFT\d*_Item_/i,"").replace(/^TFT_Item_/i,"");m!==d&&(i.set(m.toLowerCase(),v),s.set(m.toLowerCase(),c)),u.set(c.toLowerCase(),{apiName:m!==d?m:d.replace(/^TFT_Item_/i,""),type:"item",displayName:c})}}}),r.forEach(l=>{const c=l.display_name,d=l.trait_id||"",f=l.icon_path;if(c&&f){const v=`${un}${f.toLowerCase().replace("/lol-game-data/assets","")}`;if(a.set(c.toLowerCase(),v),d){a.set(d.toLowerCase(),v),o.set(d.toLowerCase(),c);const m=d.replace(/^TFT\d*_/i,"").replace(/^Set\d*_/i,"");m!==d&&(a.set(m.toLowerCase(),v),o.set(m.toLowerCase(),c)),d.startsWith("TFT16_")&&u.set(c.toLowerCase(),{apiName:m,type:"trait",displayName:c})}}}),mo.set(i),yo.set(s),xo.set(a),wo.set(o),bo.set(u),aa.set(!0),console.log(`Loaded ${i.size} item mappings, ${a.size} trait mappings`)}catch(t){console.warn("Failed to load CDragon data:",t),aa.set(!0)}}function Eo(t,e){const n=e.toLowerCase();switch(t){case"unit":return`${un}/assets/characters/tft16_${n}/hud/tft16_${n}_square.tft_set16.png`;case"item":{const r=de(mo);return r.has(n)?r.get(n):`${un}/assets/maps/tft/icons/items/hexcore/tft_item_${n.replace(/['\s]/g,"")}.tft_set13.png`}case"trait":{const r=de(xo);return r.has(n)?r.get(n):`${un}/assets/ux/traiticons/trait_icon_16_${n.replace(/\s/g,"")}.tft_set16.png`}default:return null}}function Ce(t,e){const n=e.toLowerCase();if(t==="item"){const r=de(yo);if(r.has(n))return r.get(n)}if(t==="trait"){const r=de(wo);if(r.has(n))return r.get(n)}return e}function ei(t,e){$o.update(n=>{const r=new Set(n);return r.add(`${t}:${e}`),r})}function an(t,e){return de($o).has(`${t}:${e}`)}var Ju=W("<span> </span>"),tc=W('<button class="search-result svelte-yyldap"><span class="label svelte-yyldap"> </span> <span class="meta svelte-yyldap"><span> </span> <!></span></button>'),ec=W('<div class="search-result no-results svelte-yyldap"><span class="label svelte-yyldap">No results found</span></div>'),nc=W('<div class="search-results svelte-yyldap"></div>'),rc=W('<div class="search-container svelte-yyldap"><input type="text" placeholder="Search units, items, traits..." autocomplete="off" class="svelte-yyldap"/> <!></div>');function ic(t,e){oe(e,!1);let n=ot(""),r=ot([]),i=ot(!1),s;async function a(){if(clearTimeout(s),h(n).length<2){B(r,[]),B(i,!1);return}s=setTimeout(async()=>{try{const g=await Yu(h(n)),p=h(n).toLowerCase(),_=[],w=new Set(g.map(y=>y.token)),N=de(bo);for(const[y,A]of N)if(y.includes(p)){const I=(A.type==="item"?"I:":"T:")+A.apiName;w.has(I)||(_.push({token:I,label:A.apiName,type:A.type,count:0}),w.add(I))}B(r,[...g,..._]),B(i,h(r).length>0)}catch(g){console.error("Search error:",g)}},150)}function o(g){pi(g),B(n,""),B(r,[]),B(i,!1)}function u(){h(r).length>0&&B(i,!0)}function l(g){g.target.closest(".search-container")||B(i,!1)}function c(g){return g==="unit"?"unit":g==="item"?"item":g==="trait"?"trait":"item"}me();var d=rc();vt("click",Za,l);var f=b(d),v=M(f,2);{var m=g=>{var p=nc();ze(p,5,()=>h(r),Me,(_,w)=>{var N=tc(),y=b(N),A=b(y),P=M(y,2),I=b(P),D=b(I),j=M(I,2);{var V=J=>{var ft=Ju(),st=b(ft);rt(x=>G(st,`${x??""} games`),[()=>h(w).count.toLocaleString()]),H(J,ft)};dt(j,J=>{h(w).count>0&&J(V)})}rt((J,ft)=>{G(A,J),xt(I,1,`type-badge ${ft??""}`,"svelte-yyldap"),G(D,h(w).type)},[()=>Ce(h(w).type,h(w).label),()=>c(h(w).type)]),vt("click",N,()=>o(h(w).token)),H(_,N)},_=>{var w=ec();H(_,w)}),H(g,p)};dt(v,g=>{h(i)&&g(m)})}vi(f,()=>h(n),g=>B(n,g)),vt("input",f,a),vt("focus",f,u),H(t,d),le()}var sc=W('<div class="filter-toggles svelte-1dvg93b"><button>Units</button> <button>Items</button> <button>Traits</button></div>');function ac(t,e){oe(e,!1);const n=()=>te(Ni,"$activeTypes",r),[r,i]=Oe(),s=ot(),a=ot(),o=ot();wt(()=>n(),()=>{B(s,n().has("unit"))}),wt(()=>n(),()=>{B(a,n().has("item"))}),wt(()=>n(),()=>{B(o,n().has("trait"))}),wn(),me();var u=sc(),l=b(u);let c;var d=M(l,2);let f;var v=M(d,2);let m;rt(()=>{c=xt(l,1,"filter-toggle unit svelte-1dvg93b",null,c,{active:h(s)}),f=xt(d,1,"filter-toggle item svelte-1dvg93b",null,f,{active:h(a)}),m=xt(v,1,"filter-toggle trait svelte-1dvg93b",null,m,{active:h(o)})}),vt("click",l,()=>Fn("unit")),vt("click",d,()=>Fn("item")),vt("click",v,()=>Fn("trait")),H(t,u),le(),i()}function ke(t){const i=Math.max(1,Math.min(8,t));if(i<=4.5){const s=(i-1)/3.5,a=Math.round(34+s*221),o=Math.round(197-s*17),u=Math.round(94-s*54);return`rgb(${a}, ${o}, ${u})`}else{const s=(i-4.5)/3.5,a=255,o=Math.round(180-s*130),u=Math.round(40+s*20);return`rgb(${a}, ${o}, ${u})`}}var oc=W('<div class="stats svelte-1tib2rn"><div class="stat-inline svelte-1tib2rn"><span class="stat-label svelte-1tib2rn">Games</span> <span class="stat-value svelte-1tib2rn"> </span></div> <div class="stat-inline svelte-1tib2rn"><span class="stat-label svelte-1tib2rn">Avg Place</span> <span class="stat-value svelte-1tib2rn"> </span></div></div>');function lc(t,e){oe(e,!1);const n=()=>te(Uu,"$stats",r),[r,i]=Oe(),s=ot();wt(()=>n(),()=>{B(s,ke(n().avgPlacement))}),wn(),me();var a=oc(),o=b(a),u=M(b(o),2),l=b(u),c=M(o,2),d=M(b(c),2),f=b(d);rt((v,m)=>{G(l,v),Rn(d,`color: ${h(s)??""}`),G(f,m)},[()=>(n(),z(()=>n().games.toLocaleString())),()=>(n(),z(()=>n().avgPlacement.toFixed(2)))]),H(t,a),le(),i()}function St(t){return t.startsWith("U:")?"unit":t.startsWith("I:")?"item":t.startsWith("E:")?"equipped":t.startsWith("T:")?"trait":"unknown"}function uc(t){switch(St(t)){case"unit":return{type:"unit",unit:t.slice(2)};case"item":return{type:"item",item:t.slice(2)};case"equipped":{const[n,r]=t.slice(2).split("|");return{type:"equipped",unit:n,item:r}}case"trait":{const n=t.slice(2).split(":");return n.length===2?{type:"trait",trait:n[0],tier:parseInt(n[1])}:{type:"trait",trait:n[0],tier:null}}default:return{type:"unknown"}}}function cc(t,e){const n=uc(t);switch(n.type){case"unit":return e("unit",n.unit);case"item":return e("item",n.item);case"equipped":return`${e("unit",n.unit)} → ${e("item",n.item)}`;case"trait":const r=e("trait",n.trait);return n.tier?`${r} ${n.tier}`:r;default:return t}}var fc=W('<div class="empty-message svelte-1mf077">No filters applied. Search and select units, items, or traits to start.</div>'),hc=W('<div><span> </span> <button aria-label="Remove filter" class="svelte-1mf077">×</button></div>'),vc=W('<div class="chips-section svelte-1mf077"><div class="section-title svelte-1mf077">Active Filters</div> <div class="chips svelte-1mf077"><!></div></div>');function dc(t,e){oe(e,!1);const n=()=>te(bn,"$selectedTokens",r),[r,i]=Oe();function s(f){const v=St(f);if(f.startsWith("E:")){const[m,g]=f.slice(2).split("|");return`${Ce("unit",m)} → ${Ce("item",g)}`}return Ce(v,f.slice(2))}function a(f){return f.startsWith("E:")?"equipped":St(f)}me();var o=vc(),u=M(b(o),2),l=b(u);{var c=f=>{var v=fc();H(f,v)},d=f=>{var v=hi(),m=Se(v);ze(m,1,n,Me,(g,p)=>{var _=hc(),w=b(_),N=b(w),y=M(w,2);rt((A,P)=>{xt(_,1,`chip ${A??""}`,"svelte-1mf077"),G(N,P)},[()=>a(h(p)),()=>s(h(p))]),vt("click",y,()=>Gu(h(p))),H(g,_)}),H(f,v)};dt(l,f=>{n().length===0?f(c):f(d,!1)})}H(t,o),le(),i()}var pc=W('<div class="topk-control svelte-5yceyo"><span class="label svelte-5yceyo">Top-K</span> <input type="number" min="0" max="500" title="0 = unlimited" class="svelte-5yceyo"/></div>');function _c(t,e){oe(e,!1);const n=()=>te(ss,"$topK",r),[r,i]=Oe(),s=Lu();function a(){s("change")}me();var o=pc(),u=M(b(o),2);vi(u,n,l=>Ru(ss,l)),vt("change",u,a),H(t,o),le(),i()}function oa(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}var gc={value:()=>{}};function Nr(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ni(n)}function ni(t){this._=t}function mc(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ni.prototype=Nr.prototype={constructor:ni,on:function(t,e){var n=this._,r=mc(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=yc(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=la(n[i],t.name,e);else if(e==null)for(i in n)n[i]=la(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ni(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function yc(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function la(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=gc,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var as="http://www.w3.org/1999/xhtml";const ua={svg:"http://www.w3.org/2000/svg",xhtml:as,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Si(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),ua.hasOwnProperty(e)?{space:ua[e],local:t}:t}function xc(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===as&&e.documentElement.namespaceURI===as?e.createElement(t):e.createElementNS(n,t)}}function wc(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ko(t){var e=Si(t);return(e.local?wc:xc)(e)}function bc(){}function Ss(t){return t==null?bc:function(){return this.querySelector(t)}}function $c(t){typeof t!="function"&&(t=Ss(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=new Array(a),u,l,c=0;c<a;++c)(u=s[c])&&(l=t.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),o[c]=l);return new Bt(r,this._parents)}function Ec(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function kc(){return[]}function To(t){return t==null?kc:function(){return this.querySelectorAll(t)}}function Tc(t){return function(){return Ec(t.apply(this,arguments))}}function Mc(t){typeof t=="function"?t=Tc(t):t=To(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],o=a.length,u,l=0;l<o;++l)(u=a[l])&&(r.push(t.call(u,u.__data__,l,a)),i.push(u));return new Bt(r,i)}function Mo(t){return function(){return this.matches(t)}}function zo(t){return function(e){return e.matches(t)}}var zc=Array.prototype.find;function Ac(t){return function(){return zc.call(this.children,t)}}function Nc(){return this.firstElementChild}function Sc(t){return this.select(t==null?Nc:Ac(typeof t=="function"?t:zo(t)))}var Cc=Array.prototype.filter;function Ic(){return Array.from(this.children)}function Pc(t){return function(){return Cc.call(this.children,t)}}function Rc(t){return this.selectAll(t==null?Ic:Pc(typeof t=="function"?t:zo(t)))}function Fc(t){typeof t!="function"&&(t=Mo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],u,l=0;l<a;++l)(u=s[l])&&t.call(u,u.__data__,l,s)&&o.push(u);return new Bt(r,this._parents)}function Ao(t){return new Array(t.length)}function Dc(){return new Bt(this._enter||this._groups.map(Ao),this._parents)}function _i(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}_i.prototype={constructor:_i,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Lc(t){return function(){return t}}function Oc(t,e,n,r,i,s){for(var a=0,o,u=e.length,l=s.length;a<l;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new _i(t,s[a]);for(;a<u;++a)(o=e[a])&&(i[a]=o)}function qc(t,e,n,r,i,s,a){var o,u,l=new Map,c=e.length,d=s.length,f=new Array(c),v;for(o=0;o<c;++o)(u=e[o])&&(f[o]=v=a.call(u,u.__data__,o,e)+"",l.has(v)?i[o]=u:l.set(v,u));for(o=0;o<d;++o)v=a.call(t,s[o],o,s)+"",(u=l.get(v))?(r[o]=u,u.__data__=s[o],l.delete(v)):n[o]=new _i(t,s[o]);for(o=0;o<c;++o)(u=e[o])&&l.get(f[o])===u&&(i[o]=u)}function Hc(t){return t.__data__}function Xc(t,e){if(!arguments.length)return Array.from(this,Hc);var n=e?qc:Oc,r=this._parents,i=this._groups;typeof t!="function"&&(t=Lc(t));for(var s=i.length,a=new Array(s),o=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],d=i[l],f=d.length,v=Yc(t.call(c,c&&c.__data__,l,r)),m=v.length,g=o[l]=new Array(m),p=a[l]=new Array(m),_=u[l]=new Array(f);n(c,d,g,p,_,v,e);for(var w=0,N=0,y,A;w<m;++w)if(y=g[w]){for(w>=N&&(N=w+1);!(A=p[N])&&++N<m;);y._next=A||null}}return a=new Bt(a,r),a._enter=o,a._exit=u,a}function Yc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Bc(){return new Bt(this._exit||this._groups.map(Ao),this._parents)}function Vc(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Uc(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),u=0;u<a;++u)for(var l=n[u],c=r[u],d=l.length,f=o[u]=new Array(d),v,m=0;m<d;++m)(v=l[m]||c[m])&&(f[m]=v);for(;u<i;++u)o[u]=n[u];return new Bt(o,this._parents)}function Wc(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Kc(t){t||(t=Gc);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,u=i[s]=new Array(o),l,c=0;c<o;++c)(l=a[c])&&(u[c]=l);u.sort(e)}return new Bt(i,this._parents).order()}function Gc(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Zc(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Qc(){return Array.from(this)}function jc(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function Jc(){let t=0;for(const e of this)++t;return t}function tf(){return!this.node()}function ef(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function nf(t){return function(){this.removeAttribute(t)}}function rf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function sf(t,e){return function(){this.setAttribute(t,e)}}function af(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function of(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function lf(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function uf(t,e){var n=Si(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?rf:nf:typeof e=="function"?n.local?lf:of:n.local?af:sf)(n,e))}function No(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function cf(t){return function(){this.style.removeProperty(t)}}function ff(t,e,n){return function(){this.style.setProperty(t,e,n)}}function hf(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function vf(t,e,n){return arguments.length>1?this.each((e==null?cf:typeof e=="function"?hf:ff)(t,e,n??"")):Bn(this.node(),t)}function Bn(t,e){return t.style.getPropertyValue(e)||No(t).getComputedStyle(t,null).getPropertyValue(e)}function df(t){return function(){delete this[t]}}function pf(t,e){return function(){this[t]=e}}function _f(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function gf(t,e){return arguments.length>1?this.each((e==null?df:typeof e=="function"?_f:pf)(t,e)):this.node()[t]}function So(t){return t.trim().split(/^|\s+/)}function Cs(t){return t.classList||new Co(t)}function Co(t){this._node=t,this._names=So(t.getAttribute("class")||"")}Co.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Io(t,e){for(var n=Cs(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Po(t,e){for(var n=Cs(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function mf(t){return function(){Io(this,t)}}function yf(t){return function(){Po(this,t)}}function xf(t,e){return function(){(e.apply(this,arguments)?Io:Po)(this,t)}}function wf(t,e){var n=So(t+"");if(arguments.length<2){for(var r=Cs(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?xf:e?mf:yf)(n,e))}function bf(){this.textContent=""}function $f(t){return function(){this.textContent=t}}function Ef(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function kf(t){return arguments.length?this.each(t==null?bf:(typeof t=="function"?Ef:$f)(t)):this.node().textContent}function Tf(){this.innerHTML=""}function Mf(t){return function(){this.innerHTML=t}}function zf(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Af(t){return arguments.length?this.each(t==null?Tf:(typeof t=="function"?zf:Mf)(t)):this.node().innerHTML}function Nf(){this.nextSibling&&this.parentNode.appendChild(this)}function Sf(){return this.each(Nf)}function Cf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function If(){return this.each(Cf)}function Pf(t){var e=typeof t=="function"?t:ko(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Rf(){return null}function Ff(t,e){var n=typeof t=="function"?t:ko(t),r=e==null?Rf:typeof e=="function"?e:Ss(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Df(){var t=this.parentNode;t&&t.removeChild(this)}function Lf(){return this.each(Df)}function Of(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function qf(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Hf(t){return this.select(t?qf:Of)}function Xf(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Yf(t){return function(e){t.call(this,e,this.__data__)}}function Bf(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Vf(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function Uf(t,e,n){return function(){var r=this.__on,i,s=Yf(e);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Wf(t,e,n){var r=Bf(t+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var u=0,l=o.length,c;u<l;++u)for(i=0,c=o[u];i<s;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(o=e?Uf:Vf,i=0;i<s;++i)this.each(o(r[i],e,n));return this}function Ro(t,e,n){var r=No(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Kf(t,e){return function(){return Ro(this,t,e)}}function Gf(t,e){return function(){return Ro(this,t,e.apply(this,arguments))}}function Zf(t,e){return this.each((typeof e=="function"?Gf:Kf)(t,e))}function*Qf(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var Fo=[null];function Bt(t,e){this._groups=t,this._parents=e}function Sr(){return new Bt([[document.documentElement]],Fo)}function jf(){return this}Bt.prototype=Sr.prototype={constructor:Bt,select:$c,selectAll:Mc,selectChild:Sc,selectChildren:Rc,filter:Fc,data:Xc,enter:Dc,exit:Bc,join:Vc,merge:Uc,selection:jf,order:Wc,sort:Kc,call:Zc,nodes:Qc,node:jc,size:Jc,empty:tf,each:ef,attr:uf,style:vf,property:gf,classed:wf,text:kf,html:Af,raise:Sf,lower:If,append:Pf,insert:Ff,remove:Lf,clone:Hf,datum:Xf,on:Wf,dispatch:Zf,[Symbol.iterator]:Qf};function Ct(t){return typeof t=="string"?new Bt([[document.querySelector(t)]],[document.documentElement]):new Bt([[t]],Fo)}function Jf(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ae(t,e){if(t=Jf(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const th={passive:!1},br={capture:!0,passive:!1};function Wi(t){t.stopImmediatePropagation()}function Dn(t){t.preventDefault(),t.stopImmediatePropagation()}function Do(t){var e=t.document.documentElement,n=Ct(t).on("dragstart.drag",Dn,br);"onselectstart"in e?n.on("selectstart.drag",Dn,br):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Lo(t,e){var n=t.document.documentElement,r=Ct(t).on("dragstart.drag",null);e&&(r.on("click.drag",Dn,br),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Zr=t=>()=>t;function os(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:a,y:o,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}os.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function eh(t){return!t.ctrlKey&&!t.button}function nh(){return this.parentNode}function rh(t,e){return e??{x:t.x,y:t.y}}function ih(){return navigator.maxTouchPoints||"ontouchstart"in this}function sh(){var t=eh,e=nh,n=rh,r=ih,i={},s=Nr("start","drag","end"),a=0,o,u,l,c,d=0;function f(y){y.on("mousedown.drag",v).filter(r).on("touchstart.drag",p).on("touchmove.drag",_,th).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(y,A){if(!(c||!t.call(this,y,A))){var P=N(this,e.call(this,y,A),y,A,"mouse");P&&(Ct(y.view).on("mousemove.drag",m,br).on("mouseup.drag",g,br),Do(y.view),Wi(y),l=!1,o=y.clientX,u=y.clientY,P("start",y))}}function m(y){if(Dn(y),!l){var A=y.clientX-o,P=y.clientY-u;l=A*A+P*P>d}i.mouse("drag",y)}function g(y){Ct(y.view).on("mousemove.drag mouseup.drag",null),Lo(y.view,l),Dn(y),i.mouse("end",y)}function p(y,A){if(t.call(this,y,A)){var P=y.changedTouches,I=e.call(this,y,A),D=P.length,j,V;for(j=0;j<D;++j)(V=N(this,I,y,A,P[j].identifier,P[j]))&&(Wi(y),V("start",y,P[j]))}}function _(y){var A=y.changedTouches,P=A.length,I,D;for(I=0;I<P;++I)(D=i[A[I].identifier])&&(Dn(y),D("drag",y,A[I]))}function w(y){var A=y.changedTouches,P=A.length,I,D;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),I=0;I<P;++I)(D=i[A[I].identifier])&&(Wi(y),D("end",y,A[I]))}function N(y,A,P,I,D,j){var V=s.copy(),J=Ae(j||P,A),ft,st,x;if((x=n.call(y,new os("beforestart",{sourceEvent:P,target:f,identifier:D,active:a,x:J[0],y:J[1],dx:0,dy:0,dispatch:V}),I))!=null)return ft=x.x-J[0]||0,st=x.y-J[1]||0,function L(E,O,U){var Z=J,Q;switch(E){case"start":i[D]=L,Q=a++;break;case"end":delete i[D],--a;case"drag":J=Ae(U||O,A),Q=a;break}V.call(E,y,new os(E,{sourceEvent:O,subject:x,target:f,identifier:D,active:Q,x:J[0]+ft,y:J[1]+st,dx:J[0]-Z[0],dy:J[1]-Z[1],dispatch:V}),I)}}return f.filter=function(y){return arguments.length?(t=typeof y=="function"?y:Zr(!!y),f):t},f.container=function(y){return arguments.length?(e=typeof y=="function"?y:Zr(y),f):e},f.subject=function(y){return arguments.length?(n=typeof y=="function"?y:Zr(y),f):n},f.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:Zr(!!y),f):r},f.on=function(){var y=s.on.apply(s,arguments);return y===s?f:y},f.clickDistance=function(y){return arguments.length?(d=(y=+y)*y,f):Math.sqrt(d)},f}function Is(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Oo(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Cr(){}var $r=.7,gi=1/$r,Ln="\\s*([+-]?\\d+)\\s*",Er="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ah=/^#([0-9a-f]{3,8})$/,oh=new RegExp(`^rgb\\(${Ln},${Ln},${Ln}\\)$`),lh=new RegExp(`^rgb\\(${pe},${pe},${pe}\\)$`),uh=new RegExp(`^rgba\\(${Ln},${Ln},${Ln},${Er}\\)$`),ch=new RegExp(`^rgba\\(${pe},${pe},${pe},${Er}\\)$`),fh=new RegExp(`^hsl\\(${Er},${pe},${pe}\\)$`),hh=new RegExp(`^hsla\\(${Er},${pe},${pe},${Er}\\)$`),ca={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Is(Cr,kr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:fa,formatHex:fa,formatHex8:vh,formatHsl:dh,formatRgb:ha,toString:ha});function fa(){return this.rgb().formatHex()}function vh(){return this.rgb().formatHex8()}function dh(){return qo(this).formatHsl()}function ha(){return this.rgb().formatRgb()}function kr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ah.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?va(e):n===3?new Pt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Qr(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Qr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=oh.exec(t))?new Pt(e[1],e[2],e[3],1):(e=lh.exec(t))?new Pt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=uh.exec(t))?Qr(e[1],e[2],e[3],e[4]):(e=ch.exec(t))?Qr(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=fh.exec(t))?_a(e[1],e[2]/100,e[3]/100,1):(e=hh.exec(t))?_a(e[1],e[2]/100,e[3]/100,e[4]):ca.hasOwnProperty(t)?va(ca[t]):t==="transparent"?new Pt(NaN,NaN,NaN,0):null}function va(t){return new Pt(t>>16&255,t>>8&255,t&255,1)}function Qr(t,e,n,r){return r<=0&&(t=e=n=NaN),new Pt(t,e,n,r)}function ph(t){return t instanceof Cr||(t=kr(t)),t?(t=t.rgb(),new Pt(t.r,t.g,t.b,t.opacity)):new Pt}function ls(t,e,n,r){return arguments.length===1?ph(t):new Pt(t,e,n,r??1)}function Pt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Is(Pt,ls,Oo(Cr,{brighter(t){return t=t==null?gi:Math.pow(gi,t),new Pt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?$r:Math.pow($r,t),new Pt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Pt(dn(this.r),dn(this.g),dn(this.b),mi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:da,formatHex:da,formatHex8:_h,formatRgb:pa,toString:pa}));function da(){return`#${cn(this.r)}${cn(this.g)}${cn(this.b)}`}function _h(){return`#${cn(this.r)}${cn(this.g)}${cn(this.b)}${cn((isNaN(this.opacity)?1:this.opacity)*255)}`}function pa(){const t=mi(this.opacity);return`${t===1?"rgb(":"rgba("}${dn(this.r)}, ${dn(this.g)}, ${dn(this.b)}${t===1?")":`, ${t})`}`}function mi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function dn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function cn(t){return t=dn(t),(t<16?"0":"")+t.toString(16)}function _a(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ie(t,e,n,r)}function qo(t){if(t instanceof ie)return new ie(t.h,t.s,t.l,t.opacity);if(t instanceof Cr||(t=kr(t)),!t)return new ie;if(t instanceof ie)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,u=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=u<.5?s+i:2-s-i,a*=60):o=u>0&&u<1?0:a,new ie(a,o,u,t.opacity)}function gh(t,e,n,r){return arguments.length===1?qo(t):new ie(t,e,n,r??1)}function ie(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Is(ie,gh,Oo(Cr,{brighter(t){return t=t==null?gi:Math.pow(gi,t),new ie(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?$r:Math.pow($r,t),new ie(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Pt(Ki(t>=240?t-240:t+120,i,r),Ki(t,i,r),Ki(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ie(ga(this.h),jr(this.s),jr(this.l),mi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=mi(this.opacity);return`${t===1?"hsl(":"hsla("}${ga(this.h)}, ${jr(this.s)*100}%, ${jr(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ga(t){return t=(t||0)%360,t<0?t+360:t}function jr(t){return Math.max(0,Math.min(1,t||0))}function Ki(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ho=t=>()=>t;function mh(t,e){return function(n){return t+n*e}}function yh(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function xh(t){return(t=+t)==1?Xo:function(e,n){return n-e?yh(e,n,t):Ho(isNaN(e)?n:e)}}function Xo(t,e){var n=e-t;return n?mh(t,n):Ho(isNaN(t)?e:t)}const ma=(function t(e){var n=xh(e);function r(i,s){var a=n((i=ls(i)).r,(s=ls(s)).r),o=n(i.g,s.g),u=n(i.b,s.b),l=Xo(i.opacity,s.opacity);return function(c){return i.r=a(c),i.g=o(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=t,r})(1);function We(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var us=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gi=new RegExp(us.source,"g");function wh(t){return function(){return t}}function bh(t){return function(e){return t(e)+""}}function $h(t,e){var n=us.lastIndex=Gi.lastIndex=0,r,i,s,a=-1,o=[],u=[];for(t=t+"",e=e+"";(r=us.exec(t))&&(i=Gi.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,u.push({i:a,x:We(r,i)})),n=Gi.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?u[0]?bh(u[0].x):wh(e):(e=u.length,function(l){for(var c=0,d;c<e;++c)o[(d=u[c]).i]=d.x(l);return o.join("")})}var ya=180/Math.PI,cs={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Yo(t,e,n,r,i,s){var a,o,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,u/=o),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*ya,skewX:Math.atan(u)*ya,scaleX:a,scaleY:o}}var Jr;function Eh(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?cs:Yo(e.a,e.b,e.c,e.d,e.e,e.f)}function kh(t){return t==null||(Jr||(Jr=document.createElementNS("http://www.w3.org/2000/svg","g")),Jr.setAttribute("transform",t),!(t=Jr.transform.baseVal.consolidate()))?cs:(t=t.matrix,Yo(t.a,t.b,t.c,t.d,t.e,t.f))}function Bo(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,d,f,v,m){if(l!==d||c!==f){var g=v.push("translate(",null,e,null,n);m.push({i:g-4,x:We(l,d)},{i:g-2,x:We(c,f)})}else(d||f)&&v.push("translate("+d+e+f+n)}function a(l,c,d,f){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:We(l,c)})):c&&d.push(i(d)+"rotate("+c+r)}function o(l,c,d,f){l!==c?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:We(l,c)}):c&&d.push(i(d)+"skewX("+c+r)}function u(l,c,d,f,v,m){if(l!==d||c!==f){var g=v.push(i(v)+"scale(",null,",",null,")");m.push({i:g-4,x:We(l,d)},{i:g-2,x:We(c,f)})}else(d!==1||f!==1)&&v.push(i(v)+"scale("+d+","+f+")")}return function(l,c){var d=[],f=[];return l=t(l),c=t(c),s(l.translateX,l.translateY,c.translateX,c.translateY,d,f),a(l.rotate,c.rotate,d,f),o(l.skewX,c.skewX,d,f),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,d,f),l=c=null,function(v){for(var m=-1,g=f.length,p;++m<g;)d[(p=f[m]).i]=p.x(v);return d.join("")}}}var Th=Bo(Eh,"px, ","px)","deg)"),Mh=Bo(kh,", ",")",")"),zh=1e-12;function xa(t){return((t=Math.exp(t))+1/t)/2}function Ah(t){return((t=Math.exp(t))-1/t)/2}function Nh(t){return((t=Math.exp(2*t))-1)/(t+1)}const Sh=(function t(e,n,r){function i(s,a){var o=s[0],u=s[1],l=s[2],c=a[0],d=a[1],f=a[2],v=c-o,m=d-u,g=v*v+m*m,p,_;if(g<zh)_=Math.log(f/l)/e,p=function(I){return[o+I*v,u+I*m,l*Math.exp(e*I*_)]};else{var w=Math.sqrt(g),N=(f*f-l*l+r*g)/(2*l*n*w),y=(f*f-l*l-r*g)/(2*f*n*w),A=Math.log(Math.sqrt(N*N+1)-N),P=Math.log(Math.sqrt(y*y+1)-y);_=(P-A)/e,p=function(I){var D=I*_,j=xa(A),V=l/(n*w)*(j*Nh(e*D+A)-Ah(A));return[o+V*v,u+V*m,l*j/xa(e*D+A)]}}return p.duration=_*1e3*e/Math.SQRT2,p}return i.rho=function(s){var a=Math.max(.001,+s),o=a*a,u=o*o;return t(a,o,u)},i})(Math.SQRT2,2,4);var Vn=0,vr=0,lr=0,Vo=1e3,yi,dr,xi=0,yn=0,Ci=0,Tr=typeof performance=="object"&&performance.now?performance:Date,Uo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ps(){return yn||(Uo(Ch),yn=Tr.now()+Ci)}function Ch(){yn=0}function wi(){this._call=this._time=this._next=null}wi.prototype=Rs.prototype={constructor:wi,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ps():+n)+(e==null?0:+e),!this._next&&dr!==this&&(dr?dr._next=this:yi=this,dr=this),this._call=t,this._time=n,fs()},stop:function(){this._call&&(this._call=null,this._time=1/0,fs())}};function Rs(t,e,n){var r=new wi;return r.restart(t,e,n),r}function Ih(){Ps(),++Vn;for(var t=yi,e;t;)(e=yn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Vn}function wa(){yn=(xi=Tr.now())+Ci,Vn=vr=0;try{Ih()}finally{Vn=0,Rh(),yn=0}}function Ph(){var t=Tr.now(),e=t-xi;e>Vo&&(Ci-=e,xi=t)}function Rh(){for(var t,e=yi,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:yi=n);dr=t,fs(r)}function fs(t){if(!Vn){vr&&(vr=clearTimeout(vr));var e=t-yn;e>24?(t<1/0&&(vr=setTimeout(wa,t-Tr.now()-Ci)),lr&&(lr=clearInterval(lr))):(lr||(xi=Tr.now(),lr=setInterval(Ph,Vo)),Vn=1,Uo(wa))}}function ba(t,e,n){var r=new wi;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Fh=Nr("start","end","cancel","interrupt"),Dh=[],Wo=0,$a=1,hs=2,ri=3,Ea=4,vs=5,ii=6;function Ii(t,e,n,r,i,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Lh(t,n,{name:e,index:r,group:i,on:Fh,tween:Dh,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Wo})}function Fs(t,e){var n=ue(t,e);if(n.state>Wo)throw new Error("too late; already scheduled");return n}function ye(t,e){var n=ue(t,e);if(n.state>ri)throw new Error("too late; already running");return n}function ue(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Lh(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Rs(s,0,n.time);function s(l){n.state=$a,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var c,d,f,v;if(n.state!==$a)return u();for(c in r)if(v=r[c],v.name===n.name){if(v.state===ri)return ba(a);v.state===Ea?(v.state=ii,v.timer.stop(),v.on.call("interrupt",t,t.__data__,v.index,v.group),delete r[c]):+c<e&&(v.state=ii,v.timer.stop(),v.on.call("cancel",t,t.__data__,v.index,v.group),delete r[c])}if(ba(function(){n.state===ri&&(n.state=Ea,n.timer.restart(o,n.delay,n.time),o(l))}),n.state=hs,n.on.call("start",t,t.__data__,n.index,n.group),n.state===hs){for(n.state=ri,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(v=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=v);i.length=d+1}}function o(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=vs,1),d=-1,f=i.length;++d<f;)i[d].call(t,c);n.state===vs&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=ii,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function si(t,e){var n=t.__transition,r,i,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){s=!1;continue}i=r.state>hs&&r.state<vs,r.state=ii,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}s&&delete t.__transition}}function Oh(t){return this.each(function(){si(this,t)})}function qh(t,e){var n,r;return function(){var i=ye(this,t),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Hh(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=ye(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=o;break}u===l&&i.push(o)}s.tween=i}}function Xh(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=ue(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?qh:Hh)(n,t,e))}function Ds(t,e,n){var r=t._id;return t.each(function(){var i=ye(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return ue(i,r).value[e]}}function Ko(t,e){var n;return(typeof e=="number"?We:e instanceof kr?ma:(n=kr(e))?(e=n,ma):$h)(t,e)}function Yh(t){return function(){this.removeAttribute(t)}}function Bh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Vh(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===r?s:s=e(r=a,n)}}function Uh(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?s:s=e(r=a,n)}}function Wh(t,e,n){var r,i,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),u=o+"",a===u?null:a===r&&u===i?s:(i=u,s=e(r=a,o)))}}function Kh(t,e,n){var r,i,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),u=o+"",a===u?null:a===r&&u===i?s:(i=u,s=e(r=a,o)))}}function Gh(t,e){var n=Si(t),r=n==="transform"?Mh:Ko;return this.attrTween(t,typeof e=="function"?(n.local?Kh:Wh)(n,r,Ds(this,"attr."+t,e)):e==null?(n.local?Bh:Yh)(n):(n.local?Uh:Vh)(n,r,e))}function Zh(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Qh(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function jh(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Qh(t,s)),n}return i._value=e,i}function Jh(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Zh(t,s)),n}return i._value=e,i}function tv(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Si(t);return this.tween(n,(r.local?jh:Jh)(r,e))}function ev(t,e){return function(){Fs(this,t).delay=+e.apply(this,arguments)}}function nv(t,e){return e=+e,function(){Fs(this,t).delay=e}}function rv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ev:nv)(e,t)):ue(this.node(),e).delay}function iv(t,e){return function(){ye(this,t).duration=+e.apply(this,arguments)}}function sv(t,e){return e=+e,function(){ye(this,t).duration=e}}function av(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?iv:sv)(e,t)):ue(this.node(),e).duration}function ov(t,e){if(typeof e!="function")throw new Error;return function(){ye(this,t).ease=e}}function lv(t){var e=this._id;return arguments.length?this.each(ov(e,t)):ue(this.node(),e).ease}function uv(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ye(this,t).ease=n}}function cv(t){if(typeof t!="function")throw new Error;return this.each(uv(this._id,t))}function fv(t){typeof t!="function"&&(t=Mo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],u,l=0;l<a;++l)(u=s[l])&&t.call(u,u.__data__,l,s)&&o.push(u);return new Fe(r,this._parents,this._name,this._id)}function hv(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var u=e[o],l=n[o],c=u.length,d=a[o]=new Array(c),f,v=0;v<c;++v)(f=u[v]||l[v])&&(d[v]=f);for(;o<r;++o)a[o]=e[o];return new Fe(a,this._parents,this._name,this._id)}function vv(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function dv(t,e,n){var r,i,s=vv(e)?Fs:ye;return function(){var a=s(this,t),o=a.on;o!==r&&(i=(r=o).copy()).on(e,n),a.on=i}}function pv(t,e){var n=this._id;return arguments.length<2?ue(this.node(),n).on.on(t):this.each(dv(n,t,e))}function _v(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function gv(){return this.on("end.remove",_v(this._id))}function mv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ss(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],u=o.length,l=s[a]=new Array(u),c,d,f=0;f<u;++f)(c=o[f])&&(d=t.call(c,c.__data__,f,o))&&("__data__"in c&&(d.__data__=c.__data__),l[f]=d,Ii(l[f],e,n,f,l,ue(c,n)));return new Fe(s,this._parents,e,n)}function yv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=To(t));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var u=r[o],l=u.length,c,d=0;d<l;++d)if(c=u[d]){for(var f=t.call(c,c.__data__,d,u),v,m=ue(c,n),g=0,p=f.length;g<p;++g)(v=f[g])&&Ii(v,e,n,g,f,m);s.push(f),a.push(c)}return new Fe(s,a,e,n)}var xv=Sr.prototype.constructor;function wv(){return new xv(this._groups,this._parents)}function bv(t,e){var n,r,i;return function(){var s=Bn(this,t),a=(this.style.removeProperty(t),Bn(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}function Go(t){return function(){this.style.removeProperty(t)}}function $v(t,e,n){var r,i=n+"",s;return function(){var a=Bn(this,t);return a===i?null:a===r?s:s=e(r=a,n)}}function Ev(t,e,n){var r,i,s;return function(){var a=Bn(this,t),o=n(this),u=o+"";return o==null&&(u=o=(this.style.removeProperty(t),Bn(this,t))),a===u?null:a===r&&u===i?s:(i=u,s=e(r=a,o))}}function kv(t,e){var n,r,i,s="style."+e,a="end."+s,o;return function(){var u=ye(this,t),l=u.on,c=u.value[s]==null?o||(o=Go(e)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(a,i=c),u.on=r}}function Tv(t,e,n){var r=(t+="")=="transform"?Th:Ko;return e==null?this.styleTween(t,bv(t,r)).on("end.style."+t,Go(t)):typeof e=="function"?this.styleTween(t,Ev(t,r,Ds(this,"style."+t,e))).each(kv(this._id,t)):this.styleTween(t,$v(t,r,e),n).on("end.style."+t,null)}function Mv(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function zv(t,e,n){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Mv(t,a,n)),r}return s._value=e,s}function Av(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,zv(t,e,n??""))}function Nv(t){return function(){this.textContent=t}}function Sv(t){return function(){var e=t(this);this.textContent=e??""}}function Cv(t){return this.tween("text",typeof t=="function"?Sv(Ds(this,"text",t)):Nv(t==null?"":t+""))}function Iv(t){return function(e){this.textContent=t.call(this,e)}}function Pv(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Iv(i)),e}return r._value=t,r}function Rv(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Pv(t))}function Fv(){for(var t=this._name,e=this._id,n=Zo(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,u,l=0;l<o;++l)if(u=a[l]){var c=ue(u,e);Ii(u,t,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Fe(r,this._parents,t,n)}function Dv(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},u={value:function(){--i===0&&s()}};n.each(function(){var l=ye(this,r),c=l.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(u)),l.on=e}),i===0&&s()})}var Lv=0;function Fe(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Zo(){return++Lv}var Ee=Sr.prototype;Fe.prototype={constructor:Fe,select:mv,selectAll:yv,selectChild:Ee.selectChild,selectChildren:Ee.selectChildren,filter:fv,merge:hv,selection:wv,transition:Fv,call:Ee.call,nodes:Ee.nodes,node:Ee.node,size:Ee.size,empty:Ee.empty,each:Ee.each,on:pv,attr:Gh,attrTween:tv,style:Tv,styleTween:Av,text:Cv,textTween:Rv,remove:gv,tween:Xh,delay:rv,duration:av,ease:lv,easeVarying:cv,end:Dv,[Symbol.iterator]:Ee[Symbol.iterator]};function Ov(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var qv={time:null,delay:0,duration:250,ease:Ov};function Hv(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Xv(t){var e,n;t instanceof Fe?(e=t._id,t=t._name):(e=Zo(),(n=qv).time=Ps(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,u,l=0;l<o;++l)(u=a[l])&&Ii(u,t,e,l,a,n||Hv(u,e));return new Fe(r,this._parents,t,e)}Sr.prototype.interrupt=Oh;Sr.prototype.transition=Xv;const ds=Math.PI,ps=2*ds,on=1e-6,Yv=ps-on;function Qo(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Bv(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Qo;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Vv{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Qo:Bv(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,u=r-e,l=i-n,c=a-e,d=o-n,f=c*c+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>on)if(!(Math.abs(d*u-l*c)>on)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-a,m=i-o,g=u*u+l*l,p=v*v+m*m,_=Math.sqrt(g),w=Math.sqrt(f),N=s*Math.tan((ds-Math.acos((g+f-p)/(2*_*w)))/2),y=N/w,A=N/_;Math.abs(y-1)>on&&this._append`L${e+y*c},${n+y*d}`,this._append`A${s},${s},0,0,${+(d*v>c*m)},${this._x1=e+A*u},${this._y1=n+A*l}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),u=r*Math.sin(i),l=e+o,c=n+u,d=1^a,f=a?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>on||Math.abs(this._y1-c)>on)&&this._append`L${l},${c}`,r&&(f<0&&(f=f%ps+ps),f>Yv?this._append`A${r},${r},0,1,${d},${e-o},${n-u}A${r},${r},0,1,${d},${this._x1=l},${this._y1=c}`:f>on&&this._append`A${r},${r},0,${+(f>=ds)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Uv(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var s,a=n.length,o,u=0,l=0;for(s=0;s<a;++s)o=n[s],u+=o.x,l+=o.y;for(u=(u/a-t)*r,l=(l/a-e)*r,s=0;s<a;++s)o=n[s],o.x-=u,o.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(t=+s,i):t},i.y=function(s){return arguments.length?(e=+s,i):e},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Wv(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return jo(this.cover(e,n),e,n,t)}function jo(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s=t._root,a={data:r},o=t._x0,u=t._y0,l=t._x1,c=t._y1,d,f,v,m,g,p,_,w;if(!s)return t._root=a,t;for(;s.length;)if((g=e>=(d=(o+l)/2))?o=d:l=d,(p=n>=(f=(u+c)/2))?u=f:c=f,i=s,!(s=s[_=p<<1|g]))return i[_]=a,t;if(v=+t._x.call(null,s.data),m=+t._y.call(null,s.data),e===v&&n===m)return a.next=s,i?i[_]=a:t._root=a,t;do i=i?i[_]=new Array(4):t._root=new Array(4),(g=e>=(d=(o+l)/2))?o=d:l=d,(p=n>=(f=(u+c)/2))?u=f:c=f;while((_=p<<1|g)===(w=(m>=f)<<1|v>=d));return i[w]=s,i[_]=a,t}function Kv(t){var e,n,r=t.length,i,s,a=new Array(r),o=new Array(r),u=1/0,l=1/0,c=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(a[n]=i,o[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>d&&(d=s));if(u>c||l>d)return this;for(this.cover(u,l).cover(c,d),n=0;n<r;++n)jo(this,a[n],o[n],t[n]);return this}function Gv(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else{for(var a=i-n||1,o=this._root,u,l;n>t||t>=i||r>e||e>=s;)switch(l=(e<r)<<1|t<n,u=new Array(4),u[l]=o,o=u,a*=2,l){case 0:i=n+a,s=r+a;break;case 1:n=i-a,s=r+a;break;case 2:i=n+a,r=s-a;break;case 3:n=i-a,r=s-a;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Zv(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Qv(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Mt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function jv(t,e,n){var r,i=this._x0,s=this._y0,a,o,u,l,c=this._x1,d=this._y1,f=[],v=this._root,m,g;for(v&&f.push(new Mt(v,i,s,c,d)),n==null?n=1/0:(i=t-n,s=e-n,c=t+n,d=e+n,n*=n);m=f.pop();)if(!(!(v=m.node)||(a=m.x0)>c||(o=m.y0)>d||(u=m.x1)<i||(l=m.y1)<s))if(v.length){var p=(a+u)/2,_=(o+l)/2;f.push(new Mt(v[3],p,_,u,l),new Mt(v[2],a,_,p,l),new Mt(v[1],p,o,u,_),new Mt(v[0],a,o,p,_)),(g=(e>=_)<<1|t>=p)&&(m=f[f.length-1],f[f.length-1]=f[f.length-1-g],f[f.length-1-g]=m)}else{var w=t-+this._x.call(null,v.data),N=e-+this._y.call(null,v.data),y=w*w+N*N;if(y<n){var A=Math.sqrt(n=y);i=t-A,s=e-A,c=t+A,d=e+A,r=v.data}}return r}function Jv(t){if(isNaN(c=+this._x.call(null,t))||isNaN(d=+this._y.call(null,t)))return this;var e,n=this._root,r,i,s,a=this._x0,o=this._y0,u=this._x1,l=this._y1,c,d,f,v,m,g,p,_;if(!n)return this;if(n.length)for(;;){if((m=c>=(f=(a+u)/2))?a=f:u=f,(g=d>=(v=(o+l)/2))?o=v:l=v,e=n,!(n=n[p=g<<1|m]))return this;if(!n.length)break;(e[p+1&3]||e[p+2&3]||e[p+3&3])&&(r=e,_=p)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):e?(s?e[p]=s:delete e[p],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[_]=n:this._root=n),this):(this._root=s,this)}function td(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function ed(){return this._root}function nd(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function rd(t){var e=[],n,r=this._root,i,s,a,o,u;for(r&&e.push(new Mt(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,s=n.x0,a=n.y0,o=n.x1,u=n.y1)&&r.length){var l=(s+o)/2,c=(a+u)/2;(i=r[3])&&e.push(new Mt(i,l,c,o,u)),(i=r[2])&&e.push(new Mt(i,s,c,l,u)),(i=r[1])&&e.push(new Mt(i,l,a,o,c)),(i=r[0])&&e.push(new Mt(i,s,a,l,c))}return this}function id(t){var e=[],n=[],r;for(this._root&&e.push(new Mt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,a=r.x0,o=r.y0,u=r.x1,l=r.y1,c=(a+u)/2,d=(o+l)/2;(s=i[0])&&e.push(new Mt(s,a,o,c,d)),(s=i[1])&&e.push(new Mt(s,c,o,u,d)),(s=i[2])&&e.push(new Mt(s,a,d,c,l)),(s=i[3])&&e.push(new Mt(s,c,d,u,l))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function sd(t){return t[0]}function ad(t){return arguments.length?(this._x=t,this):this._x}function od(t){return t[1]}function ld(t){return arguments.length?(this._y=t,this):this._y}function Ls(t,e,n){var r=new Os(e??sd,n??od,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Os(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function ka(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var At=Ls.prototype=Os.prototype;At.copy=function(){var t=new Os(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=ka(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=ka(r));return t};At.add=Wv;At.addAll=Kv;At.cover=Gv;At.data=Zv;At.extent=Qv;At.find=jv;At.remove=Jv;At.removeAll=td;At.root=ed;At.size=nd;At.visit=rd;At.visitAfter=id;At.x=ad;At.y=ld;function zt(t){return function(){return t}}function Ke(t){return(t()-.5)*1e-6}function ud(t){return t.x+t.vx}function cd(t){return t.y+t.vy}function fd(t){var e,n,r,i=1,s=1;typeof t!="function"&&(t=zt(t==null?1:+t));function a(){for(var l,c=e.length,d,f,v,m,g,p,_=0;_<s;++_)for(d=Ls(e,ud,cd).visitAfter(o),l=0;l<c;++l)f=e[l],g=n[f.index],p=g*g,v=f.x+f.vx,m=f.y+f.vy,d.visit(w);function w(N,y,A,P,I){var D=N.data,j=N.r,V=g+j;if(D){if(D.index>f.index){var J=v-D.x-D.vx,ft=m-D.y-D.vy,st=J*J+ft*ft;st<V*V&&(J===0&&(J=Ke(r),st+=J*J),ft===0&&(ft=Ke(r),st+=ft*ft),st=(V-(st=Math.sqrt(st)))/st*i,f.vx+=(J*=st)*(V=(j*=j)/(p+j)),f.vy+=(ft*=st)*V,D.vx-=J*(V=1-V),D.vy-=ft*V)}return}return y>v+V||P<v-V||A>m+V||I<m-V}}function o(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(e){var l,c=e.length,d;for(n=new Array(c),l=0;l<c;++l)d=e[l],n[d.index]=+t(d,l,e)}}return a.initialize=function(l,c){e=l,r=c,u()},a.iterations=function(l){return arguments.length?(s=+l,a):s},a.strength=function(l){return arguments.length?(i=+l,a):i},a.radius=function(l){return arguments.length?(t=typeof l=="function"?l:zt(+l),u(),a):t},a}function hd(t){return t.index}function Ta(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function vd(t){var e=hd,n=d,r,i=zt(30),s,a,o,u,l,c=1;t==null&&(t=[]);function d(p){return 1/Math.min(o[p.source.index],o[p.target.index])}function f(p){for(var _=0,w=t.length;_<c;++_)for(var N=0,y,A,P,I,D,j,V;N<w;++N)y=t[N],A=y.source,P=y.target,I=P.x+P.vx-A.x-A.vx||Ke(l),D=P.y+P.vy-A.y-A.vy||Ke(l),j=Math.sqrt(I*I+D*D),j=(j-s[N])/j*p*r[N],I*=j,D*=j,P.vx-=I*(V=u[N]),P.vy-=D*V,A.vx+=I*(V=1-V),A.vy+=D*V}function v(){if(a){var p,_=a.length,w=t.length,N=new Map(a.map((A,P)=>[e(A,P,a),A])),y;for(p=0,o=new Array(_);p<w;++p)y=t[p],y.index=p,typeof y.source!="object"&&(y.source=Ta(N,y.source)),typeof y.target!="object"&&(y.target=Ta(N,y.target)),o[y.source.index]=(o[y.source.index]||0)+1,o[y.target.index]=(o[y.target.index]||0)+1;for(p=0,u=new Array(w);p<w;++p)y=t[p],u[p]=o[y.source.index]/(o[y.source.index]+o[y.target.index]);r=new Array(w),m(),s=new Array(w),g()}}function m(){if(a)for(var p=0,_=t.length;p<_;++p)r[p]=+n(t[p],p,t)}function g(){if(a)for(var p=0,_=t.length;p<_;++p)s[p]=+i(t[p],p,t)}return f.initialize=function(p,_){a=p,l=_,v()},f.links=function(p){return arguments.length?(t=p,v(),f):t},f.id=function(p){return arguments.length?(e=p,f):e},f.iterations=function(p){return arguments.length?(c=+p,f):c},f.strength=function(p){return arguments.length?(n=typeof p=="function"?p:zt(+p),m(),f):n},f.distance=function(p){return arguments.length?(i=typeof p=="function"?p:zt(+p),g(),f):i},f}const dd=1664525,pd=1013904223,Ma=4294967296;function _d(){let t=1;return()=>(t=(dd*t+pd)%Ma)/Ma}function gd(t){return t.x}function md(t){return t.y}var yd=10,xd=Math.PI*(3-Math.sqrt(5));function wd(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,a=.6,o=new Map,u=Rs(d),l=Nr("tick","end"),c=_d();t==null&&(t=[]);function d(){f(),l.call("tick",e),n<r&&(u.stop(),l.call("end",e))}function f(g){var p,_=t.length,w;g===void 0&&(g=1);for(var N=0;N<g;++N)for(n+=(s-n)*i,o.forEach(function(y){y(n)}),p=0;p<_;++p)w=t[p],w.fx==null?w.x+=w.vx*=a:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=a:(w.y=w.fy,w.vy=0);return e}function v(){for(var g=0,p=t.length,_;g<p;++g){if(_=t[g],_.index=g,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var w=yd*Math.sqrt(.5+g),N=g*xd;_.x=w*Math.cos(N),_.y=w*Math.sin(N)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function m(g){return g.initialize&&g.initialize(t,c),g}return v(),e={tick:f,restart:function(){return u.restart(d),e},stop:function(){return u.stop(),e},nodes:function(g){return arguments.length?(t=g,v(),o.forEach(m),e):t},alpha:function(g){return arguments.length?(n=+g,e):n},alphaMin:function(g){return arguments.length?(r=+g,e):r},alphaDecay:function(g){return arguments.length?(i=+g,e):+i},alphaTarget:function(g){return arguments.length?(s=+g,e):s},velocityDecay:function(g){return arguments.length?(a=1-g,e):1-a},randomSource:function(g){return arguments.length?(c=g,o.forEach(m),e):c},force:function(g,p){return arguments.length>1?(p==null?o.delete(g):o.set(g,m(p)),e):o.get(g)},find:function(g,p,_){var w=0,N=t.length,y,A,P,I,D;for(_==null?_=1/0:_*=_,w=0;w<N;++w)I=t[w],y=g-I.x,A=p-I.y,P=y*y+A*A,P<_&&(D=I,_=P);return D},on:function(g,p){return arguments.length>1?(l.on(g,p),e):l.on(g)}}}function bd(){var t,e,n,r,i=zt(-30),s,a=1,o=1/0,u=.81;function l(v){var m,g=t.length,p=Ls(t,gd,md).visitAfter(d);for(r=v,m=0;m<g;++m)e=t[m],p.visit(f)}function c(){if(t){var v,m=t.length,g;for(s=new Array(m),v=0;v<m;++v)g=t[v],s[g.index]=+i(g,v,t)}}function d(v){var m=0,g,p,_=0,w,N,y;if(v.length){for(w=N=y=0;y<4;++y)(g=v[y])&&(p=Math.abs(g.value))&&(m+=g.value,_+=p,w+=p*g.x,N+=p*g.y);v.x=w/_,v.y=N/_}else{g=v,g.x=g.data.x,g.y=g.data.y;do m+=s[g.data.index];while(g=g.next)}v.value=m}function f(v,m,g,p){if(!v.value)return!0;var _=v.x-e.x,w=v.y-e.y,N=p-m,y=_*_+w*w;if(N*N/u<y)return y<o&&(_===0&&(_=Ke(n),y+=_*_),w===0&&(w=Ke(n),y+=w*w),y<a&&(y=Math.sqrt(a*y)),e.vx+=_*v.value*r/y,e.vy+=w*v.value*r/y),!0;if(v.length||y>=o)return;(v.data!==e||v.next)&&(_===0&&(_=Ke(n),y+=_*_),w===0&&(w=Ke(n),y+=w*w),y<a&&(y=Math.sqrt(a*y)));do v.data!==e&&(N=s[v.data.index]*r/y,e.vx+=_*N,e.vy+=w*N);while(v=v.next)}return l.initialize=function(v,m){t=v,n=m,c()},l.strength=function(v){return arguments.length?(i=typeof v=="function"?v:zt(+v),c(),l):i},l.distanceMin=function(v){return arguments.length?(a=v*v,l):Math.sqrt(a)},l.distanceMax=function(v){return arguments.length?(o=v*v,l):Math.sqrt(o)},l.theta=function(v){return arguments.length?(u=v*v,l):Math.sqrt(u)},l}function $d(t){var e=zt(.1),n,r,i;typeof t!="function"&&(t=zt(t==null?0:+t));function s(o){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*o}function a(){if(n){var o,u=n.length;for(r=new Array(u),i=new Array(u),o=0;o<u;++o)r[o]=isNaN(i[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return s.initialize=function(o){n=o,a()},s.strength=function(o){return arguments.length?(e=typeof o=="function"?o:zt(+o),a(),s):e},s.x=function(o){return arguments.length?(t=typeof o=="function"?o:zt(+o),a(),s):t},s}function Ed(t){var e=zt(.1),n,r,i;typeof t!="function"&&(t=zt(t==null?0:+t));function s(o){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*o}function a(){if(n){var o,u=n.length;for(r=new Array(u),i=new Array(u),o=0;o<u;++o)r[o]=isNaN(i[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return s.initialize=function(o){n=o,a()},s.strength=function(o){return arguments.length?(e=typeof o=="function"?o:zt(+o),a(),s):e},s.y=function(o){return arguments.length?(t=typeof o=="function"?o:zt(+o),a(),s):t},s}function kd(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Td(t,e){return t[0]-e[0]||t[1]-e[1]}function za(t){const e=t.length,n=[0,1];let r=2,i;for(i=2;i<e;++i){for(;r>1&&kd(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Md(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(Td),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var s=za(r),a=za(i),o=a[0]===s[0],u=a[a.length-1]===s[s.length-1],l=[];for(e=s.length-1;e>=0;--e)l.push(t[r[s[e]][2]]);for(e=+o;e<a.length-u;++e)l.push(t[r[a[e]][2]]);return l}function Cn(t){return function(){return t}}function zd(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Vv(e)}function Ad(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Jo(t){this._context=t}Jo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Nd(t){return new Jo(t)}function Sd(t){return t[0]}function Cd(t){return t[1]}function Id(t,e){var n=Cn(!0),r=null,i=Nd,s=null,a=zd(o);t=typeof t=="function"?t:t===void 0?Sd:Cn(t),e=typeof e=="function"?e:e===void 0?Cd:Cn(e);function o(u){var l,c=(u=Ad(u)).length,d,f=!1,v;for(r==null&&(s=i(v=a())),l=0;l<=c;++l)!(l<c&&n(d=u[l],l,u))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(d,l,u),+e(d,l,u));if(v)return s=null,v+""||null}return o.x=function(u){return arguments.length?(t=typeof u=="function"?u:Cn(+u),o):t},o.y=function(u){return arguments.length?(e=typeof u=="function"?u:Cn(+u),o):e},o.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Cn(!!u),o):n},o.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),o):i},o.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),o):r},o}function Aa(){}function _s(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function tl(t,e){this._context=t,this._k=(1-e)/6}tl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:_s(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:_s(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new tl(r,e)}return n.tension=function(r){return t(+r)},n})(0);function el(t,e){this._context=t,this._k=(1-e)/6}el.prototype={areaStart:Aa,areaEnd:Aa,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:_s(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Pd=(function t(e){function n(r){return new el(r,e)}return n.tension=function(r){return t(+r)},n})(0),ti=t=>()=>t;function Rd(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ie(t,e,n){this.k=t,this.x=e,this.y=n}Ie.prototype={constructor:Ie,scale:function(t){return t===1?this:new Ie(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ie(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bi=new Ie(1,0,0);Ie.prototype;function Zi(t){t.stopImmediatePropagation()}function ur(t){t.preventDefault(),t.stopImmediatePropagation()}function Fd(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Dd(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Na(){return this.__zoom||bi}function Ld(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Od(){return navigator.maxTouchPoints||"ontouchstart"in this}function qd(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function Hd(){var t=Fd,e=Dd,n=qd,r=Ld,i=Od,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],o=250,u=Sh,l=Nr("start","zoom","end"),c,d,f,v=500,m=150,g=0,p=10;function _(x){x.property("__zoom",Na).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",V).filter(i).on("touchstart.zoom",J).on("touchmove.zoom",ft).on("touchend.zoom touchcancel.zoom",st).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(x,L,E,O){var U=x.selection?x.selection():x;U.property("__zoom",Na),x!==U?A(x,L,E,O):U.interrupt().each(function(){P(this,arguments).event(O).start().zoom(null,typeof L=="function"?L.apply(this,arguments):L).end()})},_.scaleBy=function(x,L,E,O){_.scaleTo(x,function(){var U=this.__zoom.k,Z=typeof L=="function"?L.apply(this,arguments):L;return U*Z},E,O)},_.scaleTo=function(x,L,E,O){_.transform(x,function(){var U=e.apply(this,arguments),Z=this.__zoom,Q=E==null?y(U):typeof E=="function"?E.apply(this,arguments):E,S=Z.invert(Q),k=typeof L=="function"?L.apply(this,arguments):L;return n(N(w(Z,k),Q,S),U,a)},E,O)},_.translateBy=function(x,L,E,O){_.transform(x,function(){return n(this.__zoom.translate(typeof L=="function"?L.apply(this,arguments):L,typeof E=="function"?E.apply(this,arguments):E),e.apply(this,arguments),a)},null,O)},_.translateTo=function(x,L,E,O,U){_.transform(x,function(){var Z=e.apply(this,arguments),Q=this.__zoom,S=O==null?y(Z):typeof O=="function"?O.apply(this,arguments):O;return n(bi.translate(S[0],S[1]).scale(Q.k).translate(typeof L=="function"?-L.apply(this,arguments):-L,typeof E=="function"?-E.apply(this,arguments):-E),Z,a)},O,U)};function w(x,L){return L=Math.max(s[0],Math.min(s[1],L)),L===x.k?x:new Ie(L,x.x,x.y)}function N(x,L,E){var O=L[0]-E[0]*x.k,U=L[1]-E[1]*x.k;return O===x.x&&U===x.y?x:new Ie(x.k,O,U)}function y(x){return[(+x[0][0]+ +x[1][0])/2,(+x[0][1]+ +x[1][1])/2]}function A(x,L,E,O){x.on("start.zoom",function(){P(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(O).end()}).tween("zoom",function(){var U=this,Z=arguments,Q=P(U,Z).event(O),S=e.apply(U,Z),k=E==null?y(S):typeof E=="function"?E.apply(U,Z):E,$=Math.max(S[1][0]-S[0][0],S[1][1]-S[0][1]),C=U.__zoom,F=typeof L=="function"?L.apply(U,Z):L,T=u(C.invert(k).concat($/C.k),F.invert(k).concat($/F.k));return function(X){if(X===1)X=F;else{var tt=T(X),et=$/tt[2];X=new Ie(et,k[0]-tt[0]*et,k[1]-tt[1]*et)}Q.zoom(null,X)}})}function P(x,L,E){return!E&&x.__zooming||new I(x,L)}function I(x,L){this.that=x,this.args=L,this.active=0,this.sourceEvent=null,this.extent=e.apply(x,L),this.taps=0}I.prototype={event:function(x){return x&&(this.sourceEvent=x),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(x,L){return this.mouse&&x!=="mouse"&&(this.mouse[1]=L.invert(this.mouse[0])),this.touch0&&x!=="touch"&&(this.touch0[1]=L.invert(this.touch0[0])),this.touch1&&x!=="touch"&&(this.touch1[1]=L.invert(this.touch1[0])),this.that.__zoom=L,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(x){var L=Ct(this.that).datum();l.call(x,this.that,new Rd(x,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:l}),L)}};function D(x,...L){if(!t.apply(this,arguments))return;var E=P(this,L).event(x),O=this.__zoom,U=Math.max(s[0],Math.min(s[1],O.k*Math.pow(2,r.apply(this,arguments)))),Z=Ae(x);if(E.wheel)(E.mouse[0][0]!==Z[0]||E.mouse[0][1]!==Z[1])&&(E.mouse[1]=O.invert(E.mouse[0]=Z)),clearTimeout(E.wheel);else{if(O.k===U)return;E.mouse=[Z,O.invert(Z)],si(this),E.start()}ur(x),E.wheel=setTimeout(Q,m),E.zoom("mouse",n(N(w(O,U),E.mouse[0],E.mouse[1]),E.extent,a));function Q(){E.wheel=null,E.end()}}function j(x,...L){if(f||!t.apply(this,arguments))return;var E=x.currentTarget,O=P(this,L,!0).event(x),U=Ct(x.view).on("mousemove.zoom",k,!0).on("mouseup.zoom",$,!0),Z=Ae(x,E),Q=x.clientX,S=x.clientY;Do(x.view),Zi(x),O.mouse=[Z,this.__zoom.invert(Z)],si(this),O.start();function k(C){if(ur(C),!O.moved){var F=C.clientX-Q,T=C.clientY-S;O.moved=F*F+T*T>g}O.event(C).zoom("mouse",n(N(O.that.__zoom,O.mouse[0]=Ae(C,E),O.mouse[1]),O.extent,a))}function $(C){U.on("mousemove.zoom mouseup.zoom",null),Lo(C.view,O.moved),ur(C),O.event(C).end()}}function V(x,...L){if(t.apply(this,arguments)){var E=this.__zoom,O=Ae(x.changedTouches?x.changedTouches[0]:x,this),U=E.invert(O),Z=E.k*(x.shiftKey?.5:2),Q=n(N(w(E,Z),O,U),e.apply(this,L),a);ur(x),o>0?Ct(this).transition().duration(o).call(A,Q,O,x):Ct(this).call(_.transform,Q,O,x)}}function J(x,...L){if(t.apply(this,arguments)){var E=x.touches,O=E.length,U=P(this,L,x.changedTouches.length===O).event(x),Z,Q,S,k;for(Zi(x),Q=0;Q<O;++Q)S=E[Q],k=Ae(S,this),k=[k,this.__zoom.invert(k),S.identifier],U.touch0?!U.touch1&&U.touch0[2]!==k[2]&&(U.touch1=k,U.taps=0):(U.touch0=k,Z=!0,U.taps=1+!!c);c&&(c=clearTimeout(c)),Z&&(U.taps<2&&(d=k[0],c=setTimeout(function(){c=null},v)),si(this),U.start())}}function ft(x,...L){if(this.__zooming){var E=P(this,L).event(x),O=x.changedTouches,U=O.length,Z,Q,S,k;for(ur(x),Z=0;Z<U;++Z)Q=O[Z],S=Ae(Q,this),E.touch0&&E.touch0[2]===Q.identifier?E.touch0[0]=S:E.touch1&&E.touch1[2]===Q.identifier&&(E.touch1[0]=S);if(Q=E.that.__zoom,E.touch1){var $=E.touch0[0],C=E.touch0[1],F=E.touch1[0],T=E.touch1[1],X=(X=F[0]-$[0])*X+(X=F[1]-$[1])*X,tt=(tt=T[0]-C[0])*tt+(tt=T[1]-C[1])*tt;Q=w(Q,Math.sqrt(X/tt)),S=[($[0]+F[0])/2,($[1]+F[1])/2],k=[(C[0]+T[0])/2,(C[1]+T[1])/2]}else if(E.touch0)S=E.touch0[0],k=E.touch0[1];else return;E.zoom("touch",n(N(Q,S,k),E.extent,a))}}function st(x,...L){if(this.__zooming){var E=P(this,L).event(x),O=x.changedTouches,U=O.length,Z,Q;for(Zi(x),f&&clearTimeout(f),f=setTimeout(function(){f=null},v),Z=0;Z<U;++Z)Q=O[Z],E.touch0&&E.touch0[2]===Q.identifier?delete E.touch0:E.touch1&&E.touch1[2]===Q.identifier&&delete E.touch1;if(E.touch1&&!E.touch0&&(E.touch0=E.touch1,delete E.touch1),E.touch0)E.touch0[1]=this.__zoom.invert(E.touch0[0]);else if(E.end(),E.taps===2&&(Q=Ae(Q,this),Math.hypot(d[0]-Q[0],d[1]-Q[1])<p)){var S=Ct(this).on("dblclick.zoom");S&&S.apply(this,arguments)}}}return _.wheelDelta=function(x){return arguments.length?(r=typeof x=="function"?x:ti(+x),_):r},_.filter=function(x){return arguments.length?(t=typeof x=="function"?x:ti(!!x),_):t},_.touchable=function(x){return arguments.length?(i=typeof x=="function"?x:ti(!!x),_):i},_.extent=function(x){return arguments.length?(e=typeof x=="function"?x:ti([[+x[0][0],+x[0][1]],[+x[1][0],+x[1][1]]]),_):e},_.scaleExtent=function(x){return arguments.length?(s[0]=+x[0],s[1]=+x[1],_):[s[0],s[1]]},_.translateExtent=function(x){return arguments.length?(a[0][0]=+x[0][0],a[1][0]=+x[1][0],a[0][1]=+x[0][1],a[1][1]=+x[1][1],_):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},_.constrain=function(x){return arguments.length?(n=x,_):n},_.duration=function(x){return arguments.length?(o=+x,_):o},_.interpolate=function(x){return arguments.length?(u=x,_):u},_.on=function(){var x=l.on.apply(l,arguments);return x===l?_:x},_.clickDistance=function(x){return arguments.length?(g=(x=+x)*x,_):Math.sqrt(g)},_.tapDistance=function(x){return arguments.length?(p=+x,_):p},_}var Xd=W('<span class="toggle-sub svelte-nsv0zx">close</span>'),Yd=W('<span class="toggle-sub svelte-nsv0zx">explore comps</span>'),Bd=W('<span> </span> <span class="dot svelte-nsv0zx">•</span> <span> </span>',1),Vd=W("<span> </span>"),Ud=W('<span class="tiny svelte-nsv0zx"> </span>'),Wd=W('<span class="tiny svelte-nsv0zx"> </span>'),Kd=W('<div class="callout warning svelte-nsv0zx"> </div>'),Gd=W('<div class="callout error svelte-nsv0zx"> </div>'),Zd=W('<div class="callout svelte-nsv0zx">No clusters met the minimum size. Try lowering <span class="mono svelte-nsv0zx">min</span> or increasing the sample.</div>'),Qd=W('<div class="bar svelte-nsv0zx"></div>'),jd=W('<span class="def"> </span>'),Jd=W('<div class="defining svelte-nsv0zx"></div>'),tp=W('<div class="defining muted svelte-nsv0zx">(mixed)</div>'),ep=W('<button><div class="cluster-top svelte-nsv0zx"><div class="cluster-id svelte-nsv0zx"> </div> <div class="cluster-size svelte-nsv0zx"> </div></div> <div class="cluster-stats svelte-nsv0zx"><span class="avg svelte-nsv0zx"> </span> <span> </span> <span class="share svelte-nsv0zx"> </span> <span class="tiny svelte-nsv0zx"> </span></div> <div class="hist svelte-nsv0zx"></div> <!></button>'),np=W("<button> </button>"),rp=W('<div class="sig svelte-nsv0zx"><div class="sig-title svelte-nsv0zx">Signature</div> <div class="sig-chips svelte-nsv0zx"></div></div>'),ip=W('<img class="icon svelte-nsv0zx" alt="" loading="lazy"/>'),sp=W("<div></div>"),ap=W('<button class="token svelte-nsv0zx"><!> <div class="token-main svelte-nsv0zx"><div class="name svelte-nsv0zx"> </div> <div class="sub svelte-nsv0zx"><span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="muted svelte-nsv0zx"> </span></div></div> <div class="plus svelte-nsv0zx">+</div></button>'),op=W('<img class="icon svelte-nsv0zx" alt="" loading="lazy"/>'),lp=W("<div></div>"),up=W('<button class="token svelte-nsv0zx"><!> <div class="token-main svelte-nsv0zx"><div class="name svelte-nsv0zx"> </div> <div class="sub svelte-nsv0zx"><span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="muted svelte-nsv0zx"> </span></div></div> <div class="plus svelte-nsv0zx">+</div></button>'),cp=W('<img class="icon svelte-nsv0zx" alt="" loading="lazy"/>'),fp=W("<div></div>"),hp=W('<button class="token svelte-nsv0zx"><!> <div class="token-main svelte-nsv0zx"><div class="name svelte-nsv0zx"> </div> <div class="sub svelte-nsv0zx"><span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="muted svelte-nsv0zx"> </span></div></div> <div class="plus svelte-nsv0zx">+</div></button>'),vp=W('<div class="group"><div class="group-title svelte-nsv0zx">Items</div> <div class="tokens svelte-nsv0zx"></div></div>'),dp=W('<div class="details-header svelte-nsv0zx"><div class="details-title svelte-nsv0zx"> <span class="details-sub svelte-nsv0zx"> </span></div> <div class="details-actions svelte-nsv0zx"><button class="action svelte-nsv0zx">Add</button> <button class="action primary svelte-nsv0zx">Explore</button></div></div> <div class="details-grid svelte-nsv0zx"><div class="metric svelte-nsv0zx"><div class="k svelte-nsv0zx">Avg</div> <div class="v svelte-nsv0zx"> </div></div> <div class="metric svelte-nsv0zx"><div class="k svelte-nsv0zx">Δ vs base</div> <div> </div></div> <div class="metric svelte-nsv0zx"><div class="k svelte-nsv0zx">Top4</div> <div class="v svelte-nsv0zx"> </div></div> <div class="metric svelte-nsv0zx"><div class="k svelte-nsv0zx">Win</div> <div class="v svelte-nsv0zx"> </div></div></div> <!> <div class="token-groups svelte-nsv0zx"><div class="group"><div class="group-title svelte-nsv0zx">Units</div> <div class="tokens svelte-nsv0zx"></div></div> <div class="group"><div class="group-title svelte-nsv0zx">Traits</div> <div class="tokens svelte-nsv0zx"></div></div> <!></div>',1),pp=W('<div class="details-empty svelte-nsv0zx">Select a cluster to inspect defining units, traits, and item prevalence.</div>'),_p=W('<div class="panel svelte-nsv0zx"><div class="panel-header svelte-nsv0zx"><div class="panel-title svelte-nsv0zx">Cluster exploration</div> <div class="panel-meta svelte-nsv0zx"><!></div></div> <div class="controls svelte-nsv0zx"><label class="control svelte-nsv0zx"><span class="svelte-nsv0zx">k</span> <input type="number" min="2" max="50" step="1" class="svelte-nsv0zx"/></label> <label class="checkbox svelte-nsv0zx"><input type="checkbox" class="svelte-nsv0zx"/> <span>traits</span></label> <label class="checkbox svelte-nsv0zx"><input type="checkbox" class="svelte-nsv0zx"/> <span>items</span></label> <label class="control svelte-nsv0zx"><span class="svelte-nsv0zx">min</span> <input type="number" min="1" max="5000" step="10" class="svelte-nsv0zx"/></label> <button class="run svelte-nsv0zx"><!></button></div> <div class="subcontrols svelte-nsv0zx"><div class="subcontrols-left"><label class="select svelte-nsv0zx"><span>Sort</span> <select class="svelte-nsv0zx"><option>best avg</option><option>best top4</option><option>most played</option></select></label></div> <div class="subcontrols-right"><!> <!></div></div> <!> <!> <!> <div class="content svelte-nsv0zx"><div class="cluster-list svelte-nsv0zx"></div> <div class="details svelte-nsv0zx"><!></div></div></div>'),gp=W('<div><button class="toggle svelte-nsv0zx" aria-label="Toggle cluster explorer"><span class="toggle-title svelte-nsv0zx">Clusters</span> <!></button> <!></div>');function mp(t,e){oe(e,!1);const n=()=>te(bn,"$selectedTokens",r),[r,i]=Oe(),s=ot(),a=ot(),o=ot(),u=ot(),l=ot();let c=ot(!1),d=ot(!1),f=ot(null),v=ot(null),m=ot(null),g=ot("avg"),p=ot({n_clusters:15,use_units:!0,use_traits:!0,use_items:!0,min_token_freq:100,min_cluster_size:50,top_k_tokens:10,random_state:42}),_=ot(""),w=ot(!1);function N(){if(B(c,!h(c)),!h(c)){B(m,null),B(w,!1),sa();return}h(v)||y()}async function y(){B(d,!0),B(f,null),B(w,!1),B(m,null),sa(),B(_,h(s));try{B(v,await Vu(n(),h(p)))}catch($){B(f,$?.message??String($))}finally{B(d,!1)}}function A($){B(m,$.cluster_id),Qu($.signature_tokens??[])}function P($){return cc($,Ce)}function I($){const C=St($);return C==="unknown"||C==="equipped"?null:Eo(C,$.slice(2))}function D($){const C=St($);return C==="equipped"?"item":C}function j(){h(l)?.signature_tokens?.length&&Ku(h(l).signature_tokens)}function V(){h(l)?.signature_tokens?.length&&Wu(h(l).signature_tokens)}function J($){pi($)}function ft($){return Math.max(1,...$??[1])}function st($){return`${Math.round(($??0)*100)}%`}function x($){return $==null?"—":$>=9.95?"×10+":`×${$.toFixed(2)}`}wt(()=>n(),()=>{B(s,n().slice().sort().join(","))}),wt(()=>(h(c),h(_),h(s)),()=>{h(c)&&h(_)&&h(s)!==h(_)&&B(w,!0)}),wt(()=>h(v),()=>{B(a,h(v)?.clusters??[])}),wt(()=>h(v),()=>{B(o,h(v)?.meta?.warning??null)}),wt(()=>(h(a),h(g)),()=>{B(u,(()=>{const $=[...h(a)];return h(g)==="size"?$.sort((C,F)=>F.size-C.size):h(g)==="top4"?$.sort((C,F)=>F.top4_rate-C.top4_rate):$.sort((C,F)=>C.avg_placement-F.avg_placement),$})())}),wt(()=>(h(u),h(m)),()=>{B(l,h(u).find($=>$.cluster_id===h(m))??null)}),wn(),me();var L=gp();let E;var O=b(L),U=M(b(O),2);{var Z=$=>{var C=Xd();H($,C)},Q=$=>{var C=Yd();H($,C)};dt(U,$=>{h(c)?$(Z):$(Q,!1)})}var S=M(O,2);{var k=$=>{var C=_p(),F=b(C),T=M(b(F),2),X=b(T);{var tt=Y=>{var q=Bd(),pt=Se(q),xe=b(pt),fe=M(pt,4),Lt=b(fe);rt((we,er,en)=>{G(xe,`${we??""} games`),Rn(fe,`color: ${er??""}`),G(Lt,`${en??""} avg`)},[()=>(h(v),z(()=>h(v).base.n.toLocaleString())),()=>(re(ke),h(v),z(()=>ke(h(v).base.avg_placement))),()=>(h(v),z(()=>h(v).base.avg_placement.toFixed(2)))]),H(Y,q)},et=Y=>{var q=Vd(),pt=b(q);rt(()=>G(pt,`${n(),z(()=>n().length)??""} filters`)),H(Y,q)};dt(X,Y=>{h(v),z(()=>h(v)?.base)?Y(tt):Y(et,!1)})}var ut=M(F,2),ct=b(ut),_t=M(b(ct),2),yt=M(ct,2),tn=b(yt),$n=M(yt,2),Qn=b($n),En=M($n,2),Vt=M(b(En),2),ee=M(En,2),R=b(ee);{var ce=Y=>{var q=Xi("Running…");H(Y,q)},Ir=Y=>{var q=hi(),pt=Se(q);{var xe=Lt=>{var we=Xi("Refresh");H(Lt,we)},fe=Lt=>{var we=Xi("Run");H(Lt,we)};dt(pt,Lt=>{h(w)?Lt(xe):Lt(fe,!1)},!0)}H(Y,q)};dt(R,Y=>{h(d)?Y(ce):Y(Ir,!1)})}var Pr=M(ut,2),Rr=b(Pr),Pi=b(Rr),Fr=M(b(Pi),2);rt(()=>{h(g),au(()=>{})});var jn=b(Fr);jn.value=jn.__value="avg";var Jn=M(jn);Jn.value=Jn.__value="top4";var Dr=M(Jn);Dr.value=Dr.__value="size";var kn=M(Rr,2),Lr=b(kn);{var Ri=Y=>{var q=Ud(),pt=b(q);rt(()=>G(pt,`${h(v),z(()=>h(v).meta.compute_ms)??""}ms`)),H(Y,q)};dt(Lr,Y=>{h(v),z(()=>h(v)?.meta?.compute_ms)&&Y(Ri)})}var Fi=M(Lr,2);{var Or=Y=>{var q=Wd(),pt=b(q);rt(()=>G(pt,`${h(v),z(()=>h(v).meta.features_used)??""} features`)),H(Y,q)};dt(Fi,Y=>{h(v),z(()=>h(v)?.meta?.features_used)&&Y(Or)})}var tr=M(Pr,2);{var qr=Y=>{var q=Kd(),pt=b(q);rt(()=>G(pt,h(o))),H(Y,q)};dt(tr,Y=>{h(o)&&Y(qr)})}var Ut=M(tr,2);{var nl=Y=>{var q=Gd(),pt=b(q);rt(()=>G(pt,`Failed to load clusters: ${h(f)??""}`)),H(Y,q)};dt(Ut,Y=>{h(f)&&Y(nl)})}var qs=M(Ut,2);{var rl=Y=>{var q=Zd();H(Y,q)};dt(qs,Y=>{h(d),h(v),h(u),h(o),z(()=>!h(d)&&h(v)&&h(u).length===0&&!h(o))&&Y(rl)})}var il=M(qs,2),Hs=b(il);ze(Hs,5,()=>h(u),Me,(Y,q)=>{var pt=ep();let xe;var fe=b(pt),Lt=b(fe),we=b(Lt),er=M(Lt,2),en=b(er),nr=M(fe,2),Tn=b(nr),Hr=b(Tn),Mn=M(Tn,2);let Xr;var Yr=b(Mn),rr=M(Mn,2),Br=b(rr),Di=M(rr,2),Vr=b(Di),Ur=M(nr,2);ze(Ur,5,()=>(h(q),z(()=>h(q).placement_hist)),Me,(Wt,Kt,nn)=>{var be=Qd();rt((qe,He)=>Rn(be,`
                                            height: ${qe??""}%;
                                            background: ${He??""};
                                        `),[()=>(h(Kt),h(q),z(()=>Math.max(2,h(Kt)/ft(h(q).placement_hist)*100))),()=>(re(ke),z(()=>ke(nn+1)))]),H(Wt,be)});var Li=M(Ur,2);{var Oi=Wt=>{var Kt=Jd();ze(Kt,5,()=>(h(q),z(()=>h(q).defining_units)),Me,(nn,be,qe)=>{var He=jd(),Wr=b(He);rt(Hi=>G(Wr,`${Hi??""}${h(q),z(()=>qe<h(q).defining_units.length-1?", ":"")??""}`),[()=>(h(be),z(()=>P(h(be).token)))]),H(nn,He)}),H(Wt,Kt)},qi=Wt=>{var Kt=tp();H(Wt,Kt)};dt(Li,Wt=>{h(q),z(()=>h(q).defining_units?.length)?Wt(Oi):Wt(qi,!1)})}rt((Wt,Kt,nn,be,qe,He)=>{xe=xt(pt,1,"cluster svelte-nsv0zx",null,xe,{selected:h(q).cluster_id===h(m)}),G(we,`#${h(q),z(()=>h(q).cluster_id)??""}`),G(en,Wt),Rn(Tn,`color: ${Kt??""}`),G(Hr,nn),Xr=xt(Mn,1,"delta svelte-nsv0zx",null,Xr,{pos:h(q).delta_vs_base<0,neg:h(q).delta_vs_base>0}),G(Yr,`${h(q),z(()=>h(q).delta_vs_base>0?"+":"")??""}${be??""}`),G(Br,`${qe??""}%`),G(Vr,`top4 ${He??""}`)},[()=>(h(q),z(()=>h(q).size.toLocaleString())),()=>(re(ke),h(q),z(()=>ke(h(q).avg_placement))),()=>(h(q),z(()=>h(q).avg_placement.toFixed(2))),()=>(h(q),z(()=>h(q).delta_vs_base.toFixed(2))),()=>(h(q),z(()=>Math.round(h(q).share*100))),()=>(h(q),z(()=>st(h(q).top4_rate)))]),vt("click",pt,()=>A(h(q))),H(Y,pt)});var sl=M(Hs,2),al=b(sl);{var ol=Y=>{var q=dp(),pt=Se(q),xe=b(pt),fe=b(xe),Lt=M(fe),we=b(Lt),er=M(xe,2),en=b(er),nr=M(en,2),Tn=M(pt,2),Hr=b(Tn),Mn=M(b(Hr),2),Xr=b(Mn),Yr=M(Hr,2),rr=M(b(Yr),2);let Br;var Di=b(rr),Vr=M(Yr,2),Ur=M(b(Vr),2),Li=b(Ur),Oi=M(Vr,2),qi=M(b(Oi),2),Wt=b(qi),Kt=M(Tn,2);{var nn=Ot=>{var K=rp(),qt=M(b(K),2);ze(qt,5,()=>(h(l),z(()=>h(l).signature_tokens)),Me,(ne,at)=>{var Nt=np(),Xe=b(Nt);rt(($e,rn)=>{xt(Nt,1,`sig-chip ${$e??""}`,"svelte-nsv0zx"),G(Xe,rn)},[()=>(h(at),z(()=>D(h(at)))),()=>(h(at),z(()=>P(h(at))))]),vt("click",Nt,()=>J(h(at))),H(ne,Nt)}),H(Ot,K)};dt(Kt,Ot=>{h(l),z(()=>h(l).signature_tokens?.length)&&Ot(nn)})}var be=M(Kt,2),qe=b(be),He=M(b(qe),2);ze(He,5,()=>(h(l),z(()=>h(l).top_units)),Me,(Ot,K)=>{var qt=ap(),ne=b(qt);{var at=gt=>{var mt=ip();rt(Ht=>Yi(mt,"src",Ht),[()=>(h(K),z(()=>I(h(K).token)))]),vt("error",mt,()=>ei(St(h(K).token),h(K).token.slice(2))),H(gt,mt)},Nt=gt=>{var mt=sp();rt(Ht=>xt(mt,1,`fallback ${Ht??""}`,"svelte-nsv0zx"),[()=>(h(K),z(()=>D(h(K).token)))]),H(gt,mt)};dt(ne,gt=>{h(K),re(an),re(St),z(()=>I(h(K).token)&&!an(St(h(K).token),h(K).token.slice(2)))?gt(at):gt(Nt,!1)})}var Xe=M(ne,2),$e=b(Xe),rn=b($e),ir=M($e,2),Ye=b(ir),sr=b(Ye),sn=M(Ye,4),zn=b(sn),ar=M(sn,4),An=b(ar);rt((gt,mt,Ht,Gt)=>{G(rn,gt),G(sr,mt),G(zn,Ht),G(An,`base ${Gt??""}`)},[()=>(h(K),z(()=>P(h(K).token))),()=>(h(K),z(()=>st(h(K).pct))),()=>(h(K),z(()=>x(h(K).lift))),()=>(h(K),z(()=>st(h(K).base_pct)))]),vt("click",qt,()=>J(h(K).token)),H(Ot,qt)});var Wr=M(qe,2),Hi=M(b(Wr),2);ze(Hi,5,()=>(h(l),z(()=>h(l).top_traits)),Me,(Ot,K)=>{var qt=up(),ne=b(qt);{var at=gt=>{var mt=op();rt(Ht=>Yi(mt,"src",Ht),[()=>(h(K),z(()=>I(h(K).token)))]),vt("error",mt,()=>ei(St(h(K).token),h(K).token.slice(2))),H(gt,mt)},Nt=gt=>{var mt=lp();rt(Ht=>xt(mt,1,`fallback ${Ht??""}`,"svelte-nsv0zx"),[()=>(h(K),z(()=>D(h(K).token)))]),H(gt,mt)};dt(ne,gt=>{h(K),re(an),re(St),z(()=>I(h(K).token)&&!an(St(h(K).token),h(K).token.slice(2)))?gt(at):gt(Nt,!1)})}var Xe=M(ne,2),$e=b(Xe),rn=b($e),ir=M($e,2),Ye=b(ir),sr=b(Ye),sn=M(Ye,4),zn=b(sn),ar=M(sn,4),An=b(ar);rt((gt,mt,Ht,Gt)=>{G(rn,gt),G(sr,mt),G(zn,Ht),G(An,`base ${Gt??""}`)},[()=>(h(K),z(()=>P(h(K).token))),()=>(h(K),z(()=>st(h(K).pct))),()=>(h(K),z(()=>x(h(K).lift))),()=>(h(K),z(()=>st(h(K).base_pct)))]),vt("click",qt,()=>J(h(K).token)),H(Ot,qt)});var ul=M(Wr,2);{var cl=Ot=>{var K=vp(),qt=M(b(K),2);ze(qt,5,()=>(h(l),z(()=>h(l).top_items)),Me,(ne,at)=>{var Nt=hp(),Xe=b(Nt);{var $e=Gt=>{var Be=cp();rt(or=>Yi(Be,"src",or),[()=>(h(at),z(()=>I(h(at).token)))]),vt("error",Be,()=>ei(St(h(at).token),h(at).token.slice(2))),H(Gt,Be)},rn=Gt=>{var Be=fp();rt(or=>xt(Be,1,`fallback ${or??""}`,"svelte-nsv0zx"),[()=>(h(at),z(()=>D(h(at).token)))]),H(Gt,Be)};dt(Xe,Gt=>{h(at),re(an),re(St),z(()=>I(h(at).token)&&!an(St(h(at).token),h(at).token.slice(2)))?Gt($e):Gt(rn,!1)})}var ir=M(Xe,2),Ye=b(ir),sr=b(Ye),sn=M(Ye,2),zn=b(sn),ar=b(zn),An=M(zn,4),gt=b(An),mt=M(An,4),Ht=b(mt);rt((Gt,Be,or,fl)=>{G(sr,Gt),G(ar,Be),G(gt,or),G(Ht,`base ${fl??""}`)},[()=>(h(at),z(()=>P(h(at).token))),()=>(h(at),z(()=>st(h(at).pct))),()=>(h(at),z(()=>x(h(at).lift))),()=>(h(at),z(()=>st(h(at).base_pct)))]),vt("click",Nt,()=>J(h(at).token)),H(ne,Nt)}),H(Ot,K)};dt(ul,Ot=>{h(p),z(()=>h(p).use_items)&&Ot(cl)})}rt((Ot,K,qt,ne,at,Nt)=>{G(fe,`Cluster #${h(l),z(()=>h(l).cluster_id)??""} `),G(we,`${Ot??""} games`),en.disabled=(h(l),z(()=>!h(l).signature_tokens?.length)),nr.disabled=(h(l),z(()=>!h(l).signature_tokens?.length)),Rn(Mn,`color: ${K??""}`),G(Xr,qt),Br=xt(rr,1,"v svelte-nsv0zx",null,Br,{pos:h(l).delta_vs_base<0,neg:h(l).delta_vs_base>0}),G(Di,`${h(l),z(()=>h(l).delta_vs_base>0?"+":"")??""}${ne??""}`),G(Li,at),G(Wt,Nt)},[()=>(h(l),z(()=>h(l).size.toLocaleString())),()=>(re(ke),h(l),z(()=>ke(h(l).avg_placement))),()=>(h(l),z(()=>h(l).avg_placement.toFixed(2))),()=>(h(l),z(()=>h(l).delta_vs_base.toFixed(2))),()=>(h(l),z(()=>st(h(l).top4_rate))),()=>(h(l),z(()=>st(h(l).win_rate)))]),vt("click",en,V),vt("click",nr,j),H(Y,q)},ll=Y=>{var q=pp();H(Y,q)};dt(al,Y=>{h(l)?Y(ol):Y(ll,!1)})}rt(()=>ee.disabled=h(d)),vi(_t,()=>h(p).n_clusters,Y=>Gr(p,h(p).n_clusters=Y)),ea(tn,()=>h(p).use_traits,Y=>Gr(p,h(p).use_traits=Y)),ea(Qn,()=>h(p).use_items,Y=>Gr(p,h(p).use_items=Y)),vi(Vt,()=>h(p).min_token_freq,Y=>Gr(p,h(p).min_token_freq=Y)),vt("click",ee,y),Mu(Fr,()=>h(g),Y=>B(g,Y)),H($,C)};dt(S,$=>{h(c)&&$(k)})}rt(()=>E=xt(L,1,"cluster-explorer svelte-nsv0zx",null,E,{open:h(c)})),vt("click",O,N),H(t,L),le(),i()}var yp=W('<div class="graph-section svelte-zf24ck"><div class="graph-container svelte-zf24ck"><svg id="graph" class="svelte-zf24ck"></svg> <!></div></div>');function xp(t,e){oe(e,!1);const n=()=>te(Ns,"$graphData",s),r=()=>te(Ni,"$activeTypes",s),i=()=>te(di,"$highlightedTokens",s),[s,a]=Oe();let o=ot(),u=ot(),l=null,c=bi,d=new Map,f=null,v=!1,m={x:0,y:0},g=null,p=[],_=ot(null);zs(()=>{B(u,Ct(h(o))),n()&&w(n(),r());const S=new ResizeObserver(()=>{n()&&w(n(),r())});return S.observe(h(o)),()=>{S.disconnect(),f&&cancelAnimationFrame(f),l&&l.stop()}}),Fu(()=>{f&&cancelAnimationFrame(f),l&&l.stop()});function w(S,k){if(!h(u))return;h(u).selectAll("*").remove(),B(_,null);const $=h(o).clientWidth,C=h(o).clientHeight;h(u).attr("viewBox",[0,0,$,C]);const F=h(u).append("g").attr("class","graph-container-g");F.attr("transform",c),y(F,40),F.append("rect").attr("class","grid-bg").attr("x",-5e3).attr("y",-5e3).attr("width",1e4).attr("height",1e4).attr("fill","url(#grid)").on("touchstart",()=>{de(Yn).fromTouch&&(Zu(),F.selectAll(".link").classed("active",!1))});const T=Hd().scaleExtent([.3,3]).on("start",R=>{R.sourceEvent&&(v=!0,g={x:c.x,y:c.y})}).on("zoom",R=>{R.sourceEvent&&g&&(m.x=m.x*.6+(R.transform.x-g.x)*.4,m.y=m.y*.6+(R.transform.y-g.y)*.4,g={x:R.transform.x,y:R.transform.y}),c=R.transform,F.attr("transform",R.transform),de(Yn).fromTouch||Ui(),l&&(Math.abs(m.x)>.5||Math.abs(m.y)>.5)&&l.alpha(.15).restart()}).on("end",()=>{v=!1,g=null});if(h(u).call(T),h(u).call(T.transform,c),L(h(u),T,$,C,k),!S||S.nodes.length===0){E(F,$,C);return}A(F);const X=S.nodes.filter(R=>k.has(R.type)),tt=new Set(X.map(R=>R.id)),et=X.map(R=>{const ce=d.get(R.id);return{...R,radius:R.isCenter?28:20,x:ce?ce.x:$/2+(Math.random()-.5)*100,y:ce?ce.y:C/2+(Math.random()-.5)*100}}),ut=new Map(et.map(R=>[R.id,R])),ct=S.edges.filter(R=>tt.has(R.from)&&tt.has(R.to)).map(R=>({...R,source:ut.get(R.from),target:ut.get(R.to)})).filter(R=>R.source&&R.target);p=et;const _t=et.filter(R=>R.isCenter),yt=_t.length>1;l=wd(et).force("link",vd(ct).id(R=>R.id).distance(140)).force("charge",bd().strength(-300)).force("center",Uv($/2,C/2)).force("x",$d($/2).strength(.04)).force("y",Ed(C/2).strength(.04)).force("collision",fd().radius(R=>R.radius+8)).alphaDecay(.02).velocityDecay(.3),l.force("panInertia",()=>{et.forEach(R=>{R.vx-=m.x*2.5,R.vy-=m.y*2.5}),m.x*=.92,m.y*=.92,Math.abs(m.x)<.01&&(m.x=0),Math.abs(m.y)<.01&&(m.y=0)}),yt&&st(l,_t);let tn=null;yt&&(tn=F.append("path").attr("class","team-hull").attr("fill","rgba(0, 112, 243, 0.08)").attr("stroke","rgba(0, 112, 243, 0.25)").attr("stroke-width",2).attr("stroke-dasharray","8,4"));const $n=F.append("g"),{link:Qn,linkOverlay:En}=P($n,ct),Vt=F.append("defs");et.forEach(R=>{Vt.append("clipPath").attr("id",`clip-${R.id.replace(/[^a-zA-Z0-9]/g,"_")}`).append("circle").attr("r",R.radius-2)});const ee=I(F,et,l,S);B(_,ee),N(de(di)),l.on("tick",()=>{et.forEach(R=>d.set(R.id,{x:R.x,y:R.y})),tn&&_t.length>=2&&x(tn,_t),En.attr("x1",R=>R.source.x).attr("y1",R=>R.source.y).attr("x2",R=>R.target.x).attr("y2",R=>R.target.y),Qn.attr("x1",R=>R.source.x).attr("y1",R=>R.source.y).attr("x2",R=>R.target.x).attr("y2",R=>R.target.y),ee.attr("transform",R=>`translate(${R.x},${R.y})`)})}function N(S){if(!h(_))return;const k=S&&S.size>0;h(_).classed("highlight",$=>k&&S.has($.id)).classed("dimmed",$=>k&&!S.has($.id)&&!$.isCenter),k&&h(_).filter($=>S.has($.id)).raise()}function y(S,k){const C=S.append("defs").append("pattern").attr("id","grid").attr("width",k).attr("height",k).attr("patternUnits","userSpaceOnUse");C.append("rect").attr("width",k).attr("height",k).attr("fill","#0a0a0a"),C.append("line").attr("x1",k).attr("y1",0).attr("x2",k).attr("y2",k).attr("stroke","#1a1a1a").attr("stroke-width",1),C.append("line").attr("x1",0).attr("y1",k).attr("x2",k).attr("y2",k).attr("stroke","#1a1a1a").attr("stroke-width",1)}function A(S){const k=S.append("defs");[{id:"equipped",color:"#f5a623"},{id:"cooccur",color:"#666666"},{id:"positive",color:"#00d9a5"},{id:"negative",color:"#ff4444"}].forEach(({id:C,color:F})=>{k.append("marker").attr("id",`arrow-${C}`).attr("viewBox","0 -5 10 10").attr("refX",28).attr("refY",0).attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("fill",F).attr("d","M0,-5L10,0L0,5")})}function P(S,k,$){const C=S.selectAll(".link-visible").data(k).join("line").attr("class",T=>{const X=["link",T.type];return T.delta!==void 0&&X.push(T.delta<=0?"positive":"negative"),X.join(" ")}).attr("stroke-width",T=>T.delta!==void 0?Math.max(2,Math.min(6,Math.abs(T.delta)*5)):T.type==="equipped"?3:1.5).attr("marker-end",T=>T.delta!==void 0?`url(#arrow-${T.delta<=0?"positive":"negative"})`:`url(#arrow-${T.type})`),F=S.selectAll(".link-overlay").data(k).join("line").attr("class","link-overlay").on("mouseover",(T,X)=>{C.filter(tt=>tt===X).classed("active",!0),J(T,X)}).on("mouseout",(T,X)=>{C.filter(tt=>tt===X).classed("active",!1),Ui()}).on("touchstart",function(T,X){T.preventDefault(),T.stopPropagation(),C.classed("active",!1),C.filter(tt=>tt===X).classed("active",!0),J(T,X,!0)},{passive:!1});return{link:C,linkOverlay:F}}function I(S,k,$,C){const F=S.append("g").selectAll("g").data(k).join("g").attr("class",T=>`node ${T.type} ${T.isCenter?"center":""}`).call(D($)).on("click",(T,X)=>j(T,X,C)).on("mouseover",(T,X)=>V(T,X)).on("mouseout",Ui).on("touchstart",function(T,X){T.preventDefault(),T.stopPropagation(),V(T,X,!0)},{passive:!1});return F.append("circle").attr("class","node-bg").attr("r",T=>T.radius),F.append("circle").attr("class","node-ring").attr("r",T=>T.radius),F.each(function(T){if(an(T.type,T.label))Ct(this).append("circle").attr("class","node-fallback").attr("r",T.radius-4);else{const X=Eo(T.type,T.label);X&&Ct(this).append("image").attr("class","node-icon").attr("x",-(T.radius-2)).attr("y",-(T.radius-2)).attr("width",(T.radius-2)*2).attr("height",(T.radius-2)*2).attr("clip-path",`url(#clip-${T.id.replace(/[^a-zA-Z0-9]/g,"_")})`).attr("href",X).attr("preserveAspectRatio","xMidYMid slice").on("error",function(){ei(T.type,T.label),Ct(this).remove(),Ct(this.parentNode).append("circle").attr("class","node-fallback").attr("r",T.radius-4)})}}),F.append("text").attr("dy",T=>T.radius+16).text(T=>Ce(T.type,T.label)),F}function D(S){return sh().on("start",(k,$)=>{k.active||S.alphaTarget(.3).restart(),$.fx=$.x,$.fy=$.y}).on("drag",(k,$)=>{$.fx=k.x,$.fy=k.y}).on("end",(k,$)=>{k.active||S.alphaTarget(0),$.fx=null,$.fy=null})}function j(S,k,$){S.stopPropagation();const C=$.edges.find(F=>(F.from===k.id||F.to===k.id)&&!k.isCenter);C?pi(C.token):k.isCenter||pi(k.id)}function V(S,k,$=!1){const{x:C,y:F}=ft(S);ia(C,F,{type:"node",title:Ce(k.type,k.label),nodeType:k.type,isCenter:k.isCenter},$)}function J(S,k,$=!1){const{x:C,y:F}=ft(S);let T=k.token.slice(2);if(k.token.startsWith("E:")){const[X,tt]=k.token.slice(2).split("|");T=`${Ce("unit",X)} → ${Ce("item",tt)}`}ia(C,F,{type:"edge",title:T,delta:k.delta,avgWith:k.avg_with,avgBase:k.avg_base,nWith:k.n_with,nBase:k.n_base},$)}function ft(S){let k,$;return S.touches?.length>0?(k=S.touches[0].pageX,$=S.touches[0].pageY):S.changedTouches?.length>0?(k=S.changedTouches[0].pageX,$=S.changedTouches[0].pageY):(k=S.pageX,$=S.pageY),{x:k+12,y:$+12}}function st(S,k){S.force("centerCluster",()=>{let C=0,F=0;k.forEach(T=>{C+=T.x||0,F+=T.y||0}),C/=k.length,F/=k.length,k.forEach(T=>{T.vx+=(C-T.x)*.03,T.vy+=(F-T.y)*.03});for(let T=0;T<k.length;T++)for(let X=T+1;X<k.length;X++){const tt=k[T],et=k[X],ut=et.x-tt.x,ct=et.y-tt.y,_t=Math.sqrt(ut*ut+ct*ct)||1;if(_t<120){const yt=(120-_t)*.5/_t;tt.vx-=ut*yt,tt.vy-=ct*yt,et.vx+=ut*yt,et.vy+=ct*yt}}})}function x(S,k){const C=k.map(F=>[F.x,F.y]);if(k.length===2){const[F,T]=C,X=T[0]-F[0],tt=T[1]-F[1],et=Math.sqrt(X*X+tt*tt),ut=-tt/et*45,ct=X/et*45;S.attr("d",`
                M ${F[0]+ut} ${F[1]+ct}
                L ${T[0]+ut} ${T[1]+ct}
                A 45 45 0 0 1 ${T[0]-ut} ${T[1]-ct}
                L ${F[0]-ut} ${F[1]-ct}
                A 45 45 0 0 1 ${F[0]+ut} ${F[1]+ct} Z
            `)}else{const F=Md(C);if(F){const T=oa(F,et=>et[0]),X=oa(F,et=>et[1]),tt=F.map(et=>{const ut=et[0]-T,ct=et[1]-X,_t=Math.sqrt(ut*ut+ct*ct),yt=(_t+45)/_t;return[T+ut*yt,X+ct*yt]});S.attr("d",Id().curve(Pd.tension(.7))(tt))}}}function L(S,k,$,C,F){f&&cancelAnimationFrame(f);const T=.02,X=.85;function tt(){if(f=requestAnimationFrame(tt),v||!p.length)return;let et=1/0,ut=-1/0,ct=1/0,_t=-1/0;if(p.forEach(Ut=>{F.has(Ut.type)&&(Ut.x<et&&(et=Ut.x),Ut.x>ut&&(ut=Ut.x),Ut.y<ct&&(ct=Ut.y),Ut.y>_t&&(_t=Ut.y))}),et===1/0)return;const yt=60;et-=yt,ut+=yt,ct-=yt,_t+=yt;const tn=ut-et,$n=_t-ct,Qn=(et+ut)/2,En=(ct+_t)/2,{k:Vt,x:ee,y:R}=c,ce=-ee/Vt,Ir=-R/Vt,Pr=$/Vt,Rr=C/Vt,Pi=Math.max(0,Math.min(ut,ce+Pr)-Math.max(et,ce)),Fr=Math.max(0,Math.min(_t,Ir+Rr)-Math.max(ct,Ir)),jn=Pi<=0||Fr<=0,Jn=$*X/Math.max(tn,100),Dr=C*X/Math.max($n,100);let kn=Math.max(.3,Math.min(2.5,Math.min(Jn,Dr)));const Lr=Vt<=kn*1.1;if(!jn&&!Lr)return;const Ri=$/2-Qn*kn,Fi=C/2-En*kn,Or=Vt+(kn-Vt)*T,tr=ee+(Ri-ee)*T,qr=R+(Fi-R)*T;(Math.abs(Or-Vt)>1e-4||Math.abs(tr-ee)>.1||Math.abs(qr-R)>.1)&&S.call(k.transform,bi.translate(tr,qr).scale(Or))}tt()}function E(S,k,$){S.append("foreignObject").attr("x",k/2-200).attr("y",$/2-60).attr("width",400).attr("height",120).append("xhtml:div").attr("class","empty-state").html(`
                <div class="empty-state-title">No data to display</div>
                <div class="empty-state-text">Search and select units, items, or traits to visualize relationships</div>
            `)}wt(()=>(h(u),n(),r()),()=>{h(u)&&n()&&w(n(),r())}),wt(()=>(h(_),i()),()=>{h(_)&&N(i())}),wn(),me();var O=yp(),U=b(O),Z=b(U);Cu(Z,S=>B(o,S),()=>h(o));var Q=M(Z,2);mp(Q,{}),H(t,O),le(),a()}var wp=W('<div class="legend svelte-1wfxrff"><div class="legend-group svelte-1wfxrff"><div class="legend-group-title svelte-1wfxrff">Node Types</div> <div class="legend-items svelte-1wfxrff"><button><div class="legend-dot unit svelte-1wfxrff"></div> <span>Unit</span></button> <button><div class="legend-dot item svelte-1wfxrff"></div> <span>Item</span></button> <button><div class="legend-dot trait svelte-1wfxrff"></div> <span>Trait</span></button></div></div> <div class="legend-group svelte-1wfxrff"><div class="legend-group-title svelte-1wfxrff">Placement Impact</div> <div class="legend-items svelte-1wfxrff"><div class="legend-item static svelte-1wfxrff"><div class="legend-line positive svelte-1wfxrff"></div> <span>Improves placement</span></div> <div class="legend-item static svelte-1wfxrff"><div class="legend-line negative svelte-1wfxrff"></div> <span>Worsens placement</span></div></div></div></div>');function bp(t,e){oe(e,!1);const n=()=>te(Ni,"$activeTypes",r),[r,i]=Oe(),s=ot(),a=ot(),o=ot();wt(()=>n(),()=>{B(s,!n().has("unit"))}),wt(()=>n(),()=>{B(a,!n().has("item"))}),wt(()=>n(),()=>{B(o,!n().has("trait"))}),wn(),me();var u=wp(),l=b(u),c=M(b(l),2),d=b(c);let f;var v=M(d,2);let m;var g=M(v,2);let p;rt(()=>{f=xt(d,1,"legend-item svelte-1wfxrff",null,f,{disabled:h(s)}),m=xt(v,1,"legend-item svelte-1wfxrff",null,m,{disabled:h(a)}),p=xt(g,1,"legend-item svelte-1wfxrff",null,p,{disabled:h(o)})}),vt("click",d,()=>Fn("unit")),vt("click",v,()=>Fn("item")),vt("click",g,()=>Fn("trait")),H(t,u),le(),i()}var $p=W('<div class="tooltip-title svelte-11extwn"> </div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">Type</span> <span class="value svelte-11extwn"> </span></div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">Action</span> <span class="value svelte-11extwn"> </span></div>',1),Ep=W('<div class="tooltip-title svelte-11extwn"> </div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">Placement Impact</span> <span> </span></div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">With this combo</span> <span class="value svelte-11extwn"> </span></div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">Base average</span> <span class="value svelte-11extwn"> </span></div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">Sample size</span> <span class="value svelte-11extwn"> </span></div>',1),kp=W('<div class="tooltip svelte-11extwn"><!></div>');function Tp(t,e){oe(e,!1);const n=()=>te(Yn,"$tooltip",r),[r,i]=Oe(),s=ot();wt(()=>n(),()=>{B(s,`
        display: ${n().visible?"block":"none"};
        left: ${n().x}px;
        top: ${n().y}px;
    `)}),wn(),me();var a=kp(),o=b(a);{var u=l=>{var c=hi(),d=Se(c);{var f=m=>{var g=$p(),p=Se(g),_=b(p),w=M(p,2),N=M(b(w),2),y=b(N),A=M(w,2),P=M(b(A),2),I=b(P);rt(()=>{G(_,(n(),z(()=>n().content.title))),G(y,(n(),z(()=>n().content.nodeType))),G(I,(n(),z(()=>n().content.isCenter?"Center node":"Click to add filter")))}),H(m,g)},v=m=>{var g=hi(),p=Se(g);{var _=w=>{var N=Ep(),y=Se(N),A=b(y),P=M(y,2),I=M(b(P),2);let D;var j=b(I),V=M(P,2),J=M(b(V),2),ft=b(J),st=M(V,2),x=M(b(st),2),L=b(x),E=M(st,2),O=M(b(E),2),U=b(O);rt((Z,Q,S,k,$)=>{G(A,(n(),z(()=>n().content.title))),D=xt(I,1,"value impact svelte-11extwn",null,D,{positive:n().content.delta<=0,negative:n().content.delta>0}),G(j,`${n(),z(()=>n().content.delta>0?"+":"")??""}${Z??""}`),G(ft,Q),G(L,S),G(U,`${k??""} / ${$??""}`)},[()=>(n(),z(()=>n().content.delta.toFixed(2))),()=>(n(),z(()=>n().content.avgWith.toFixed(2))),()=>(n(),z(()=>n().content.avgBase.toFixed(2))),()=>(n(),z(()=>n().content.nWith.toLocaleString())),()=>(n(),z(()=>n().content.nBase.toLocaleString()))]),H(w,N)};dt(p,w=>{n(),z(()=>n().content.type==="edge")&&w(_)},!0)}H(m,g)};dt(d,m=>{n(),z(()=>n().content.type==="node")?m(f):m(v,!1)})}H(l,c)};dt(o,l=>{n(),z(()=>n().content)&&l(u)})}rt(()=>Rn(a,h(s))),H(t,a),le(),i()}var Mp=W('<div class="container svelte-1n46o8q"><!> <div class="control-panel svelte-1n46o8q"><div class="control-panel-top svelte-1n46o8q"><!> <!> <!></div> <div class="control-panel-bottom svelte-1n46o8q"><!> <!></div></div> <!> <!></div> <!>',1);function zp(t,e){oe(e,!1);const n=()=>te(bn,"$selectedTokens",i),r=()=>te(ss,"$topK",i),[i,s]=Oe();let a=ot(!1);async function o(P,I){try{const D=await Bu(P,I);Ns.set(D)}catch(D){console.error("Failed to fetch graph:",D)}}zs(async()=>{await ju(),B(a,!0),await o(n(),r())}),wt(()=>(h(a),n(),r()),()=>{h(a)&&o(n(),r())}),wn(),me();var u=Mp(),l=Se(u),c=b(l);Xu(c);var d=M(c,2),f=b(d),v=b(f);ic(v,{});var m=M(v,2);ac(m,{});var g=M(m,2);lc(g,{});var p=M(f,2),_=b(p);dc(_,{});var w=M(_,2);_c(w,{$$events:{change:()=>o(n(),r())}});var N=M(d,2);xp(N,{});var y=M(N,2);bp(y,{});var A=M(l,2);Tp(A,{}),H(t,u),le(),s()}gu(zp,{target:document.getElementById("app")});
