(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const ss=!1;var ki=Array.isArray,ql=Array.prototype.indexOf,Ei=Array.from,Za=Object.defineProperty,br=Object.getOwnPropertyDescriptor,ja=Object.getOwnPropertyDescriptors,Hl=Object.prototype,Xl=Array.prototype,Es=Object.getPrototypeOf,oa=Object.isExtensible;const sn=()=>{};function Bl(t){return t()}function oi(t){for(var e=0;e<t.length;e++)t[e]()}function Qa(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}const Ct=2,Ts=4,Ti=8,Yl=1<<24,Ve=16,Ke=32,Mn=64,zi=128,he=512,Nt=1024,Wt=2048,ve=4096,jt=8192,an=16384,zs=32768,Xn=65536,la=1<<17,Ja=1<<18,Gn=1<<19,to=1<<20,He=1<<25,$n=32768,as=1<<21,Ms=1<<22,on=1<<23,ln=Symbol("$state"),Wl=Symbol(""),Fn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function As(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ul(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Vl(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Kl(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Gl(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Zl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function jl(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ql(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Jl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function tu(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const eu=1,nu=2,eo=4,ru=8,iu=16,su=1,au=2,Pt=Symbol(),ou="http://www.w3.org/1999/xhtml";function lu(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function uu(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function no(t){return t===this.v}function ro(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function io(t){return!ro(t,this.v)}let Pr=!1,cu=!1;function fu(){Pr=!0}let mt=null;function Bn(t){mt=t}function de(t,e=!1,n){mt={p:mt,i:!1,c:null,e:null,s:t,x:null,l:Pr&&!e?{s:null,u:null,$:[]}:null}}function pe(t){var e=mt,n=e.e;if(n!==null){e.e=null;for(var r of n)wo(r)}return e.i=!0,mt=e.p,{}}function Rr(){return!Pr||mt!==null&&mt.l===null}let _n=[];function so(){var t=_n;_n=[],oi(t)}function Zn(t){if(_n.length===0&&!kr){var e=_n;queueMicrotask(()=>{e===_n&&so()})}_n.push(t)}function hu(){for(;_n.length>0;)so()}function ao(t){var e=ht;if(e===null)return ot.f|=on,t;if((e.f&zs)===0){if((e.f&zi)===0)throw t;e.b.error(t)}else Yn(t,e)}function Yn(t,e){for(;e!==null;){if((e.f&zi)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t}const Zr=new Set;let lt=null,$r=null,ue=null,oe=[],Mi=null,os=!1,kr=!1;class we{committed=!1;current=new Map;previous=new Map;#t=new Set;#e=new Set;#r=0;#n=0;#l=null;#s=new Set;#i=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){oe=[],$r=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const r of e)this.#a(r,n);this.is_fork||this.#c(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects)):($r=this,lt=null,ua(n.render_effects),ua(n.effects),$r=null,this.#l?.resolve()),ue=null}#a(e,n){e.f^=Nt;for(var r=e.first;r!==null;){var i=r.f,s=(i&(Ke|Mn))!==0,a=s&&(i&Nt)!==0,o=a||(i&jt)!==0||this.skipped_effects.has(r);if((r.f&zi)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[]}),!o&&r.fn!==null){s?r.f^=Nt:(i&Ts)!==0?n.effects.push(r):Jn(r)&&((r.f&Ve)!==0&&this.#s.add(r),Wn(r));var u=r.first;if(u!==null){r=u;continue}}var l=r.parent;for(r=r.next;r===null&&l!==null;)l===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),n=n.parent),r=l.next,l=l.parent}}#o(e){for(const n of e)(n.f&Wt)!==0?this.#s.add(n):(n.f&ve)!==0&&this.#i.add(n),this.#u(n.deps),St(n,Nt)}#u(e){if(e!==null)for(const n of e)(n.f&Ct)===0||(n.f&$n)===0||(n.f^=$n,this.#u(n.deps))}capture(e,n){this.previous.has(e)||this.previous.set(e,n),(e.f&on)===0&&(this.current.set(e,e.v),ue?.set(e,e.v))}activate(){lt=this,this.apply()}deactivate(){lt===this&&(lt=null,ue=null)}flush(){if(this.activate(),oe.length>0){if(oo(),lt!==null&&lt!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#e)e(this);this.#e.clear()}#c(){if(this.#n===0){for(const e of this.#t)e();this.#t.clear()}this.#r===0&&this.#f()}#f(){if(Zr.size>1){this.previous.clear();var e=ue,n=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const s of Zr){if(s===this){n=!1;continue}const a=[];for(const[u,l]of this.current){if(s.current.has(u))if(n&&l!==s.current.get(u))s.current.set(u,l);else continue;a.push(u)}if(a.length===0)continue;const o=[...s.current.keys()].filter(u=>!this.current.has(u));if(o.length>0){var i=oe;oe=[];const u=new Set,l=new Map;for(const f of a)lo(f,o,u,l);if(oe.length>0){lt=s,s.apply();for(const f of oe)s.#a(f,r);s.deactivate()}oe=i}}lt=null,ue=e}this.committed=!0,Zr.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#s)this.#i.delete(e),St(e,Wt),kn(e);for(const e of this.#i)St(e,ve),kn(e);this.flush()}oncommit(e){this.#t.add(e)}ondiscard(e){this.#e.add(e)}settled(){return(this.#l??=Qa()).promise}static ensure(){if(lt===null){const e=lt=new we;Zr.add(lt),kr||we.enqueue(()=>{lt===e&&e.flush()})}return lt}static enqueue(e){Zn(e)}apply(){}}function vu(t){var e=kr;kr=!0;try{for(var n;;){if(hu(),oe.length===0&&(lt?.flush(),oe.length===0))return Mi=null,n;oo()}}finally{kr=e}}function oo(){var t=xn;os=!0;var e=null;try{var n=0;for(ci(!0);oe.length>0;){var r=we.ensure();if(n++>1e3){var i,s;du()}r.process(oe),un.clear()}}finally{os=!1,ci(t),Mi=null}}function du(){try{Zl()}catch(t){Yn(t,Mi)}}let Le=null;function ua(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(an|jt))===0&&Jn(r)&&(Le=new Set,Wn(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?Eo(r):r.fn=null),Le?.size>0)){un.clear();for(const i of Le){if((i.f&(an|jt))!==0)continue;const s=[i];let a=i.parent;for(;a!==null;)Le.has(a)&&(Le.delete(a),s.push(a)),a=a.parent;for(let o=s.length-1;o>=0;o--){const u=s[o];(u.f&(an|jt))===0&&Wn(u)}}Le.clear()}}Le=null}}function lo(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const i of t.reactions){const s=i.f;(s&Ct)!==0?lo(i,e,n,r):(s&(Ms|Ve))!==0&&(s&Wt)===0&&uo(i,e,r)&&(St(i,Wt),kn(i))}}function uo(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const i of t.deps){if(e.includes(i))return!0;if((i.f&Ct)!==0&&uo(i,e,n))return n.set(i,!0),!0}return n.set(t,!1),!1}function kn(t){for(var e=Mi=t;e.parent!==null;){e=e.parent;var n=e.f;if(os&&e===ht&&(n&Ve)!==0&&(n&Ja)===0)return;if((n&(Mn|Ke))!==0){if((n&Nt)===0)return;e.f^=Nt}}oe.push(e)}function pu(t){let e=0,n=En(0),r;return()=>{zr()&&(c(n),jn(()=>(e===0&&(r=A(()=>t(()=>Er(n)))),e+=1,()=>{Zn(()=>{e-=1,e===0&&(r?.(),r=void 0,Er(n))})})))}}var _u=Xn|Gn|zi;function gu(t,e,n){new mu(t,e,n)}class mu{parent;#t=!1;#e;#r=null;#n;#l;#s;#i=null;#a=null;#o=null;#u=null;#c=null;#f=0;#h=0;#d=!1;#v=null;#y=pu(()=>(this.#v=En(this.#f),()=>{this.#v=null}));constructor(e,n,r){this.#e=e,this.#n=n,this.#l=r,this.parent=ht.b,this.#t=!!this.#n.pending,this.#s=Ps(()=>{ht.b=this;{var i=this.#g();try{this.#i=le(()=>r(i))}catch(s){this.error(s)}this.#h>0?this.#_():this.#t=!1}return()=>{this.#c?.remove()}},_u)}#x(){try{this.#i=le(()=>this.#l(this.#e))}catch(e){this.error(e)}this.#t=!1}#w(){const e=this.#n.pending;e&&(this.#a=le(()=>e(this.#e)),we.enqueue(()=>{var n=this.#g();this.#i=this.#p(()=>(we.ensure(),le(()=>this.#l(n)))),this.#h>0?this.#_():(yn(this.#a,()=>{this.#a=null}),this.#t=!1)}))}#g(){var e=this.#e;return this.#t&&(this.#c=Ye(),this.#e.before(this.#c),e=this.#c),e}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(e){var n=ht,r=ot,i=mt;Te(this.#s),Xt(this.#s),Bn(this.#s.ctx);try{return e()}catch(s){return ao(s),null}finally{Te(n),Xt(r),Bn(i)}}#_(){const e=this.#n.pending;this.#i!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#c),Mo(this.#i,this.#u)),this.#a===null&&(this.#a=le(()=>e(this.#e)))}#m(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(e);return}this.#h+=e,this.#h===0&&(this.#t=!1,this.#a&&yn(this.#a,()=>{this.#a=null}),this.#u&&(this.#e.before(this.#u),this.#u=null))}update_pending_count(e){this.#m(e),this.#f+=e,this.#v&&Tn(this.#v,this.#f)}get_effect_pending(){return this.#y(),c(this.#v)}error(e){var n=this.#n.onerror;let r=this.#n.failed;if(this.#d||!n&&!r)throw e;this.#i&&(Yt(this.#i),this.#i=null),this.#a&&(Yt(this.#a),this.#a=null),this.#o&&(Yt(this.#o),this.#o=null);var i=!1,s=!1;const a=()=>{if(i){uu();return}i=!0,s&&tu(),we.ensure(),this.#f=0,this.#o!==null&&yn(this.#o,()=>{this.#o=null}),this.#t=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#d=!1,le(()=>this.#l(this.#e)))),this.#h>0?this.#_():this.#t=!1};var o=ot;try{Xt(null),s=!0,n?.(e,a),s=!1}catch(u){Yn(u,this.#s&&this.#s.parent)}finally{Xt(o)}r&&Zn(()=>{this.#o=this.#p(()=>{we.ensure(),this.#d=!0;try{return le(()=>{r(this.#e,()=>e,()=>a)})}catch(u){return Yn(u,this.#s.parent),null}finally{this.#d=!1}})})}}function yu(t,e,n,r){const i=Rr()?Ns:Ss;if(n.length===0&&t.length===0){r(e.map(i));return}var s=lt,a=ht,o=xu();function u(){Promise.all(n.map(l=>wu(l))).then(l=>{o();try{r([...e.map(i),...l])}catch(f){(a.f&an)===0&&Yn(f,a)}s?.deactivate(),li()}).catch(l=>{Yn(l,a)})}t.length>0?Promise.all(t).then(()=>{o();try{return u()}finally{s?.deactivate(),li()}}):u()}function xu(){var t=ht,e=ot,n=mt,r=lt;return function(s=!0){Te(t),Xt(e),Bn(n),s&&r?.activate()}}function li(){Te(null),Xt(null),Bn(null)}function Ns(t){var e=Ct|Wt,n=ot!==null&&(ot.f&Ct)!==0?ot:null;return ht!==null&&(ht.f|=Gn),{ctx:mt,deps:null,effects:null,equals:no,f:e,fn:t,reactions:null,rv:0,v:Pt,wv:0,parent:n??ht,ac:null}}function wu(t,e){let n=ht;n===null&&Ul();var r=n.b,i=void 0,s=En(Pt),a=!ot,o=new Map;return Su(()=>{var u=Qa();i=u.promise;try{Promise.resolve(t()).then(u.resolve,u.reject).then(()=>{l===lt&&l.committed&&l.deactivate(),li()})}catch(h){u.reject(h),li()}var l=lt;if(a){var f=!r.is_pending();r.update_pending_count(1),l.increment(f),o.get(l)?.reject(Fn),o.delete(l),o.set(l,u)}const d=(h,v=void 0)=>{if(l.activate(),v)v!==Fn&&(s.f|=on,Tn(s,v));else{(s.f&on)!==0&&(s.f^=on),Tn(s,h);for(const[m,y]of o){if(o.delete(m),m===l)break;y.reject(Fn)}}a&&(r.update_pending_count(-1),l.decrement(f))};u.promise.then(d,h=>d(null,h||"unknown"))}),Ni(()=>{for(const u of o.values())u.reject(Fn)}),new Promise(u=>{function l(f){function d(){f===i?u(s):l(i)}f.then(d,d)}l(i)})}function Ss(t){const e=Ns(t);return e.equals=io,e}function co(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)Yt(e[n])}}function bu(t){for(var e=t.parent;e!==null;){if((e.f&Ct)===0)return(e.f&an)===0?e:null;e=e.parent}return null}function Cs(t){var e,n=ht;Te(bu(t));try{t.f&=~$n,co(t),e=Co(t)}finally{Te(n)}return e}function fo(t){var e=Cs(t);if(t.equals(e)||(lt?.is_fork||(t.v=e),t.wv=No()),!Qn)if(ue!==null)(zr()||lt?.is_fork)&&ue.set(t,e);else{var n=(t.f&he)===0?ve:Nt;St(t,n)}}let ls=new Set;const un=new Map;let ho=!1;function En(t,e){var n={f:0,v:t,reactions:null,equals:no,rv:0,wv:0};return n}function tn(t,e){const n=En(t);return Du(n),n}function rt(t,e=!1,n=!0){const r=En(t);return e||(r.equals=io),Pr&&n&&mt!==null&&mt.l!==null&&(mt.l.s??=[]).push(r),r}function jr(t,e){return O(t,A(()=>c(t))),e}function O(t,e,n=!1){ot!==null&&(!$e||(ot.f&la)!==0)&&Rr()&&(ot.f&(Ct|Ve|Ms|la))!==0&&!We?.includes(t)&&Jl();let r=n?_r(e):e;return Tn(t,r)}function Tn(t,e){if(!t.equals(e)){var n=t.v;Qn?un.set(t,e):un.set(t,n),t.v=e;var r=we.ensure();r.capture(t,n),(t.f&Ct)!==0&&((t.f&Wt)!==0&&Cs(t),St(t,(t.f&he)!==0?Nt:ve)),t.wv=No(),vo(t,Wt),Rr()&&ht!==null&&(ht.f&Nt)!==0&&(ht.f&(Ke|Mn))===0&&(ae===null?Lu([t]):ae.push(t)),!r.is_fork&&ls.size>0&&!ho&&$u()}return e}function $u(){ho=!1;var t=xn;ci(!0);const e=Array.from(ls);try{for(const n of e)(n.f&Nt)!==0&&St(n,ve),Jn(n)&&Wn(n)}finally{ci(t)}ls.clear()}function Er(t){O(t,t.v+1)}function vo(t,e){var n=t.reactions;if(n!==null)for(var r=Rr(),i=n.length,s=0;s<i;s++){var a=n[s],o=a.f;if(!(!r&&a===ht)){var u=(o&Wt)===0;if(u&&St(a,e),(o&Ct)!==0){var l=a;ue?.delete(l),(o&$n)===0&&(o&he&&(a.f|=$n),vo(l,ve))}else u&&((o&Ve)!==0&&Le!==null&&Le.add(a),kn(a))}}}function _r(t){if(typeof t!="object"||t===null||ln in t)return t;const e=Es(t);if(e!==Hl&&e!==Xl)return t;var n=new Map,r=ki(t),i=tn(0),s=wn,a=o=>{if(wn===s)return o();var u=ot,l=wn;Xt(null),da(s);var f=o();return Xt(u),da(l),f};return r&&n.set("length",tn(t.length)),new Proxy(t,{defineProperty(o,u,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&jl();var f=n.get(u);return f===void 0?f=a(()=>{var d=tn(l.value);return n.set(u,d),d}):O(f,l.value,!0),!0},deleteProperty(o,u){var l=n.get(u);if(l===void 0){if(u in o){const f=a(()=>tn(Pt));n.set(u,f),Er(i)}}else O(l,Pt),Er(i);return!0},get(o,u,l){if(u===ln)return t;var f=n.get(u),d=u in o;if(f===void 0&&(!d||br(o,u)?.writable)&&(f=a(()=>{var v=_r(d?o[u]:Pt),m=tn(v);return m}),n.set(u,f)),f!==void 0){var h=c(f);return h===Pt?void 0:h}return Reflect.get(o,u,l)},getOwnPropertyDescriptor(o,u){var l=Reflect.getOwnPropertyDescriptor(o,u);if(l&&"value"in l){var f=n.get(u);f&&(l.value=c(f))}else if(l===void 0){var d=n.get(u),h=d?.v;if(d!==void 0&&h!==Pt)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return l},has(o,u){if(u===ln)return!0;var l=n.get(u),f=l!==void 0&&l.v!==Pt||Reflect.has(o,u);if(l!==void 0||ht!==null&&(!f||br(o,u)?.writable)){l===void 0&&(l=a(()=>{var h=f?_r(o[u]):Pt,v=tn(h);return v}),n.set(u,l));var d=c(l);if(d===Pt)return!1}return f},set(o,u,l,f){var d=n.get(u),h=u in o;if(r&&u==="length")for(var v=l;v<d.v;v+=1){var m=n.get(v+"");m!==void 0?O(m,Pt):v in o&&(m=a(()=>tn(Pt)),n.set(v+"",m))}if(d===void 0)(!h||br(o,u)?.writable)&&(d=a(()=>tn(void 0)),O(d,_r(l)),n.set(u,d));else{h=d.v!==Pt;var y=a(()=>_r(l));O(d,y)}var p=Reflect.getOwnPropertyDescriptor(o,u);if(p?.set&&p.set.call(f,l),!h){if(r&&typeof u=="string"){var _=n.get("length"),$=Number(u);Number.isInteger($)&&$>=_.v&&O(_,$+1)}Er(i)}return!0},ownKeys(o){c(i);var u=Reflect.ownKeys(o).filter(d=>{var h=n.get(d);return h===void 0||h.v!==Pt});for(var[l,f]of n)f.v!==Pt&&!(l in o)&&u.push(l);return u},setPrototypeOf(){Ql()}})}function ca(t){try{if(t!==null&&typeof t=="object"&&ln in t)return t[ln]}catch{}return t}function ku(t,e){return Object.is(ca(t),ca(e))}var fa,po,_o,go,mo;function Eu(){if(fa===void 0){fa=window,po=document,_o=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;go=br(e,"firstChild").get,mo=br(e,"nextSibling").get,oa(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),oa(n)&&(n.__t=void 0)}}function Ye(t=""){return document.createTextNode(t)}function ui(t){return go.call(t)}function Dr(t){return mo.call(t)}function w(t,e){return ui(t)}function be(t,e=!1){{var n=ui(t);return n instanceof Comment&&n.data===""?Dr(n):n}}function M(t,e=1,n=!1){let r=t;for(;e--;)r=Dr(r);return r}function Tu(t){t.textContent=""}function yo(){return!1}let ha=!1;function zu(){ha||(ha=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Ai(t){var e=ot,n=ht;Xt(null),Te(null);try{return t()}finally{Xt(e),Te(n)}}function Is(t,e,n,r=n){t.addEventListener(e,()=>Ai(n));const i=t.__on_r;i?t.__on_r=()=>{i(),r(!0)}:t.__on_r=()=>r(!0),zu()}function xo(t){ht===null&&(ot===null&&Gl(),Kl()),Qn&&Vl()}function Mu(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function ze(t,e,n){var r=ht;r!==null&&(r.f&jt)!==0&&(t|=jt);var i={ctx:mt,deps:null,nodes:null,f:t|Wt|he,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{Wn(i),i.f|=zs}catch(o){throw Yt(i),o}else e!==null&&kn(i);var s=i;if(n&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&Gn)===0&&(s=s.first,(t&Ve)!==0&&(t&Xn)!==0&&s!==null&&(s.f|=Xn)),s!==null&&(s.parent=r,r!==null&&Mu(s,r),ot!==null&&(ot.f&Ct)!==0&&(t&Mn)===0)){var a=ot;(a.effects??=[]).push(s)}return i}function zr(){return ot!==null&&!$e}function Ni(t){const e=ze(Ti,null,!1);return St(e,Nt),e.teardown=t,e}function us(t){xo();var e=ht.f,n=!ot&&(e&Ke)!==0&&(e&zs)===0;if(n){var r=mt;(r.e??=[]).push(t)}else return wo(t)}function wo(t){return ze(Ts|to,t,!1)}function Au(t){return xo(),ze(Ti|to,t,!0)}function Nu(t){we.ensure();const e=ze(Mn|Gn,t,!0);return(n={})=>new Promise(r=>{n.outro?yn(e,()=>{Yt(e),r(void 0)}):(Yt(e),r(void 0))})}function bo(t){return ze(Ts,t,!1)}function kt(t,e){var n=mt,r={effect:null,ran:!1,deps:t};n.l.$.push(r),r.effect=jn(()=>{t(),!r.ran&&(r.ran=!0,A(e))})}function An(){var t=mt;jn(()=>{for(var e of t.l.$){e.deps();var n=e.effect;(n.f&Nt)!==0&&St(n,ve),Jn(n)&&Wn(n),e.ran=!1}})}function Su(t){return ze(Ms|Gn,t,!0)}function jn(t,e=0){return ze(Ti|e,t,!0)}function st(t,e=[],n=[],r=[]){yu(r,e,n,i=>{ze(Ti,()=>t(...i.map(c)),!0)})}function Ps(t,e=0){var n=ze(Ve|e,t,!0);return n}function le(t){return ze(Ke|Gn,t,!0)}function $o(t){var e=t.teardown;if(e!==null){const n=Qn,r=ot;va(!0),Xt(null);try{e.call(null)}finally{va(n),Xt(r)}}}function ko(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const i=n.ac;i!==null&&Ai(()=>{i.abort(Fn)});var r=n.next;(n.f&Mn)!==0?n.parent=null:Yt(n,e),n=r}}function Cu(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Ke)===0&&Yt(e),e=n}}function Yt(t,e=!0){var n=!1;(e||(t.f&Ja)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Iu(t.nodes.start,t.nodes.end),n=!0),ko(t,e&&!n),fi(t,0),St(t,an);var r=t.nodes&&t.nodes.t;if(r!==null)for(const s of r)s.stop();$o(t);var i=t.parent;i!==null&&i.first!==null&&Eo(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Iu(t,e){for(;t!==null;){var n=t===e?null:Dr(t);t.remove(),t=n}}function Eo(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function yn(t,e,n=!0){var r=[];To(t,r,!0);var i=()=>{n&&Yt(t),e&&e()},s=r.length;if(s>0){var a=()=>--s||i();for(var o of r)o.out(a)}else i()}function To(t,e,n){if((t.f&jt)===0){t.f^=jt;var r=t.nodes&&t.nodes.t;if(r!==null)for(const o of r)(o.is_global||n)&&e.push(o);for(var i=t.first;i!==null;){var s=i.next,a=(i.f&Xn)!==0||(i.f&Ke)!==0&&(t.f&Ve)!==0;To(i,e,a?n:!1),i=s}}}function Rs(t){zo(t,!0)}function zo(t,e){if((t.f&jt)!==0){t.f^=jt,(t.f&Nt)===0&&(St(t,Wt),kn(t));for(var n=t.first;n!==null;){var r=n.next,i=(n.f&Xn)!==0||(n.f&Ke)!==0;zo(n,i?e:!1),n=r}var s=t.nodes&&t.nodes.t;if(s!==null)for(const a of s)(a.is_global||e)&&a.in()}}function Mo(t,e){if(t.nodes)for(var n=t.nodes.start,r=t.nodes.end;n!==null;){var i=n===r?null:Dr(n);e.append(n),n=i}}let Ln=null;function Pu(t){var e=Ln;try{if(Ln=new Set,A(t),e!==null)for(var n of Ln)e.add(n);return Ln}finally{Ln=e}}function Ru(t){for(var e of Pu(t))Tn(e,e.v)}let xn=!1;function ci(t){xn=t}let Qn=!1;function va(t){Qn=t}let ot=null,$e=!1;function Xt(t){ot=t}let ht=null;function Te(t){ht=t}let We=null;function Du(t){ot!==null&&(We===null?We=[t]:We.push(t))}let Rt=null,Zt=0,ae=null;function Lu(t){ae=t}let Ao=1,Mr=0,wn=Mr;function da(t){wn=t}function No(){return++Ao}function Jn(t){var e=t.f;if((e&Wt)!==0)return!0;if(e&Ct&&(t.f&=~$n),(e&ve)!==0){var n=t.deps;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i];if(Jn(s)&&fo(s),s.wv>t.wv)return!0}(e&he)!==0&&ue===null&&St(t,Nt)}return!1}function So(t,e,n=!0){var r=t.reactions;if(r!==null&&!We?.includes(t))for(var i=0;i<r.length;i++){var s=r[i];(s.f&Ct)!==0?So(s,e,!1):e===s&&(n?St(s,Wt):(s.f&Nt)!==0&&St(s,ve),kn(s))}}function Co(t){var e=Rt,n=Zt,r=ae,i=ot,s=We,a=mt,o=$e,u=wn,l=t.f;Rt=null,Zt=0,ae=null,ot=(l&(Ke|Mn))===0?t:null,We=null,Bn(t.ctx),$e=!1,wn=++Mr,t.ac!==null&&(Ai(()=>{t.ac.abort(Fn)}),t.ac=null);try{t.f|=as;var f=t.fn,d=f(),h=t.deps;if(Rt!==null){var v;if(fi(t,Zt),h!==null&&Zt>0)for(h.length=Zt+Rt.length,v=0;v<Rt.length;v++)h[Zt+v]=Rt[v];else t.deps=h=Rt;if(zr()&&(t.f&he)!==0)for(v=Zt;v<h.length;v++)(h[v].reactions??=[]).push(t)}else h!==null&&Zt<h.length&&(fi(t,Zt),h.length=Zt);if(Rr()&&ae!==null&&!$e&&h!==null&&(t.f&(Ct|ve|Wt))===0)for(v=0;v<ae.length;v++)So(ae[v],t);return i!==null&&i!==t&&(Mr++,ae!==null&&(r===null?r=ae:r.push(...ae))),(t.f&on)!==0&&(t.f^=on),d}catch(m){return ao(m)}finally{t.f^=as,Rt=e,Zt=n,ae=r,ot=i,We=s,Bn(a),$e=o,wn=u}}function Fu(t,e){let n=e.reactions;if(n!==null){var r=ql.call(n,t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(e.f&Ct)!==0&&(Rt===null||!Rt.includes(e))&&(St(e,ve),(e.f&he)!==0&&(e.f^=he,e.f&=~$n),co(e),fi(e,0))}function fi(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)Fu(t,n[r])}function Wn(t){var e=t.f;if((e&an)===0){St(t,Nt);var n=ht,r=xn;ht=t,xn=!0;try{(e&(Ve|Yl))!==0?Cu(t):ko(t),$o(t);var i=Co(t);t.teardown=typeof i=="function"?i:null,t.wv=Ao;var s;ss&&cu&&(t.f&Wt)!==0&&t.deps}finally{xn=r,ht=n}}}async function Ou(){await Promise.resolve(),vu()}function c(t){var e=t.f,n=(e&Ct)!==0;if(Ln?.add(t),ot!==null&&!$e){var r=ht!==null&&(ht.f&an)!==0;if(!r&&!We?.includes(t)){var i=ot.deps;if((ot.f&as)!==0)t.rv<Mr&&(t.rv=Mr,Rt===null&&i!==null&&i[Zt]===t?Zt++:Rt===null?Rt=[t]:Rt.includes(t)||Rt.push(t));else{(ot.deps??=[]).push(t);var s=t.reactions;s===null?t.reactions=[ot]:s.includes(ot)||s.push(ot)}}}if(Qn){if(un.has(t))return un.get(t);if(n){var a=t,o=a.v;return((a.f&Nt)===0&&a.reactions!==null||Po(a))&&(o=Cs(a)),un.set(a,o),o}}else n&&(!ue?.has(t)||lt?.is_fork&&!zr())&&(a=t,Jn(a)&&fo(a),xn&&zr()&&(a.f&he)===0&&Io(a));if(ue?.has(t))return ue.get(t);if((t.f&on)!==0)throw t.v;return t.v}function Io(t){if(t.deps!==null){t.f^=he;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&Ct)!==0&&(e.f&he)===0&&Io(e)}}function Po(t){if(t.v===Pt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(un.has(e)||(e.f&Ct)!==0&&Po(e))return!0;return!1}function A(t){var e=$e;try{return $e=!0,t()}finally{$e=e}}const qu=-7169;function St(t,e){t.f=t.f&qu|e}function Mt(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(ln in t)cs(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&ln in n&&cs(n)}}}function cs(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{cs(t[r],e)}catch{}const n=Es(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=ja(n);for(let i in r){const s=r[i].get;if(s)try{s.call(t)}catch{}}}}}const Hu=["touchstart","touchmove"];function Xu(t){return Hu.includes(t)}const Bu=new Set,pa=new Set;function Yu(t,e,n,r={}){function i(s){if(r.capture||gr.call(e,s),!s.cancelBubble)return Ai(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Zn(()=>{e.addEventListener(t,i,r)}):e.addEventListener(t,i,r),i}function ut(t,e,n,r,i){var s={capture:r,passive:i},a=Yu(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Ni(()=>{e.removeEventListener(t,a,s)})}let _a=null;function gr(t){var e=this,n=e.ownerDocument,r=t.type,i=t.composedPath?.()||[],s=i[0]||t.target;_a=t;var a=0,o=_a===t&&t.__root;if(o){var u=i.indexOf(o);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var l=i.indexOf(e);if(l===-1)return;u<=l&&(a=u)}if(s=i[a]||t.target,s!==e){Za(t,"currentTarget",{configurable:!0,get(){return s||n}});var f=ot,d=ht;Xt(null),Te(null);try{for(var h,v=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var y=s["__"+r];y!=null&&(!s.disabled||t.target===s)&&y.call(s,t)}catch(p){h?v.push(p):h=p}if(t.cancelBubble||m===e||m===null)break;s=m}if(h){for(let p of v)queueMicrotask(()=>{throw p});throw h}}finally{t.__root=e,delete t.currentTarget,Xt(f),Te(d)}}}function Wu(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function hi(t,e){var n=ht;n.nodes===null&&(n.nodes={start:t,end:e,a:null,t:null})}function G(t,e){var n=(e&su)!==0,r=(e&au)!==0,i,s=!t.startsWith("<!>");return()=>{i===void 0&&(i=Wu(s?t:"<!>"+t),n||(i=ui(i)));var a=r||_o?document.importNode(i,!0):i.cloneNode(!0);if(n){var o=ui(a),u=a.lastChild;hi(o,u)}else hi(a,a);return a}}function ji(t=""){{var e=Ye(t+"");return hi(e,e),e}}function vi(){var t=document.createDocumentFragment(),e=document.createComment(""),n=Ye();return t.append(e,n),hi(e,n),t}function Y(t,e){t!==null&&t.before(e)}function Q(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function Uu(t,e){return Vu(t,e)}const Pn=new Map;function Vu(t,{target:e,anchor:n,props:r={},events:i,context:s,intro:a=!0}){Eu();var o=new Set,u=d=>{for(var h=0;h<d.length;h++){var v=d[h];if(!o.has(v)){o.add(v);var m=Xu(v);e.addEventListener(v,gr,{passive:m});var y=Pn.get(v);y===void 0?(document.addEventListener(v,gr,{passive:m}),Pn.set(v,1)):Pn.set(v,y+1)}}};u(Ei(Bu)),pa.add(u);var l=void 0,f=Nu(()=>{var d=n??e.appendChild(Ye());return gu(d,{pending:()=>{}},h=>{if(s){de({});var v=mt;v.c=s}i&&(r.$$events=i),l=t(h,r)||{},s&&pe()}),()=>{for(var h of o){e.removeEventListener(h,gr);var v=Pn.get(h);--v===0?(document.removeEventListener(h,gr),Pn.delete(h)):Pn.set(h,v)}pa.delete(u),d!==n&&d.parentNode?.removeChild(d)}});return Ku.set(l,f),l}let Ku=new WeakMap;class Gu{anchor;#t=new Map;#e=new Map;#r=new Map;#n=new Set;#l=!0;constructor(e,n=!0){this.anchor=e,this.#l=n}#s=()=>{var e=lt;if(this.#t.has(e)){var n=this.#t.get(e),r=this.#e.get(n);if(r)Rs(r),this.#n.delete(n);else{var i=this.#r.get(n);i&&(this.#e.set(n,i.effect),this.#r.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,a]of this.#t){if(this.#t.delete(s),s===e)break;const o=this.#r.get(a);o&&(Yt(o.effect),this.#r.delete(a))}for(const[s,a]of this.#e){if(s===n||this.#n.has(s))continue;const o=()=>{if(Array.from(this.#t.values()).includes(s)){var l=document.createDocumentFragment();Mo(a,l),l.append(Ye()),this.#r.set(s,{effect:a,fragment:l})}else Yt(a);this.#n.delete(s),this.#e.delete(s)};this.#l||!r?(this.#n.add(s),yn(a,o,!1)):o()}}};#i=e=>{this.#t.delete(e);const n=Array.from(this.#t.values());for(const[r,i]of this.#r)n.includes(r)||(Yt(i.effect),this.#r.delete(r))};ensure(e,n){var r=lt,i=yo();if(n&&!this.#e.has(e)&&!this.#r.has(e))if(i){var s=document.createDocumentFragment(),a=Ye();s.append(a),this.#r.set(e,{effect:le(()=>n(a)),fragment:s})}else this.#e.set(e,le(()=>n(this.anchor)));if(this.#t.set(r,e),i){for(const[o,u]of this.#e)o===e?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[o,u]of this.#r)o===e?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(this.#s),r.ondiscard(this.#i)}else this.#s()}}function _t(t,e,n=!1){var r=new Gu(t),i=n?Xn:0;function s(a,o){r.ensure(a,o)}Ps(()=>{var a=!1;e((o,u=!0)=>{a=!0,s(u,o)}),a||s(!1,null)},i)}function Fe(t,e){return e}function Zu(t,e,n){for(var r=[],i=e.length,s,a=e.length,o=0;o<i;o++){let d=e[o];yn(d,()=>{if(s){if(s.pending.delete(d),s.done.add(d),s.pending.size===0){var h=t.outrogroups;fs(Ei(s.done)),h.delete(s),h.size===0&&(t.outrogroups=null)}}else a-=1},!1)}if(a===0){var u=r.length===0&&n!==null;if(u){var l=n,f=l.parentNode;Tu(f),f.append(l),t.items.clear()}fs(e,!u)}else s={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(s)}function fs(t,e=!0){for(var n=0;n<t.length;n++)Yt(t[n],e)}var ga;function Oe(t,e,n,r,i,s=null){var a=t,o=new Map,u=(e&eo)!==0;if(u){var l=t;a=l.appendChild(Ye())}var f=null,d=Ss(()=>{var _=n();return ki(_)?_:_==null?[]:Ei(_)}),h,v=!0;function m(){p.fallback=f,ju(p,h,a,e,r),f!==null&&(h.length===0?(f.f&He)===0?Rs(f):(f.f^=He,mr(f,null,a)):yn(f,()=>{f=null}))}var y=Ps(()=>{h=c(d);for(var _=h.length,$=new Set,E=lt,g=yo(),S=0;S<_;S+=1){var N=h[S],P=r(N,S),R=v?null:o.get(P);R?(R.v&&Tn(R.v,N),R.i&&Tn(R.i,S),g&&E.skipped_effects.delete(R.e)):(R=Qu(o,v?a:ga??=Ye(),N,P,S,i,e,n),v||(R.e.f|=He),o.set(P,R)),$.add(P)}if(_===0&&s&&!f&&(v?f=le(()=>s(a)):(f=le(()=>s(ga??=Ye())),f.f|=He)),!v)if(g){for(const[B,X]of o)$.has(B)||E.skipped_effects.add(X.e);E.oncommit(m),E.ondiscard(()=>{})}else m();c(d)}),p={effect:y,items:o,outrogroups:null,fallback:f};v=!1}function ju(t,e,n,r,i){var s=(r&ru)!==0,a=e.length,o=t.items,u=t.effect.first,l,f=null,d,h=[],v=[],m,y,p,_;if(s)for(_=0;_<a;_+=1)m=e[_],y=i(m,_),p=o.get(y).e,(p.f&He)===0&&(p.nodes?.a?.measure(),(d??=new Set).add(p));for(_=0;_<a;_+=1){if(m=e[_],y=i(m,_),p=o.get(y).e,t.outrogroups!==null)for(const X of t.outrogroups)X.pending.delete(p),X.done.delete(p);if((p.f&He)!==0)if(p.f^=He,p===u)mr(p,null,n);else{var $=f?f.next:u;p===t.effect.last&&(t.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),en(t,f,p),en(t,p,$),mr(p,$,n),f=p,h=[],v=[],u=f.next;continue}if((p.f&jt)!==0&&(Rs(p),s&&(p.nodes?.a?.unfix(),(d??=new Set).delete(p))),p!==u){if(l!==void 0&&l.has(p)){if(h.length<v.length){var E=v[0],g;f=E.prev;var S=h[0],N=h[h.length-1];for(g=0;g<h.length;g+=1)mr(h[g],E,n);for(g=0;g<v.length;g+=1)l.delete(v[g]);en(t,S.prev,N.next),en(t,f,S),en(t,N,E),u=E,f=N,_-=1,h=[],v=[]}else l.delete(p),mr(p,u,n),en(t,p.prev,p.next),en(t,p,f===null?t.effect.first:f.next),en(t,f,p),f=p;continue}for(h=[],v=[];u!==null&&u!==p;)(l??=new Set).add(u),v.push(u),u=u.next;if(u===null)continue}(p.f&He)===0&&h.push(p),f=p,u=p.next}if(t.outrogroups!==null){for(const X of t.outrogroups)X.pending.size===0&&(fs(Ei(X.done)),t.outrogroups?.delete(X));t.outrogroups.size===0&&(t.outrogroups=null)}if(u!==null||l!==void 0){var P=[];if(l!==void 0)for(p of l)(p.f&jt)===0&&P.push(p);for(;u!==null;)(u.f&jt)===0&&u!==t.fallback&&P.push(u),u=u.next;var R=P.length;if(R>0){var B=(r&eo)!==0&&a===0?n:null;if(s){for(_=0;_<R;_+=1)P[_].nodes?.a?.measure();for(_=0;_<R;_+=1)P[_].nodes?.a?.fix()}Zu(t,P,B)}}s&&Zn(()=>{if(d!==void 0)for(p of d)p.nodes?.a?.apply()})}function Qu(t,e,n,r,i,s,a,o){var u=(a&eu)!==0?(a&iu)===0?rt(n,!1,!1):En(n):null,l=(a&nu)!==0?En(i):null;return{v:u,i:l,e:le(()=>(s(e,u??n,l??i,o),()=>{t.delete(r)}))}}function mr(t,e,n){if(t.nodes)for(var r=t.nodes.start,i=t.nodes.end,s=e&&(e.f&He)===0?e.nodes.start:n;r!==null;){var a=Dr(r);if(s.before(r),r===i)return;r=a}}function en(t,e,n){e===null?t.effect.first=n:e.next=n,n===null?t.effect.last=e:n.prev=e}const ma=[...` 	
\r\f \v\uFEFF`];function Ju(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,a=0;(a=r.indexOf(i,a))>=0;){var o=a+s;(a===0||ma.includes(r[a-1]))&&(o===r.length||ma.includes(r[o]))?r=(a===0?"":r.substring(0,a))+r.substring(o+1):a=o}}return r===""?null:r}function tc(t,e){return t==null?null:String(t)}function bt(t,e,n,r,i,s){var a=t.__className;if(a!==n||a===void 0){var o=Ju(n,r,s);o==null?t.removeAttribute("class"):t.className=o,t.__className=n}else if(s&&i!==s)for(var u in s){var l=!!s[u];(i==null||l!==!!i[u])&&t.classList.toggle(u,l)}return s}function pn(t,e,n,r){var i=t.__style;if(i!==e){var s=tc(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}function Ro(t,e,n=!1){if(t.multiple){if(e==null)return;if(!ki(e))return lu();for(var r of t.options)r.selected=e.includes(Tr(r));return}for(r of t.options){var i=Tr(r);if(ku(i,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function ec(t){var e=new MutationObserver(()=>{Ro(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ni(()=>{e.disconnect()})}function nc(t,e,n=e){var r=new WeakSet,i=!0;Is(t,"change",s=>{var a=s?"[selected]":":checked",o;if(t.multiple)o=[].map.call(t.querySelectorAll(a),Tr);else{var u=t.querySelector(a)??t.querySelector("option:not([disabled])");o=u&&Tr(u)}n(o),lt!==null&&r.add(lt)}),bo(()=>{var s=e();if(t===document.activeElement){var a=$r??lt;if(r.has(a))return}if(Ro(t,s,i),i&&s===void 0){var o=t.querySelector(":checked");o!==null&&(s=Tr(o),n(s))}t.__value=s,i=!1}),ec(t)}function Tr(t){return"__value"in t?t.__value:t.value}const rc=Symbol("is custom element"),ic=Symbol("is html");function Ie(t,e,n,r){var i=sc(t);i[e]!==(i[e]=n)&&(e==="loading"&&(t[Wl]=n),n==null?t.removeAttribute(e):typeof n!="string"&&ac(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function sc(t){return t.__attributes??={[rc]:t.nodeName.includes("-"),[ic]:t.namespaceURI===ou}}var ya=new Map;function ac(t){var e=t.getAttribute("is")||t.nodeName,n=ya.get(e);if(n)return n;ya.set(e,n=[]);for(var r,i=t,s=Element.prototype;s!==i;){r=ja(i);for(var a in r)r[a].set&&n.push(a);i=Es(i)}return n}function di(t,e,n=e){var r=new WeakSet;Is(t,"input",async i=>{var s=i?t.defaultValue:t.value;if(s=Qi(t)?Ji(s):s,n(s),lt!==null&&r.add(lt),await Ou(),s!==(s=e())){var a=t.selectionStart,o=t.selectionEnd,u=t.value.length;if(t.value=s??"",o!==null){var l=t.value.length;a===o&&o===u&&l>u?(t.selectionStart=l,t.selectionEnd=l):(t.selectionStart=a,t.selectionEnd=Math.min(o,l))}}}),A(e)==null&&t.value&&(n(Qi(t)?Ji(t.value):t.value),lt!==null&&r.add(lt)),jn(()=>{var i=e();if(t===document.activeElement){var s=$r??lt;if(r.has(s))return}Qi(t)&&i===Ji(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function xa(t,e,n=e){Is(t,"change",r=>{var i=r?t.defaultChecked:t.checked;n(i)}),A(e)==null&&n(t.checked),jn(()=>{var r=e();t.checked=!!r})}function Qi(t){var e=t.type;return e==="number"||e==="range"}function Ji(t){return t===""?null:+t}function wa(t,e){return t===e||t?.[ln]===e}function Do(t={},e,n,r){return bo(()=>{var i,s;return jn(()=>{i=s,s=[],A(()=>{t!==n(...s)&&(e(t,...s),i&&wa(n(...i),t)&&e(null,...i))})}),()=>{Zn(()=>{s&&wa(n(...s),t)&&e(null,...s)})}}),t}function Me(t=!1){const e=mt,n=e.l.u;if(!n)return;let r=()=>Mt(e.s);if(t){let i=0,s={};const a=Ns(()=>{let o=!1;const u=e.s;for(const l in u)u[l]!==s[l]&&(s[l]=u[l],o=!0);return o&&i++,i});r=()=>c(a)}n.b.length&&Au(()=>{ba(e,r),oi(n.b)}),us(()=>{const i=A(()=>n.m.map(Bl));return()=>{for(const s of i)typeof s=="function"&&s()}}),n.a.length&&us(()=>{ba(e,r),oi(n.a)})}function ba(t,e){if(t.l.s)for(const n of t.l.s)c(n);e()}function Ds(t,e,n){if(t==null)return e(void 0),n&&n(void 0),sn;const r=A(()=>t.subscribe(e,n));return r.unsubscribe?()=>r.unsubscribe():r}const Rn=[];function oc(t,e){return{subscribe:Ut(t,e).subscribe}}function Ut(t,e=sn){let n=null;const r=new Set;function i(o){if(ro(t,o)&&(t=o,n)){const u=!Rn.length;for(const l of r)l[1](),Rn.push(l,t);if(u){for(let l=0;l<Rn.length;l+=2)Rn[l][0](Rn[l+1]);Rn.length=0}}}function s(o){i(o(t))}function a(o,u=sn){const l=[o,u];return r.add(l),r.size===1&&(n=e(i,s)||sn),o(t),()=>{r.delete(l),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:a}}function lc(t,e,n){const r=!Array.isArray(t),i=r?[t]:t;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return oc(n,(a,o)=>{let u=!1;const l=[];let f=0,d=sn;const h=()=>{if(f)return;d();const m=e(r?l[0]:l,a,o);s?a(m):d=typeof m=="function"?m:sn},v=i.map((m,y)=>Ds(m,p=>{l[y]=p,f&=~(1<<y),u&&h()},()=>{f|=1<<y}));return u=!0,h(),function(){oi(v),d(),u=!1}})}function ke(t){let e;return Ds(t,n=>e=n)(),e}let hs=Symbol();function Qt(t,e,n){const r=n[e]??={store:null,source:rt(void 0),unsubscribe:sn};if(r.store!==t&&!(hs in n))if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=sn;else{var i=!0;r.unsubscribe=Ds(t,s=>{i?r.source.v=s:O(r.source,s)}),i=!1}return t&&hs in n?ke(t):c(r.source)}function uc(t,e){return t.set(e),e}function Ae(){const t={};function e(){Ni(()=>{for(var n in t)t[n].unsubscribe();Za(t,hs,{enumerable:!1,value:!0})})}return[t,e]}function Si(t){mt===null&&As(),Pr&&mt.l!==null?vc(mt).m.push(t):us(()=>{const e=A(t);if(typeof e=="function")return e})}function cc(t){mt===null&&As(),Si(()=>()=>A(t))}function fc(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function hc(){const t=mt;return t===null&&As(),(e,n,r)=>{const i=t.s.$$events?.[e];if(i){const s=ki(i)?i.slice():[i],a=fc(e,n,r);for(const o of s)o.call(t.x,a);return!a.defaultPrevented}return!0}}function vc(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const dc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(dc);fu();var pc=G('<header class="svelte-1elxaub"><div class="logo svelte-1elxaub"><div class="logo-text svelte-1elxaub">smeecher</div></div> <a href="https://www.pramit.gg" target="_blank" rel="noopener" class="by-line svelte-1elxaub">by JoyFired</a></header>');function _c(t){var e=pc();Y(t,e)}const Ls="";async function gc(t){return(await fetch(`${Ls}/search?q=${encodeURIComponent(t)}`)).json()}async function mc(t,e=15){const n=t.join(",");return(await fetch(`${Ls}/graph?tokens=${encodeURIComponent(n)}&top_k=${e}&t=${Date.now()}`)).json()}async function yc(t,e={}){const n=t.join(","),r=new URLSearchParams({tokens:n,t:String(Date.now()),...Object.fromEntries(Object.entries(e).map(([a,o])=>[a,String(o)]))}),i=await fetch(`${Ls}/clusters?${r.toString()}`),s=await i.json();if(!i.ok)throw new Error(s?.detail||"Failed to fetch clusters");return s}const Ge=Ut([]),Fs=Ut(null),Ci=Ut(new Set(["unit","item","trait"])),pi=Ut(new Set),Un=Ut({visible:!1,x:0,y:0,content:null,fromTouch:!1}),vs=Ut(15),xc=lc(Fs,t=>t?.base?{games:t.base.n,avgPlacement:t.base.avg_placement}:{games:0,avgPlacement:4.5});function _i(t){Ge.update(e=>e.includes(t)?e:[...e,t])}function wc(t){Ge.update(e=>{const n=new Set(e),r=[...e];for(const i of t)n.has(i)||(n.add(i),r.push(i));return r})}function bc(t){Ge.set(t)}function $c(){Ge.set([])}function kc(t){Ge.update(e=>e.filter(n=>n!==t))}function On(t){Ci.update(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n})}function $a(t,e,n,r=!1){Un.set({visible:!0,x:t,y:e,content:n,fromTouch:r})}function ts(){Un.update(t=>t.fromTouch?t:{...t,visible:!1})}function Ec(){Un.set({visible:!1,x:0,y:0,content:null,fromTouch:!1})}function Tc(t){pi.set(new Set(t))}function ka(){pi.set(new Set)}const gn="https://raw.communitydragon.org/latest/plugins/rcp-be-lol-game-data/global/default",Lo=Ut(new Map),Fo=Ut(new Map),Oo=Ut(new Map),qo=Ut(new Map),Ho=Ut(new Map),Xo=Ut(new Set),Ea=Ut(!1);async function zc(){try{const[t,e]=await Promise.all([fetch(`${gn}/v1/tftitems.json`),fetch(`${gn}/v1/tfttraits.json`)]),[n,r]=await Promise.all([t.json(),e.json()]),i=new Map,s=new Map,a=new Map,o=new Map,u=new Map;n.forEach(l=>{const f=l.name?.replace(/<[^>]*>/g,"").trim(),d=l.nameId||"",h=l.squareIconPath||l.iconPath;if(f&&h){const v=`${gn}${h.toLowerCase().replace("/lol-game-data/assets","")}`;if(i.set(f.toLowerCase(),v),d){i.set(d.toLowerCase(),v),s.set(d.toLowerCase(),f);const m=d.replace(/^TFT\d*_Item_/i,"").replace(/^TFT_Item_/i,"");m!==d&&(i.set(m.toLowerCase(),v),s.set(m.toLowerCase(),f)),u.set(f.toLowerCase(),{apiName:m!==d?m:d.replace(/^TFT_Item_/i,""),type:"item",displayName:f})}}}),r.forEach(l=>{const f=l.display_name,d=l.trait_id||"",h=l.icon_path;if(f&&h){const v=`${gn}${h.toLowerCase().replace("/lol-game-data/assets","")}`;if(a.set(f.toLowerCase(),v),d){a.set(d.toLowerCase(),v),o.set(d.toLowerCase(),f);const m=d.replace(/^TFT\d*_/i,"").replace(/^Set\d*_/i,"");m!==d&&(a.set(m.toLowerCase(),v),o.set(m.toLowerCase(),f)),d.startsWith("TFT16_")&&u.set(f.toLowerCase(),{apiName:m,type:"trait",displayName:f})}}}),Lo.set(i),Fo.set(s),Oo.set(a),qo.set(o),Ho.set(u),Ea.set(!0),console.log(`Loaded ${i.size} item mappings, ${a.size} trait mappings`)}catch(t){console.warn("Failed to load CDragon data:",t),Ea.set(!0)}}function Bo(t,e){const n=e.toLowerCase();switch(t){case"unit":return`${gn}/assets/characters/tft16_${n}/hud/tft16_${n}_square.tft_set16.png`;case"item":{const r=ke(Lo);return r.has(n)?r.get(n):`${gn}/assets/maps/tft/icons/items/hexcore/tft_item_${n.replace(/['\s]/g,"")}.tft_set13.png`}case"trait":{const r=ke(Oo);return r.has(n)?r.get(n):`${gn}/assets/ux/traiticons/trait_icon_16_${n.replace(/\s/g,"")}.tft_set16.png`}default:return null}}function Xe(t,e){const n=e.toLowerCase();if(t==="item"){const r=ke(Fo);if(r.has(n))return r.get(n)}if(t==="trait"){const r=ke(qo);if(r.has(n))return r.get(n)}return e}function yr(t,e){Xo.update(n=>{const r=new Set(n);return r.add(`${t}:${e}`),r})}function Re(t,e){return ke(Xo).has(`${t}:${e}`)}var Mc=G('<button class="clear-filters svelte-yyldap" type="button" title="Clear all filters" aria-label="Clear all filters">Clear <span class="count svelte-yyldap"> </span></button>'),Ac=G("<span> </span>"),Nc=G('<button class="search-result svelte-yyldap"><span class="label svelte-yyldap"> </span> <span class="meta svelte-yyldap"><span> </span> <!></span></button>'),Sc=G('<div class="search-result no-results svelte-yyldap"><span class="label svelte-yyldap">No results found</span></div>'),Cc=G('<div class="search-results svelte-yyldap"></div>'),Ic=G('<div class="search-container svelte-yyldap"><input type="text" placeholder="Search units, items, traits..." autocomplete="off"/> <!> <!></div>');function Pc(t,e){de(e,!1);const n=()=>Qt(Ge,"$selectedTokens",r),[r,i]=Ae();let s=rt(""),a=rt([]),o=rt(!1),u;async function l(){if(clearTimeout(u),c(s).length<2){O(a,[]),O(o,!1);return}u=setTimeout(async()=>{try{const N=await gc(c(s)),P=c(s).toLowerCase(),R=[],B=new Set(N.map(at=>at.token)),X=ke(Ho);for(const[at,vt]of X)if(at.includes(P)){const x=(vt.type==="item"?"I:":"T:")+vt.apiName;B.has(x)||(R.push({token:x,label:vt.apiName,type:vt.type,count:0}),B.add(x))}O(a,[...N,...R]),O(o,c(a).length>0)}catch(N){console.error("Search error:",N)}},150)}function f(N){_i(N),O(s,""),O(a,[]),O(o,!1)}function d(){$c(),O(s,""),O(a,[]),O(o,!1)}function h(){c(a).length>0&&O(o,!0)}function v(N){N.target.closest(".search-container")||O(o,!1)}function m(N){return N==="unit"?"unit":N==="item"?"item":N==="trait"?"trait":"item"}Me();var y=Ic();ut("click",po,v);var p=w(y);let _;var $=M(p,2);{var E=N=>{var P=Mc(),R=M(w(P)),B=w(R);st(()=>Q(B,n().length)),ut("click",P,d),Y(N,P)};_t($,N=>{n().length>0&&N(E)})}var g=M($,2);{var S=N=>{var P=Cc();Oe(P,5,()=>c(a),Fe,(R,B)=>{var X=Nc(),at=w(X),vt=w(at),nt=M(at,2),x=w(nt),F=w(x),z=M(x,2);{var q=U=>{var Z=Ac(),k=w(Z);st(b=>Q(k,`${b??""} games`),[()=>c(B).count.toLocaleString()]),Y(U,Z)};_t(z,U=>{c(B).count>0&&U(q)})}st((U,Z)=>{Q(vt,U),bt(x,1,`type-badge ${Z??""}`,"svelte-yyldap"),Q(F,c(B).type)},[()=>Xe(c(B).type,c(B).label),()=>m(c(B).type)]),ut("click",X,()=>f(c(B).token)),Y(R,X)},R=>{var B=Sc();Y(R,B)}),Y(N,P)};_t(g,N=>{c(o)&&N(S)})}st(()=>_=bt(p,1,"svelte-yyldap",null,_,{"with-clear":n().length>0})),di(p,()=>c(s),N=>O(s,N)),ut("input",p,l),ut("focus",p,h),Y(t,y),pe(),i()}var Rc=G('<div class="filter-toggles svelte-1dvg93b"><button>Units</button> <button>Items</button> <button>Traits</button></div>');function Dc(t,e){de(e,!1);const n=()=>Qt(Ci,"$activeTypes",r),[r,i]=Ae(),s=rt(),a=rt(),o=rt();kt(()=>n(),()=>{O(s,n().has("unit"))}),kt(()=>n(),()=>{O(a,n().has("item"))}),kt(()=>n(),()=>{O(o,n().has("trait"))}),An(),Me();var u=Rc(),l=w(u);let f;var d=M(l,2);let h;var v=M(d,2);let m;st(()=>{f=bt(l,1,"filter-toggle unit svelte-1dvg93b",null,f,{active:c(s)}),h=bt(d,1,"filter-toggle item svelte-1dvg93b",null,h,{active:c(a)}),m=bt(v,1,"filter-toggle trait svelte-1dvg93b",null,m,{active:c(o)})}),ut("click",l,()=>On("unit")),ut("click",d,()=>On("item")),ut("click",v,()=>On("trait")),Y(t,u),pe(),i()}function De(t){const i=Math.max(1,Math.min(8,t));if(i<=4.5){const s=(i-1)/3.5,a=Math.round(34+s*221),o=Math.round(197-s*17),u=Math.round(94-s*54);return`rgb(${a}, ${o}, ${u})`}else{const s=(i-4.5)/3.5,a=255,o=Math.round(180-s*130),u=Math.round(40+s*20);return`rgb(${a}, ${o}, ${u})`}}var Lc=G('<div class="stats svelte-1tib2rn"><div class="stat-inline svelte-1tib2rn"><span class="stat-label svelte-1tib2rn">Games</span> <span class="stat-value svelte-1tib2rn"> </span></div> <div class="stat-inline svelte-1tib2rn"><span class="stat-label svelte-1tib2rn">Avg Place</span> <span class="stat-value svelte-1tib2rn"> </span></div></div>');function Fc(t,e){de(e,!1);const n=()=>Qt(xc,"$stats",r),[r,i]=Ae(),s=rt();kt(()=>n(),()=>{O(s,De(n().avgPlacement))}),An(),Me();var a=Lc(),o=w(a),u=M(w(o),2),l=w(u),f=M(o,2),d=M(w(f),2),h=w(d);st((v,m)=>{Q(l,v),pn(d,`color: ${c(s)??""}`),Q(h,m)},[()=>(n(),A(()=>n().games.toLocaleString())),()=>(n(),A(()=>n().avgPlacement.toFixed(2)))]),Y(t,a),pe(),i()}function At(t){return t.startsWith("U:")?"unit":t.startsWith("I:")?"item":t.startsWith("E:")?"equipped":t.startsWith("T:")?"trait":"unknown"}function Oc(t){switch(At(t)){case"unit":return{type:"unit",unit:t.slice(2)};case"item":return{type:"item",item:t.slice(2)};case"equipped":{const[n,r]=t.slice(2).split("|");return{type:"equipped",unit:n,item:r}}case"trait":{const n=t.slice(2).split(":");return n.length===2?{type:"trait",trait:n[0],tier:parseInt(n[1])}:{type:"trait",trait:n[0],tier:null}}default:return{type:"unknown"}}}function qc(t,e){const n=Oc(t);switch(n.type){case"unit":return e("unit",n.unit);case"item":return e("item",n.item);case"equipped":return`${e("unit",n.unit)} → ${e("item",n.item)}`;case"trait":const r=e("trait",n.trait);return n.tier?`${r} ${n.tier}`:r;default:return t}}var Hc=G('<div class="empty-message svelte-1mf077">No filters applied. Search and select units, items, or traits to start.</div>'),Xc=G('<div><span> </span> <button aria-label="Remove filter" class="svelte-1mf077">×</button></div>'),Bc=G('<div class="chips-section svelte-1mf077"><div class="section-title svelte-1mf077">Active Filters</div> <div class="chips svelte-1mf077"><!></div></div>');function Yc(t,e){de(e,!1);const n=()=>Qt(Ge,"$selectedTokens",r),[r,i]=Ae();function s(h){const v=At(h);if(h.startsWith("E:")){const[m,y]=h.slice(2).split("|");return`${Xe("unit",m)} → ${Xe("item",y)}`}return Xe(v,h.slice(2))}function a(h){return h.startsWith("E:")?"equipped":At(h)}Me();var o=Bc(),u=M(w(o),2),l=w(u);{var f=h=>{var v=Hc();Y(h,v)},d=h=>{var v=vi(),m=be(v);Oe(m,1,n,Fe,(y,p)=>{var _=Xc(),$=w(_),E=w($),g=M($,2);st((S,N)=>{bt(_,1,`chip ${S??""}`,"svelte-1mf077"),Q(E,N)},[()=>a(c(p)),()=>s(c(p))]),ut("click",g,()=>kc(c(p))),Y(y,_)}),Y(h,v)};_t(l,h=>{n().length===0?h(f):h(d,!1)})}Y(t,o),pe(),i()}var Wc=G('<div class="topk-control svelte-5yceyo"><span class="label svelte-5yceyo">Top-K</span> <input type="number" min="0" max="500" title="0 = unlimited" class="svelte-5yceyo"/></div>');function Uc(t,e){de(e,!1);const n=()=>Qt(vs,"$topK",r),[r,i]=Ae(),s=hc();function a(){s("change")}Me();var o=Wc(),u=M(w(o),2);di(u,n,l=>uc(vs,l)),ut("change",u,a),Y(t,o),pe(),i()}var Vc=G('<span class="toggle-sub svelte-nsv0zx">close</span>'),Kc=G('<span class="toggle-sub svelte-nsv0zx">explore comps</span>'),Gc=G('<span> </span> <span class="dot svelte-nsv0zx">•</span> <span> </span>',1),Zc=G("<span> </span>"),jc=G('<span class="tiny svelte-nsv0zx"> </span>'),Qc=G('<span class="tiny svelte-nsv0zx"> </span>'),Jc=G('<div class="callout warning svelte-nsv0zx"> </div>'),tf=G('<div class="callout error svelte-nsv0zx"> </div>'),ef=G('<div class="callout svelte-nsv0zx">No clusters met the minimum size. Try lowering <span class="mono svelte-nsv0zx">min</span> or increasing the sample.</div>'),nf=G('<img alt="" loading="lazy" class="svelte-nsv0zx"/>'),rf=G("<div></div>"),sf=G("<div><!></div>"),af=G('<div class="sig-more svelte-nsv0zx"> </div>'),of=G('<div class="bar svelte-nsv0zx"></div>'),lf=G('<button><div class="cluster-header svelte-nsv0zx"><div class="cluster-left svelte-nsv0zx"><div class="cluster-name-row svelte-nsv0zx"><span class="cluster-tag svelte-nsv0zx"> </span> <span class="cluster-name svelte-nsv0zx"> </span></div> <div class="cluster-blurb svelte-nsv0zx"> </div></div> <div class="cluster-metrics svelte-nsv0zx"><div class="metric-top svelte-nsv0zx"><span class="avg svelte-nsv0zx"> </span> <span> </span></div> <div class="metric-bottom svelte-nsv0zx"><span class="cluster-size svelte-nsv0zx"> </span> <span class="cluster-share svelte-nsv0zx"> </span></div></div></div> <div class="cluster-visual svelte-nsv0zx"><div class="sig-icons svelte-nsv0zx" aria-label="Signature"><!> <!></div> <div class="hist svelte-nsv0zx" aria-label="Placement distribution"></div></div></button>'),uf=G('<button class="back svelte-nsv0zx" aria-label="Back to clusters">Back</button>'),cf=G("<button> </button>"),ff=G('<div class="sig svelte-nsv0zx"><div class="sig-title svelte-nsv0zx">Signature</div> <div class="sig-chips svelte-nsv0zx"></div></div>'),hf=G('<img class="icon svelte-nsv0zx" alt="" loading="lazy"/>'),vf=G("<div></div>"),df=G('<button class="token svelte-nsv0zx"><!> <div class="token-main svelte-nsv0zx"><div class="name svelte-nsv0zx"> </div> <div class="sub svelte-nsv0zx"><span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="muted svelte-nsv0zx"> </span></div></div> <div class="plus svelte-nsv0zx">+</div></button>'),pf=G('<img class="icon svelte-nsv0zx" alt="" loading="lazy"/>'),_f=G("<div></div>"),gf=G('<button class="token svelte-nsv0zx"><!> <div class="token-main svelte-nsv0zx"><div class="name svelte-nsv0zx"> </div> <div class="sub svelte-nsv0zx"><span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="muted svelte-nsv0zx"> </span></div></div> <div class="plus svelte-nsv0zx">+</div></button>'),mf=G('<img class="icon svelte-nsv0zx" alt="" loading="lazy"/>'),yf=G("<div></div>"),xf=G('<button class="token svelte-nsv0zx"><!> <div class="token-main svelte-nsv0zx"><div class="name svelte-nsv0zx"> </div> <div class="sub svelte-nsv0zx"><span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="mono svelte-nsv0zx"> </span> <span class="dot svelte-nsv0zx">•</span> <span class="muted svelte-nsv0zx"> </span></div></div> <div class="plus svelte-nsv0zx">+</div></button>'),wf=G('<div class="group"><div class="group-title svelte-nsv0zx">Items</div> <div class="tokens svelte-nsv0zx"></div></div>'),bf=G('<div class="details-header svelte-nsv0zx"><div class="details-title-wrap svelte-nsv0zx"><!> <div class="details-title svelte-nsv0zx"> <span class="details-sub svelte-nsv0zx"> </span></div></div> <div class="details-actions svelte-nsv0zx"><button class="action svelte-nsv0zx">Add</button> <button class="action primary svelte-nsv0zx">Explore</button></div></div> <div class="details-grid svelte-nsv0zx"><div class="metric svelte-nsv0zx"><div class="k svelte-nsv0zx">Avg</div> <div class="v svelte-nsv0zx"> </div></div> <div class="metric svelte-nsv0zx"><div class="k svelte-nsv0zx">Δ vs base</div> <div> </div></div> <div class="metric svelte-nsv0zx"><div class="k svelte-nsv0zx">Top4</div> <div class="v svelte-nsv0zx"> </div></div> <div class="metric svelte-nsv0zx"><div class="k svelte-nsv0zx">Win</div> <div class="v svelte-nsv0zx"> </div></div></div> <!> <div class="token-groups svelte-nsv0zx"><div class="group"><div class="group-title svelte-nsv0zx">Units</div> <div class="tokens svelte-nsv0zx"></div></div> <div class="group"><div class="group-title svelte-nsv0zx">Traits</div> <div class="tokens svelte-nsv0zx"></div></div> <!></div>',1),$f=G('<div class="details-empty svelte-nsv0zx">Select a cluster to inspect defining units, traits, and item prevalence.</div>'),kf=G('<div class="resizer svelte-nsv0zx" role="separator" aria-orientation="vertical" aria-label="Resize cluster explorer"></div> <div class="panel svelte-nsv0zx"><div class="panel-header svelte-nsv0zx"><div class="panel-title svelte-nsv0zx">Explorer</div> <div class="panel-meta svelte-nsv0zx"><!></div></div> <div class="controls svelte-nsv0zx"><label class="control svelte-nsv0zx"><span class="svelte-nsv0zx">k</span> <input type="number" min="2" max="50" step="1" class="svelte-nsv0zx"/></label> <label class="checkbox svelte-nsv0zx"><input type="checkbox" class="svelte-nsv0zx"/> <span>traits</span></label> <label class="checkbox svelte-nsv0zx"><input type="checkbox" class="svelte-nsv0zx"/> <span>items</span></label> <label class="control svelte-nsv0zx"><span class="svelte-nsv0zx">min</span> <input type="number" min="1" max="5000" step="10" class="svelte-nsv0zx"/></label> <button class="run svelte-nsv0zx"><!></button></div> <div class="subcontrols svelte-nsv0zx"><div class="subcontrols-left"><label class="select svelte-nsv0zx"><span>Sort</span> <select class="svelte-nsv0zx"><option>best avg</option><option>best top4</option><option>most played</option></select></label></div> <div class="subcontrols-right"><!> <!></div></div> <!> <!> <!> <div><div class="cluster-list svelte-nsv0zx"></div> <div class="details svelte-nsv0zx"><!></div></div></div>',1),Ef=G('<div><button class="toggle svelte-nsv0zx" aria-label="Toggle explorer"><span class="toggle-title svelte-nsv0zx">Explorer</span> <!></button> <!></div>');function Tf(t,e){de(e,!1);const n=()=>Qt(Ge,"$selectedTokens",r),[r,i]=Ae(),s=rt(),a=rt(),o=rt(),u=rt(),l=rt(),f=rt(),d=rt(),h=46,v=340,m=720,y=640;let p=rt(!1),_=rt(!1),$=rt(null),E=rt(null),g=rt(null),S=rt("avg"),N=rt(),P=rt(0),R=rt(440),B=rt("list"),X=rt(!1),at=0,vt=0,nt=rt({n_clusters:15,use_units:!0,use_traits:!0,use_items:!0,min_token_freq:100,min_cluster_size:50,top_k_tokens:10,random_state:42}),x=rt(""),F=rt(!1);function z(I,et,ft){return Math.max(et,Math.min(ft,I))}Si(()=>{try{const et=parseInt(localStorage.getItem("clusterExplorerWidth")||"",10);Number.isFinite(et)&&O(R,z(et,v,m))}catch{}const I=new ResizeObserver(et=>{const ft=et[0];ft&&O(P,ft.contentRect.width)});return c(N)&&I.observe(c(N)),()=>I.disconnect()});function q(){if(O(p,!c(p)),!c(p)){O(g,null),O(B,"list"),O(F,!1),ka();return}O(B,"list"),c(E)||U()}async function U(){O(_,!0),O($,null),O(F,!1),O(g,null),O(B,"list"),ka(),O(x,c(s));try{O(E,await yc(n(),c(nt)))}catch(I){O($,I?.message??String(I))}finally{O(_,!1)}}function Z(I){O(g,I.cluster_id),Tc(I.signature_tokens??[]),c(d)&&O(B,"details")}function k(I){return qc(I,Xe)}function b(I){const et=At(I);return et==="unknown"||et==="equipped"?null:Bo(et,I.slice(2))}function C(I){const et=At(I);return et==="equipped"?"item":et}function V(){c(l)?.signature_tokens?.length&&bc(c(l).signature_tokens)}function L(){c(l)?.signature_tokens?.length&&wc(c(l).signature_tokens)}function T(I){_i(I)}function j(I){return Math.max(1,...I??[1])}function J(I){return`${Math.round((I??0)*100)}%`}function tt(I){return I==null?"—":I>=9.95?"×10+":`×${I.toFixed(2)}`}function ct(I,et=8){const ft=I?.signature_tokens??[],Ot=ft.slice(0,et),me=Math.max(0,ft.length-Ot.length);return{tokens:Ot,more:me}}function dt(I){const et=I?.signature_tokens??[],ft=et.filter(It=>It.startsWith("U:")),Ot=et.filter(It=>It.startsWith("T:")),me=et.filter(It=>It.startsWith("I:"));if(ft.length){let ee=ft.slice(0,2).map(k).join(" + ");return Ot.length&&(ee+=` — ${k(Ot[0])}`),ee}return Ot.length?Ot.slice(0,2).map(k).join(" + "):me.length?me.slice(0,2).map(k).join(" + "):`Cluster #${I?.cluster_id??""}`.trim()}function $t(I){const et=I?.defining_units??[];if(et.length)return et[0];const Ot=(I?.top_traits??[]).find(ee=>(ee.lift??0)>=1.6&&(ee.pct??0)>=.25);if(Ot)return Ot;const It=(I?.top_units??[]).find(ee=>(ee.lift??0)>=1.6&&(ee.pct??0)>=.25);return It||null}function zt(I){const et=[],ft=$t(I);return ft?.token&&et.push(`${k(ft.token)} ${tt(ft.lift)}`),et.push(`Top4 ${J(I?.top4_rate)}`),et.push(`Win ${J(I?.win_rate)}`),et.push(`${Math.round((I?.share??0)*100)}% share`),et.join(" • ")}function cn(I){O(X,!0),at=I.clientX,vt=c(R),I.currentTarget.setPointerCapture(I.pointerId),I.preventDefault()}function tr(I){if(!c(X))return;const et=vt+(at-I.clientX);O(R,z(et,v,m)),I.preventDefault()}function Nn(I){if(c(X)){O(X,!1);try{localStorage.setItem("clusterExplorerWidth",String(Math.round(c(R))))}catch{}I.preventDefault()}}kt(()=>n(),()=>{O(s,n().slice().sort().join(","))}),kt(()=>(c(p),c(x),c(s)),()=>{c(p)&&c(x)&&c(s)!==c(x)&&O(F,!0)}),kt(()=>c(E),()=>{O(a,c(E)?.clusters??[])}),kt(()=>c(E),()=>{O(o,c(E)?.meta?.warning??null)}),kt(()=>(c(a),c(S)),()=>{O(u,(()=>{const I=[...c(a)];return c(S)==="size"?I.sort((et,ft)=>ft.size-et.size):c(S)==="top4"?I.sort((et,ft)=>ft.top4_rate-et.top4_rate):I.sort((et,ft)=>et.avg_placement-ft.avg_placement),I})())}),kt(()=>(c(u),c(g)),()=>{O(l,c(u).find(I=>I.cluster_id===c(g))??null)}),kt(()=>(c(B),c(l)),()=>{c(B)==="details"&&!c(l)&&O(B,"list")}),kt(()=>(c(p),c(R)),()=>{O(f,c(p)?c(R):h)}),kt(()=>(c(p),c(P),c(f)),()=>{O(d,c(p)&&(c(P)||c(f))<y)}),An(),Me();var Se=Ef();let Vt;var te=w(Se),D=M(w(te),2);{var ge=I=>{var et=Vc();Y(I,et)},qr=I=>{var et=Kc();Y(I,et)};_t(D,I=>{c(p)?I(ge):I(qr,!1)})}var Di=M(te,2);{var Li=I=>{var et=kf(),ft=be(et),Ot=M(ft,2),me=w(Ot),It=M(w(me),2),ee=w(It);{var Fi=K=>{var H=Gc(),pt=be(H),ce=w(pt),ye=M(pt,4),Kt=w(ye);st((xe,fn,Sn)=>{Q(ce,`${xe??""} games`),pn(ye,`color: ${fn??""}`),Q(Kt,`${Sn??""} avg`)},[()=>(c(E),A(()=>c(E).base.n.toLocaleString())),()=>(Mt(De),c(E),A(()=>De(c(E).base.avg_placement))),()=>(c(E),A(()=>c(E).base.avg_placement.toFixed(2)))]),Y(K,H)},Oi=K=>{var H=Zc(),pt=w(H);st(()=>Q(pt,`${n(),A(()=>n().length)??""} filters`)),Y(K,H)};_t(ee,K=>{c(E),A(()=>c(E)?.base)?K(Fi):K(Oi,!1)})}var er=M(me,2),nr=w(er),Hr=M(w(nr),2),ne=M(nr,2),wl=w(ne),Ks=M(ne,2),bl=w(Ks),Gs=M(Ks,2),$l=M(w(Gs),2),qi=M(Gs,2),kl=w(qi);{var El=K=>{var H=ji("Running…");Y(K,H)},Tl=K=>{var H=vi(),pt=be(H);{var ce=Kt=>{var xe=ji("Refresh");Y(Kt,xe)},ye=Kt=>{var xe=ji("Run");Y(Kt,xe)};_t(pt,Kt=>{c(F)?Kt(ce):Kt(ye,!1)},!0)}Y(K,H)};_t(kl,K=>{c(_)?K(El):K(Tl,!1)})}var Zs=M(er,2),js=w(Zs),zl=w(js),Qs=M(w(zl),2);st(()=>{c(S),Ru(()=>{})});var Hi=w(Qs);Hi.value=Hi.__value="avg";var Xi=M(Hi);Xi.value=Xi.__value="top4";var Js=M(Xi);Js.value=Js.__value="size";var Ml=M(js,2),ta=w(Ml);{var Al=K=>{var H=jc(),pt=w(H);st(()=>Q(pt,`${c(E),A(()=>c(E).meta.compute_ms)??""}ms`)),Y(K,H)};_t(ta,K=>{c(E),A(()=>c(E)?.meta?.compute_ms)&&K(Al)})}var Nl=M(ta,2);{var Sl=K=>{var H=Qc(),pt=w(H);st(()=>Q(pt,`${c(E),A(()=>c(E).meta.features_used)??""} features`)),Y(K,H)};_t(Nl,K=>{c(E),A(()=>c(E)?.meta?.features_used)&&K(Sl)})}var ea=M(Zs,2);{var Cl=K=>{var H=Jc(),pt=w(H);st(()=>Q(pt,c(o))),Y(K,H)};_t(ea,K=>{c(o)&&K(Cl)})}var na=M(ea,2);{var Il=K=>{var H=tf(),pt=w(H);st(()=>Q(pt,`Failed to load clusters: ${c($)??""}`)),Y(K,H)};_t(na,K=>{c($)&&K(Il)})}var ra=M(na,2);{var Pl=K=>{var H=ef();Y(K,H)};_t(ra,K=>{c(_),c(E),c(u),c(o),A(()=>!c(_)&&c(E)&&c(u).length===0&&!c(o))&&K(Pl)})}var ia=M(ra,2);let sa;var aa=w(ia);Oe(aa,5,()=>c(u),Fe,(K,H)=>{const pt=Ss(()=>(c(H),A(()=>ct(c(H)))));var ce=lf();let ye;var Kt=w(ce),xe=w(Kt),fn=w(xe),Sn=w(fn),Bi=w(Sn),Xr=M(Sn,2),rr=w(Xr),ir=M(fn,2),Br=w(ir),Yr=M(xe,2),sr=w(Yr),ar=w(sr),Wr=w(ar),or=M(ar,2);let lr;var Yi=w(or),Ur=M(sr,2),Vr=w(Ur),Wi=w(Vr),Ui=M(Vr,2),Vi=w(Ui),Ki=M(Kt,2),ur=w(Ki),Kr=w(ur);Oe(Kr,1,()=>(Mt(c(pt)),A(()=>c(pt).tokens)),Fe,(re,gt)=>{var ie=sf(),Ze=w(ie);{var xt=yt=>{var wt=nf();st(it=>Ie(wt,"src",it),[()=>(c(gt),A(()=>b(c(gt))))]),ut("error",wt,()=>yr(At(c(gt)),c(gt).slice(2))),Y(yt,wt)},W=yt=>{var wt=rf();st(it=>bt(wt,1,`sig-fallback ${it??""}`,"svelte-nsv0zx"),[()=>(c(gt),A(()=>C(c(gt))))]),Y(yt,wt)};_t(Ze,yt=>{c(gt),Mt(Re),Mt(At),A(()=>b(c(gt))&&!Re(At(c(gt)),c(gt).slice(2)))?yt(xt):yt(W,!1)})}st((yt,wt)=>{bt(ie,1,`sig-icon ${yt??""}`,"svelte-nsv0zx"),Ie(ie,"title",wt)},[()=>(c(gt),A(()=>C(c(gt)))),()=>(c(gt),A(()=>k(c(gt))))]),Y(re,ie)});var Gi=M(Kr,2);{var Gr=re=>{var gt=af(),ie=w(gt);st(()=>{Ie(gt,"title",(Mt(c(pt)),A(()=>`+${c(pt).more} more`))),Q(ie,`+${Mt(c(pt)),A(()=>c(pt).more)??""}`)}),Y(re,gt)};_t(Gi,re=>{Mt(c(pt)),A(()=>c(pt).more>0)&&re(Gr)})}var Zi=M(ur,2);Oe(Zi,5,()=>(c(H),A(()=>c(H).placement_hist)),Fe,(re,gt,ie)=>{var Ze=of();st((xt,W)=>pn(Ze,`
                                                height: ${xt??""}%;
                                                background: ${W??""};
                                            `),[()=>(c(gt),c(H),A(()=>Math.max(2,c(gt)/j(c(H).placement_hist)*100))),()=>(Mt(De),A(()=>De(ie+1)))]),Y(re,Ze)}),st((re,gt,ie,Ze,xt,W,yt,wt,it)=>{ye=bt(ce,1,"cluster svelte-nsv0zx",null,ye,{selected:c(H).cluster_id===c(g)}),Q(Bi,`#${c(H),A(()=>c(H).cluster_id)??""}`),Ie(Xr,"title",re),Q(rr,gt),Ie(ir,"title",ie),Q(Br,Ze),pn(ar,`color: ${xt??""}`),Q(Wr,W),lr=bt(or,1,"delta svelte-nsv0zx",null,lr,{pos:c(H).delta_vs_base<0,neg:c(H).delta_vs_base>0}),Q(Yi,`${c(H),A(()=>c(H).delta_vs_base>0?"+":"")??""}${yt??""}`),Q(Wi,wt),Q(Vi,`${it??""}%`)},[()=>(c(H),A(()=>dt(c(H)))),()=>(c(H),A(()=>dt(c(H)))),()=>(c(H),A(()=>zt(c(H)))),()=>(c(H),A(()=>zt(c(H)))),()=>(Mt(De),c(H),A(()=>De(c(H).avg_placement))),()=>(c(H),A(()=>c(H).avg_placement.toFixed(2))),()=>(c(H),A(()=>c(H).delta_vs_base.toFixed(2))),()=>(c(H),A(()=>c(H).size.toLocaleString())),()=>(c(H),A(()=>Math.round(c(H).share*100)))]),ut("click",ce,()=>Z(c(H))),Y(K,ce)});var Rl=M(aa,2),Dl=w(Rl);{var Ll=K=>{var H=bf(),pt=be(H),ce=w(pt),ye=w(ce);{var Kt=xt=>{var W=uf();ut("click",W,()=>O(B,"list")),Y(xt,W)};_t(ye,xt=>{c(d)&&xt(Kt)})}var xe=M(ye,2),fn=w(xe),Sn=M(fn),Bi=w(Sn),Xr=M(ce,2),rr=w(Xr),ir=M(rr,2),Br=M(pt,2),Yr=w(Br),sr=M(w(Yr),2),ar=w(sr),Wr=M(Yr,2),or=M(w(Wr),2);let lr;var Yi=w(or),Ur=M(Wr,2),Vr=M(w(Ur),2),Wi=w(Vr),Ui=M(Ur,2),Vi=M(w(Ui),2),Ki=w(Vi),ur=M(Br,2);{var Kr=xt=>{var W=ff(),yt=M(w(W),2);Oe(yt,5,()=>(c(l),A(()=>c(l).signature_tokens)),Fe,(wt,it)=>{var qt=cf(),je=w(qt);st((Ce,hn)=>{bt(qt,1,`sig-chip ${Ce??""}`,"svelte-nsv0zx"),Q(je,hn)},[()=>(c(it),A(()=>C(c(it)))),()=>(c(it),A(()=>k(c(it))))]),ut("click",qt,()=>T(c(it))),Y(wt,qt)}),Y(xt,W)};_t(ur,xt=>{c(l),A(()=>c(l).signature_tokens?.length)&&xt(Kr)})}var Gi=M(ur,2),Gr=w(Gi),Zi=M(w(Gr),2);Oe(Zi,5,()=>(c(l),A(()=>c(l).top_units)),Fe,(xt,W)=>{var yt=df(),wt=w(yt);{var it=Et=>{var Tt=hf();st(Gt=>Ie(Tt,"src",Gt),[()=>(c(W),A(()=>b(c(W).token)))]),ut("error",Tt,()=>yr(At(c(W).token),c(W).token.slice(2))),Y(Et,Tt)},qt=Et=>{var Tt=vf();st(Gt=>bt(Tt,1,`fallback ${Gt??""}`,"svelte-nsv0zx"),[()=>(c(W),A(()=>C(c(W).token)))]),Y(Et,Tt)};_t(wt,Et=>{c(W),Mt(Re),Mt(At),A(()=>b(c(W).token)&&!Re(At(c(W).token),c(W).token.slice(2)))?Et(it):Et(qt,!1)})}var je=M(wt,2),Ce=w(je),hn=w(Ce),cr=M(Ce,2),Qe=w(cr),fr=w(Qe),vn=M(Qe,4),Cn=w(vn),hr=M(vn,4),In=w(hr);st((Et,Tt,Gt,se)=>{Q(hn,Et),Q(fr,Tt),Q(Cn,Gt),Q(In,`base ${se??""}`)},[()=>(c(W),A(()=>k(c(W).token))),()=>(c(W),A(()=>J(c(W).pct))),()=>(c(W),A(()=>tt(c(W).lift))),()=>(c(W),A(()=>J(c(W).base_pct)))]),ut("click",yt,()=>T(c(W).token)),Y(xt,yt)});var re=M(Gr,2),gt=M(w(re),2);Oe(gt,5,()=>(c(l),A(()=>c(l).top_traits)),Fe,(xt,W)=>{var yt=gf(),wt=w(yt);{var it=Et=>{var Tt=pf();st(Gt=>Ie(Tt,"src",Gt),[()=>(c(W),A(()=>b(c(W).token)))]),ut("error",Tt,()=>yr(At(c(W).token),c(W).token.slice(2))),Y(Et,Tt)},qt=Et=>{var Tt=_f();st(Gt=>bt(Tt,1,`fallback ${Gt??""}`,"svelte-nsv0zx"),[()=>(c(W),A(()=>C(c(W).token)))]),Y(Et,Tt)};_t(wt,Et=>{c(W),Mt(Re),Mt(At),A(()=>b(c(W).token)&&!Re(At(c(W).token),c(W).token.slice(2)))?Et(it):Et(qt,!1)})}var je=M(wt,2),Ce=w(je),hn=w(Ce),cr=M(Ce,2),Qe=w(cr),fr=w(Qe),vn=M(Qe,4),Cn=w(vn),hr=M(vn,4),In=w(hr);st((Et,Tt,Gt,se)=>{Q(hn,Et),Q(fr,Tt),Q(Cn,Gt),Q(In,`base ${se??""}`)},[()=>(c(W),A(()=>k(c(W).token))),()=>(c(W),A(()=>J(c(W).pct))),()=>(c(W),A(()=>tt(c(W).lift))),()=>(c(W),A(()=>J(c(W).base_pct)))]),ut("click",yt,()=>T(c(W).token)),Y(xt,yt)});var ie=M(re,2);{var Ze=xt=>{var W=wf(),yt=M(w(W),2);Oe(yt,5,()=>(c(l),A(()=>c(l).top_items)),Fe,(wt,it)=>{var qt=xf(),je=w(qt);{var Ce=se=>{var Je=mf();st(vr=>Ie(Je,"src",vr),[()=>(c(it),A(()=>b(c(it).token)))]),ut("error",Je,()=>yr(At(c(it).token),c(it).token.slice(2))),Y(se,Je)},hn=se=>{var Je=yf();st(vr=>bt(Je,1,`fallback ${vr??""}`,"svelte-nsv0zx"),[()=>(c(it),A(()=>C(c(it).token)))]),Y(se,Je)};_t(je,se=>{c(it),Mt(Re),Mt(At),A(()=>b(c(it).token)&&!Re(At(c(it).token),c(it).token.slice(2)))?se(Ce):se(hn,!1)})}var cr=M(je,2),Qe=w(cr),fr=w(Qe),vn=M(Qe,2),Cn=w(vn),hr=w(Cn),In=M(Cn,4),Et=w(In),Tt=M(In,4),Gt=w(Tt);st((se,Je,vr,Ol)=>{Q(fr,se),Q(hr,Je),Q(Et,vr),Q(Gt,`base ${Ol??""}`)},[()=>(c(it),A(()=>k(c(it).token))),()=>(c(it),A(()=>J(c(it).pct))),()=>(c(it),A(()=>tt(c(it).lift))),()=>(c(it),A(()=>J(c(it).base_pct)))]),ut("click",qt,()=>T(c(it).token)),Y(wt,qt)}),Y(xt,W)};_t(ie,xt=>{c(nt),A(()=>c(nt).use_items)&&xt(Ze)})}st((xt,W,yt,wt,it,qt)=>{Q(fn,`Cluster #${c(l),A(()=>c(l).cluster_id)??""} `),Q(Bi,`${xt??""} games`),rr.disabled=(c(l),A(()=>!c(l).signature_tokens?.length)),ir.disabled=(c(l),A(()=>!c(l).signature_tokens?.length)),pn(sr,`color: ${W??""}`),Q(ar,yt),lr=bt(or,1,"v svelte-nsv0zx",null,lr,{pos:c(l).delta_vs_base<0,neg:c(l).delta_vs_base>0}),Q(Yi,`${c(l),A(()=>c(l).delta_vs_base>0?"+":"")??""}${wt??""}`),Q(Wi,it),Q(Ki,qt)},[()=>(c(l),A(()=>c(l).size.toLocaleString())),()=>(Mt(De),c(l),A(()=>De(c(l).avg_placement))),()=>(c(l),A(()=>c(l).avg_placement.toFixed(2))),()=>(c(l),A(()=>c(l).delta_vs_base.toFixed(2))),()=>(c(l),A(()=>J(c(l).top4_rate))),()=>(c(l),A(()=>J(c(l).win_rate)))]),ut("click",rr,L),ut("click",ir,V),Y(K,H)},Fl=K=>{var H=$f();Y(K,H)};_t(Dl,K=>{c(l)?K(Ll):K(Fl,!1)})}st(()=>{qi.disabled=c(_),sa=bt(ia,1,"content svelte-nsv0zx",null,sa,{narrow:c(d),showDetails:c(d)&&c(B)==="details"})}),ut("pointerdown",ft,cn),ut("pointermove",ft,tr),ut("pointerup",ft,Nn),ut("pointercancel",ft,Nn),di(Hr,()=>c(nt).n_clusters,K=>jr(nt,c(nt).n_clusters=K)),xa(wl,()=>c(nt).use_traits,K=>jr(nt,c(nt).use_traits=K)),xa(bl,()=>c(nt).use_items,K=>jr(nt,c(nt).use_items=K)),di($l,()=>c(nt).min_token_freq,K=>jr(nt,c(nt).min_token_freq=K)),ut("click",qi,U),nc(Qs,()=>c(S),K=>O(S,K)),Y(I,et)};_t(Di,I=>{c(p)&&I(Li)})}Do(Se,I=>O(N,I),()=>c(N)),st(()=>{Vt=bt(Se,1,"cluster-explorer svelte-nsv0zx",null,Vt,{open:c(p),resizing:c(X)}),pn(Se,`width: ${c(f)}px;`),Ie(te,"aria-expanded",c(p))}),ut("click",te,q),Y(t,Se),pe(),i()}function Ta(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}var zf={value:()=>{}};function Lr(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ri(n)}function ri(t){this._=t}function Mf(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ri.prototype=Lr.prototype={constructor:ri,on:function(t,e){var n=this._,r=Mf(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=Af(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=za(n[i],t.name,e);else if(e==null)for(i in n)n[i]=za(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ri(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Af(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function za(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=zf,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ds="http://www.w3.org/1999/xhtml";const Ma={svg:"http://www.w3.org/2000/svg",xhtml:ds,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ii(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ma.hasOwnProperty(e)?{space:Ma[e],local:t}:t}function Nf(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ds&&e.documentElement.namespaceURI===ds?e.createElement(t):e.createElementNS(n,t)}}function Sf(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Yo(t){var e=Ii(t);return(e.local?Sf:Nf)(e)}function Cf(){}function Os(t){return t==null?Cf:function(){return this.querySelector(t)}}function If(t){typeof t!="function"&&(t=Os(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=new Array(a),u,l,f=0;f<a;++f)(u=s[f])&&(l=t.call(u,u.__data__,f,s))&&("__data__"in u&&(l.__data__=u.__data__),o[f]=l);return new Jt(r,this._parents)}function Pf(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Rf(){return[]}function Wo(t){return t==null?Rf:function(){return this.querySelectorAll(t)}}function Df(t){return function(){return Pf(t.apply(this,arguments))}}function Lf(t){typeof t=="function"?t=Df(t):t=Wo(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],o=a.length,u,l=0;l<o;++l)(u=a[l])&&(r.push(t.call(u,u.__data__,l,a)),i.push(u));return new Jt(r,i)}function Uo(t){return function(){return this.matches(t)}}function Vo(t){return function(e){return e.matches(t)}}var Ff=Array.prototype.find;function Of(t){return function(){return Ff.call(this.children,t)}}function qf(){return this.firstElementChild}function Hf(t){return this.select(t==null?qf:Of(typeof t=="function"?t:Vo(t)))}var Xf=Array.prototype.filter;function Bf(){return Array.from(this.children)}function Yf(t){return function(){return Xf.call(this.children,t)}}function Wf(t){return this.selectAll(t==null?Bf:Yf(typeof t=="function"?t:Vo(t)))}function Uf(t){typeof t!="function"&&(t=Uo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],u,l=0;l<a;++l)(u=s[l])&&t.call(u,u.__data__,l,s)&&o.push(u);return new Jt(r,this._parents)}function Ko(t){return new Array(t.length)}function Vf(){return new Jt(this._enter||this._groups.map(Ko),this._parents)}function gi(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}gi.prototype={constructor:gi,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Kf(t){return function(){return t}}function Gf(t,e,n,r,i,s){for(var a=0,o,u=e.length,l=s.length;a<l;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new gi(t,s[a]);for(;a<u;++a)(o=e[a])&&(i[a]=o)}function Zf(t,e,n,r,i,s,a){var o,u,l=new Map,f=e.length,d=s.length,h=new Array(f),v;for(o=0;o<f;++o)(u=e[o])&&(h[o]=v=a.call(u,u.__data__,o,e)+"",l.has(v)?i[o]=u:l.set(v,u));for(o=0;o<d;++o)v=a.call(t,s[o],o,s)+"",(u=l.get(v))?(r[o]=u,u.__data__=s[o],l.delete(v)):n[o]=new gi(t,s[o]);for(o=0;o<f;++o)(u=e[o])&&l.get(h[o])===u&&(i[o]=u)}function jf(t){return t.__data__}function Qf(t,e){if(!arguments.length)return Array.from(this,jf);var n=e?Zf:Gf,r=this._parents,i=this._groups;typeof t!="function"&&(t=Kf(t));for(var s=i.length,a=new Array(s),o=new Array(s),u=new Array(s),l=0;l<s;++l){var f=r[l],d=i[l],h=d.length,v=Jf(t.call(f,f&&f.__data__,l,r)),m=v.length,y=o[l]=new Array(m),p=a[l]=new Array(m),_=u[l]=new Array(h);n(f,d,y,p,_,v,e);for(var $=0,E=0,g,S;$<m;++$)if(g=y[$]){for($>=E&&(E=$+1);!(S=p[E])&&++E<m;);g._next=S||null}}return a=new Jt(a,r),a._enter=o,a._exit=u,a}function Jf(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function th(){return new Jt(this._exit||this._groups.map(Ko),this._parents)}function eh(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function nh(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),u=0;u<a;++u)for(var l=n[u],f=r[u],d=l.length,h=o[u]=new Array(d),v,m=0;m<d;++m)(v=l[m]||f[m])&&(h[m]=v);for(;u<i;++u)o[u]=n[u];return new Jt(o,this._parents)}function rh(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function ih(t){t||(t=sh);function e(d,h){return d&&h?t(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,u=i[s]=new Array(o),l,f=0;f<o;++f)(l=a[f])&&(u[f]=l);u.sort(e)}return new Jt(i,this._parents).order()}function sh(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ah(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function oh(){return Array.from(this)}function lh(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function uh(){let t=0;for(const e of this)++t;return t}function ch(){return!this.node()}function fh(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function hh(t){return function(){this.removeAttribute(t)}}function vh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function dh(t,e){return function(){this.setAttribute(t,e)}}function ph(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function _h(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function gh(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function mh(t,e){var n=Ii(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?vh:hh:typeof e=="function"?n.local?gh:_h:n.local?ph:dh)(n,e))}function Go(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function yh(t){return function(){this.style.removeProperty(t)}}function xh(t,e,n){return function(){this.style.setProperty(t,e,n)}}function wh(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function bh(t,e,n){return arguments.length>1?this.each((e==null?yh:typeof e=="function"?wh:xh)(t,e,n??"")):Vn(this.node(),t)}function Vn(t,e){return t.style.getPropertyValue(e)||Go(t).getComputedStyle(t,null).getPropertyValue(e)}function $h(t){return function(){delete this[t]}}function kh(t,e){return function(){this[t]=e}}function Eh(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Th(t,e){return arguments.length>1?this.each((e==null?$h:typeof e=="function"?Eh:kh)(t,e)):this.node()[t]}function Zo(t){return t.trim().split(/^|\s+/)}function qs(t){return t.classList||new jo(t)}function jo(t){this._node=t,this._names=Zo(t.getAttribute("class")||"")}jo.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Qo(t,e){for(var n=qs(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Jo(t,e){for(var n=qs(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function zh(t){return function(){Qo(this,t)}}function Mh(t){return function(){Jo(this,t)}}function Ah(t,e){return function(){(e.apply(this,arguments)?Qo:Jo)(this,t)}}function Nh(t,e){var n=Zo(t+"");if(arguments.length<2){for(var r=qs(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Ah:e?zh:Mh)(n,e))}function Sh(){this.textContent=""}function Ch(t){return function(){this.textContent=t}}function Ih(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ph(t){return arguments.length?this.each(t==null?Sh:(typeof t=="function"?Ih:Ch)(t)):this.node().textContent}function Rh(){this.innerHTML=""}function Dh(t){return function(){this.innerHTML=t}}function Lh(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Fh(t){return arguments.length?this.each(t==null?Rh:(typeof t=="function"?Lh:Dh)(t)):this.node().innerHTML}function Oh(){this.nextSibling&&this.parentNode.appendChild(this)}function qh(){return this.each(Oh)}function Hh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Xh(){return this.each(Hh)}function Bh(t){var e=typeof t=="function"?t:Yo(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Yh(){return null}function Wh(t,e){var n=typeof t=="function"?t:Yo(t),r=e==null?Yh:typeof e=="function"?e:Os(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Uh(){var t=this.parentNode;t&&t.removeChild(this)}function Vh(){return this.each(Uh)}function Kh(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Gh(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Zh(t){return this.select(t?Gh:Kh)}function jh(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Qh(t){return function(e){t.call(this,e,this.__data__)}}function Jh(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function tv(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function ev(t,e,n){return function(){var r=this.__on,i,s=Qh(e);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function nv(t,e,n){var r=Jh(t+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var u=0,l=o.length,f;u<l;++u)for(i=0,f=o[u];i<s;++i)if((a=r[i]).type===f.type&&a.name===f.name)return f.value}return}for(o=e?ev:tv,i=0;i<s;++i)this.each(o(r[i],e,n));return this}function tl(t,e,n){var r=Go(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function rv(t,e){return function(){return tl(this,t,e)}}function iv(t,e){return function(){return tl(this,t,e.apply(this,arguments))}}function sv(t,e){return this.each((typeof e=="function"?iv:rv)(t,e))}function*av(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var el=[null];function Jt(t,e){this._groups=t,this._parents=e}function Fr(){return new Jt([[document.documentElement]],el)}function ov(){return this}Jt.prototype=Fr.prototype={constructor:Jt,select:If,selectAll:Lf,selectChild:Hf,selectChildren:Wf,filter:Uf,data:Qf,enter:Vf,exit:th,join:eh,merge:nh,selection:ov,order:rh,sort:ih,call:ah,nodes:oh,node:lh,size:uh,empty:ch,each:fh,attr:mh,style:bh,property:Th,classed:Nh,text:Ph,html:Fh,raise:qh,lower:Xh,append:Bh,insert:Wh,remove:Vh,clone:Zh,datum:jh,on:nv,dispatch:sv,[Symbol.iterator]:av};function Ht(t){return typeof t=="string"?new Jt([[document.querySelector(t)]],[document.documentElement]):new Jt([[t]],el)}function lv(t){let e;for(;e=t.sourceEvent;)t=e;return t}function qe(t,e){if(t=lv(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const uv={passive:!1},Ar={capture:!0,passive:!1};function es(t){t.stopImmediatePropagation()}function qn(t){t.preventDefault(),t.stopImmediatePropagation()}function nl(t){var e=t.document.documentElement,n=Ht(t).on("dragstart.drag",qn,Ar);"onselectstart"in e?n.on("selectstart.drag",qn,Ar):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function rl(t,e){var n=t.document.documentElement,r=Ht(t).on("dragstart.drag",null);e&&(r.on("click.drag",qn,Ar),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Qr=t=>()=>t;function ps(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:a,y:o,dx:u,dy:l,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:f}})}ps.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function cv(t){return!t.ctrlKey&&!t.button}function fv(){return this.parentNode}function hv(t,e){return e??{x:t.x,y:t.y}}function vv(){return navigator.maxTouchPoints||"ontouchstart"in this}function dv(){var t=cv,e=fv,n=hv,r=vv,i={},s=Lr("start","drag","end"),a=0,o,u,l,f,d=0;function h(g){g.on("mousedown.drag",v).filter(r).on("touchstart.drag",p).on("touchmove.drag",_,uv).on("touchend.drag touchcancel.drag",$).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(g,S){if(!(f||!t.call(this,g,S))){var N=E(this,e.call(this,g,S),g,S,"mouse");N&&(Ht(g.view).on("mousemove.drag",m,Ar).on("mouseup.drag",y,Ar),nl(g.view),es(g),l=!1,o=g.clientX,u=g.clientY,N("start",g))}}function m(g){if(qn(g),!l){var S=g.clientX-o,N=g.clientY-u;l=S*S+N*N>d}i.mouse("drag",g)}function y(g){Ht(g.view).on("mousemove.drag mouseup.drag",null),rl(g.view,l),qn(g),i.mouse("end",g)}function p(g,S){if(t.call(this,g,S)){var N=g.changedTouches,P=e.call(this,g,S),R=N.length,B,X;for(B=0;B<R;++B)(X=E(this,P,g,S,N[B].identifier,N[B]))&&(es(g),X("start",g,N[B]))}}function _(g){var S=g.changedTouches,N=S.length,P,R;for(P=0;P<N;++P)(R=i[S[P].identifier])&&(qn(g),R("drag",g,S[P]))}function $(g){var S=g.changedTouches,N=S.length,P,R;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),P=0;P<N;++P)(R=i[S[P].identifier])&&(es(g),R("end",g,S[P]))}function E(g,S,N,P,R,B){var X=s.copy(),at=qe(B||N,S),vt,nt,x;if((x=n.call(g,new ps("beforestart",{sourceEvent:N,target:h,identifier:R,active:a,x:at[0],y:at[1],dx:0,dy:0,dispatch:X}),P))!=null)return vt=x.x-at[0]||0,nt=x.y-at[1]||0,function F(z,q,U){var Z=at,k;switch(z){case"start":i[R]=F,k=a++;break;case"end":delete i[R],--a;case"drag":at=qe(U||q,S),k=a;break}X.call(z,g,new ps(z,{sourceEvent:q,subject:x,target:h,identifier:R,active:k,x:at[0]+vt,y:at[1]+nt,dx:at[0]-Z[0],dy:at[1]-Z[1],dispatch:X}),P)}}return h.filter=function(g){return arguments.length?(t=typeof g=="function"?g:Qr(!!g),h):t},h.container=function(g){return arguments.length?(e=typeof g=="function"?g:Qr(g),h):e},h.subject=function(g){return arguments.length?(n=typeof g=="function"?g:Qr(g),h):n},h.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:Qr(!!g),h):r},h.on=function(){var g=s.on.apply(s,arguments);return g===s?h:g},h.clickDistance=function(g){return arguments.length?(d=(g=+g)*g,h):Math.sqrt(d)},h}function Hs(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function il(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Or(){}var Nr=.7,mi=1/Nr,Hn="\\s*([+-]?\\d+)\\s*",Sr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ee="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pv=/^#([0-9a-f]{3,8})$/,_v=new RegExp(`^rgb\\(${Hn},${Hn},${Hn}\\)$`),gv=new RegExp(`^rgb\\(${Ee},${Ee},${Ee}\\)$`),mv=new RegExp(`^rgba\\(${Hn},${Hn},${Hn},${Sr}\\)$`),yv=new RegExp(`^rgba\\(${Ee},${Ee},${Ee},${Sr}\\)$`),xv=new RegExp(`^hsl\\(${Sr},${Ee},${Ee}\\)$`),wv=new RegExp(`^hsla\\(${Sr},${Ee},${Ee},${Sr}\\)$`),Aa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hs(Or,Cr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Na,formatHex:Na,formatHex8:bv,formatHsl:$v,formatRgb:Sa,toString:Sa});function Na(){return this.rgb().formatHex()}function bv(){return this.rgb().formatHex8()}function $v(){return sl(this).formatHsl()}function Sa(){return this.rgb().formatRgb()}function Cr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=pv.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ca(e):n===3?new Bt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Jr(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Jr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=_v.exec(t))?new Bt(e[1],e[2],e[3],1):(e=gv.exec(t))?new Bt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=mv.exec(t))?Jr(e[1],e[2],e[3],e[4]):(e=yv.exec(t))?Jr(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=xv.exec(t))?Ra(e[1],e[2]/100,e[3]/100,1):(e=wv.exec(t))?Ra(e[1],e[2]/100,e[3]/100,e[4]):Aa.hasOwnProperty(t)?Ca(Aa[t]):t==="transparent"?new Bt(NaN,NaN,NaN,0):null}function Ca(t){return new Bt(t>>16&255,t>>8&255,t&255,1)}function Jr(t,e,n,r){return r<=0&&(t=e=n=NaN),new Bt(t,e,n,r)}function kv(t){return t instanceof Or||(t=Cr(t)),t?(t=t.rgb(),new Bt(t.r,t.g,t.b,t.opacity)):new Bt}function _s(t,e,n,r){return arguments.length===1?kv(t):new Bt(t,e,n,r??1)}function Bt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Hs(Bt,_s,il(Or,{brighter(t){return t=t==null?mi:Math.pow(mi,t),new Bt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Nr:Math.pow(Nr,t),new Bt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Bt(bn(this.r),bn(this.g),bn(this.b),yi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ia,formatHex:Ia,formatHex8:Ev,formatRgb:Pa,toString:Pa}));function Ia(){return`#${mn(this.r)}${mn(this.g)}${mn(this.b)}`}function Ev(){return`#${mn(this.r)}${mn(this.g)}${mn(this.b)}${mn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Pa(){const t=yi(this.opacity);return`${t===1?"rgb(":"rgba("}${bn(this.r)}, ${bn(this.g)}, ${bn(this.b)}${t===1?")":`, ${t})`}`}function yi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function bn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function mn(t){return t=bn(t),(t<16?"0":"")+t.toString(16)}function Ra(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new fe(t,e,n,r)}function sl(t){if(t instanceof fe)return new fe(t.h,t.s,t.l,t.opacity);if(t instanceof Or||(t=Cr(t)),!t)return new fe;if(t instanceof fe)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,u=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=u<.5?s+i:2-s-i,a*=60):o=u>0&&u<1?0:a,new fe(a,o,u,t.opacity)}function Tv(t,e,n,r){return arguments.length===1?sl(t):new fe(t,e,n,r??1)}function fe(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Hs(fe,Tv,il(Or,{brighter(t){return t=t==null?mi:Math.pow(mi,t),new fe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Nr:Math.pow(Nr,t),new fe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Bt(ns(t>=240?t-240:t+120,i,r),ns(t,i,r),ns(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new fe(Da(this.h),ti(this.s),ti(this.l),yi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=yi(this.opacity);return`${t===1?"hsl(":"hsla("}${Da(this.h)}, ${ti(this.s)*100}%, ${ti(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Da(t){return t=(t||0)%360,t<0?t+360:t}function ti(t){return Math.max(0,Math.min(1,t||0))}function ns(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const al=t=>()=>t;function zv(t,e){return function(n){return t+n*e}}function Mv(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Av(t){return(t=+t)==1?ol:function(e,n){return n-e?Mv(e,n,t):al(isNaN(e)?n:e)}}function ol(t,e){var n=e-t;return n?zv(t,n):al(isNaN(t)?e:t)}const La=(function t(e){var n=Av(e);function r(i,s){var a=n((i=_s(i)).r,(s=_s(s)).r),o=n(i.g,s.g),u=n(i.b,s.b),l=ol(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=o(f),i.b=u(f),i.opacity=l(f),i+""}}return r.gamma=t,r})(1);function nn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var gs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rs=new RegExp(gs.source,"g");function Nv(t){return function(){return t}}function Sv(t){return function(e){return t(e)+""}}function Cv(t,e){var n=gs.lastIndex=rs.lastIndex=0,r,i,s,a=-1,o=[],u=[];for(t=t+"",e=e+"";(r=gs.exec(t))&&(i=rs.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,u.push({i:a,x:nn(r,i)})),n=rs.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?u[0]?Sv(u[0].x):Nv(e):(e=u.length,function(l){for(var f=0,d;f<e;++f)o[(d=u[f]).i]=d.x(l);return o.join("")})}var Fa=180/Math.PI,ms={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ll(t,e,n,r,i,s){var a,o,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,u/=o),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Fa,skewX:Math.atan(u)*Fa,scaleX:a,scaleY:o}}var ei;function Iv(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ms:ll(e.a,e.b,e.c,e.d,e.e,e.f)}function Pv(t){return t==null||(ei||(ei=document.createElementNS("http://www.w3.org/2000/svg","g")),ei.setAttribute("transform",t),!(t=ei.transform.baseVal.consolidate()))?ms:(t=t.matrix,ll(t.a,t.b,t.c,t.d,t.e,t.f))}function ul(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,f,d,h,v,m){if(l!==d||f!==h){var y=v.push("translate(",null,e,null,n);m.push({i:y-4,x:nn(l,d)},{i:y-2,x:nn(f,h)})}else(d||h)&&v.push("translate("+d+e+h+n)}function a(l,f,d,h){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:nn(l,f)})):f&&d.push(i(d)+"rotate("+f+r)}function o(l,f,d,h){l!==f?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:nn(l,f)}):f&&d.push(i(d)+"skewX("+f+r)}function u(l,f,d,h,v,m){if(l!==d||f!==h){var y=v.push(i(v)+"scale(",null,",",null,")");m.push({i:y-4,x:nn(l,d)},{i:y-2,x:nn(f,h)})}else(d!==1||h!==1)&&v.push(i(v)+"scale("+d+","+h+")")}return function(l,f){var d=[],h=[];return l=t(l),f=t(f),s(l.translateX,l.translateY,f.translateX,f.translateY,d,h),a(l.rotate,f.rotate,d,h),o(l.skewX,f.skewX,d,h),u(l.scaleX,l.scaleY,f.scaleX,f.scaleY,d,h),l=f=null,function(v){for(var m=-1,y=h.length,p;++m<y;)d[(p=h[m]).i]=p.x(v);return d.join("")}}}var Rv=ul(Iv,"px, ","px)","deg)"),Dv=ul(Pv,", ",")",")"),Lv=1e-12;function Oa(t){return((t=Math.exp(t))+1/t)/2}function Fv(t){return((t=Math.exp(t))-1/t)/2}function Ov(t){return((t=Math.exp(2*t))-1)/(t+1)}const qv=(function t(e,n,r){function i(s,a){var o=s[0],u=s[1],l=s[2],f=a[0],d=a[1],h=a[2],v=f-o,m=d-u,y=v*v+m*m,p,_;if(y<Lv)_=Math.log(h/l)/e,p=function(P){return[o+P*v,u+P*m,l*Math.exp(e*P*_)]};else{var $=Math.sqrt(y),E=(h*h-l*l+r*y)/(2*l*n*$),g=(h*h-l*l-r*y)/(2*h*n*$),S=Math.log(Math.sqrt(E*E+1)-E),N=Math.log(Math.sqrt(g*g+1)-g);_=(N-S)/e,p=function(P){var R=P*_,B=Oa(S),X=l/(n*$)*(B*Ov(e*R+S)-Fv(S));return[o+X*v,u+X*m,l*B/Oa(e*R+S)]}}return p.duration=_*1e3*e/Math.SQRT2,p}return i.rho=function(s){var a=Math.max(.001,+s),o=a*a,u=o*o;return t(a,o,u)},i})(Math.SQRT2,2,4);var Kn=0,xr=0,dr=0,cl=1e3,xi,wr,wi=0,zn=0,Pi=0,Ir=typeof performance=="object"&&performance.now?performance:Date,fl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xs(){return zn||(fl(Hv),zn=Ir.now()+Pi)}function Hv(){zn=0}function bi(){this._call=this._time=this._next=null}bi.prototype=Bs.prototype={constructor:bi,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Xs():+n)+(e==null?0:+e),!this._next&&wr!==this&&(wr?wr._next=this:xi=this,wr=this),this._call=t,this._time=n,ys()},stop:function(){this._call&&(this._call=null,this._time=1/0,ys())}};function Bs(t,e,n){var r=new bi;return r.restart(t,e,n),r}function Xv(){Xs(),++Kn;for(var t=xi,e;t;)(e=zn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Kn}function qa(){zn=(wi=Ir.now())+Pi,Kn=xr=0;try{Xv()}finally{Kn=0,Yv(),zn=0}}function Bv(){var t=Ir.now(),e=t-wi;e>cl&&(Pi-=e,wi=t)}function Yv(){for(var t,e=xi,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:xi=n);wr=t,ys(r)}function ys(t){if(!Kn){xr&&(xr=clearTimeout(xr));var e=t-zn;e>24?(t<1/0&&(xr=setTimeout(qa,t-Ir.now()-Pi)),dr&&(dr=clearInterval(dr))):(dr||(wi=Ir.now(),dr=setInterval(Bv,cl)),Kn=1,fl(qa))}}function Ha(t,e,n){var r=new bi;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Wv=Lr("start","end","cancel","interrupt"),Uv=[],hl=0,Xa=1,xs=2,ii=3,Ba=4,ws=5,si=6;function Ri(t,e,n,r,i,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Vv(t,n,{name:e,index:r,group:i,on:Wv,tween:Uv,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:hl})}function Ys(t,e){var n=_e(t,e);if(n.state>hl)throw new Error("too late; already scheduled");return n}function Ne(t,e){var n=_e(t,e);if(n.state>ii)throw new Error("too late; already running");return n}function _e(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Vv(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Bs(s,0,n.time);function s(l){n.state=Xa,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var f,d,h,v;if(n.state!==Xa)return u();for(f in r)if(v=r[f],v.name===n.name){if(v.state===ii)return Ha(a);v.state===Ba?(v.state=si,v.timer.stop(),v.on.call("interrupt",t,t.__data__,v.index,v.group),delete r[f]):+f<e&&(v.state=si,v.timer.stop(),v.on.call("cancel",t,t.__data__,v.index,v.group),delete r[f])}if(Ha(function(){n.state===ii&&(n.state=Ba,n.timer.restart(o,n.delay,n.time),o(l))}),n.state=xs,n.on.call("start",t,t.__data__,n.index,n.group),n.state===xs){for(n.state=ii,i=new Array(h=n.tween.length),f=0,d=-1;f<h;++f)(v=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=v);i.length=d+1}}function o(l){for(var f=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=ws,1),d=-1,h=i.length;++d<h;)i[d].call(t,f);n.state===ws&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=si,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function ai(t,e){var n=t.__transition,r,i,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){s=!1;continue}i=r.state>xs&&r.state<ws,r.state=si,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}s&&delete t.__transition}}function Kv(t){return this.each(function(){ai(this,t)})}function Gv(t,e){var n,r;return function(){var i=Ne(this,t),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Zv(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Ne(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=o;break}u===l&&i.push(o)}s.tween=i}}function jv(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=_e(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Gv:Zv)(n,t,e))}function Ws(t,e,n){var r=t._id;return t.each(function(){var i=Ne(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return _e(i,r).value[e]}}function vl(t,e){var n;return(typeof e=="number"?nn:e instanceof Cr?La:(n=Cr(e))?(e=n,La):Cv)(t,e)}function Qv(t){return function(){this.removeAttribute(t)}}function Jv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function td(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===r?s:s=e(r=a,n)}}function ed(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?s:s=e(r=a,n)}}function nd(t,e,n){var r,i,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),u=o+"",a===u?null:a===r&&u===i?s:(i=u,s=e(r=a,o)))}}function rd(t,e,n){var r,i,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),u=o+"",a===u?null:a===r&&u===i?s:(i=u,s=e(r=a,o)))}}function id(t,e){var n=Ii(t),r=n==="transform"?Dv:vl;return this.attrTween(t,typeof e=="function"?(n.local?rd:nd)(n,r,Ws(this,"attr."+t,e)):e==null?(n.local?Jv:Qv)(n):(n.local?ed:td)(n,r,e))}function sd(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ad(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function od(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&ad(t,s)),n}return i._value=e,i}function ld(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&sd(t,s)),n}return i._value=e,i}function ud(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ii(t);return this.tween(n,(r.local?od:ld)(r,e))}function cd(t,e){return function(){Ys(this,t).delay=+e.apply(this,arguments)}}function fd(t,e){return e=+e,function(){Ys(this,t).delay=e}}function hd(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?cd:fd)(e,t)):_e(this.node(),e).delay}function vd(t,e){return function(){Ne(this,t).duration=+e.apply(this,arguments)}}function dd(t,e){return e=+e,function(){Ne(this,t).duration=e}}function pd(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?vd:dd)(e,t)):_e(this.node(),e).duration}function _d(t,e){if(typeof e!="function")throw new Error;return function(){Ne(this,t).ease=e}}function gd(t){var e=this._id;return arguments.length?this.each(_d(e,t)):_e(this.node(),e).ease}function md(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ne(this,t).ease=n}}function yd(t){if(typeof t!="function")throw new Error;return this.each(md(this._id,t))}function xd(t){typeof t!="function"&&(t=Uo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],u,l=0;l<a;++l)(u=s[l])&&t.call(u,u.__data__,l,s)&&o.push(u);return new Ue(r,this._parents,this._name,this._id)}function wd(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var u=e[o],l=n[o],f=u.length,d=a[o]=new Array(f),h,v=0;v<f;++v)(h=u[v]||l[v])&&(d[v]=h);for(;o<r;++o)a[o]=e[o];return new Ue(a,this._parents,this._name,this._id)}function bd(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function $d(t,e,n){var r,i,s=bd(e)?Ys:Ne;return function(){var a=s(this,t),o=a.on;o!==r&&(i=(r=o).copy()).on(e,n),a.on=i}}function kd(t,e){var n=this._id;return arguments.length<2?_e(this.node(),n).on.on(t):this.each($d(n,t,e))}function Ed(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Td(){return this.on("end.remove",Ed(this._id))}function zd(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Os(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],u=o.length,l=s[a]=new Array(u),f,d,h=0;h<u;++h)(f=o[h])&&(d=t.call(f,f.__data__,h,o))&&("__data__"in f&&(d.__data__=f.__data__),l[h]=d,Ri(l[h],e,n,h,l,_e(f,n)));return new Ue(s,this._parents,e,n)}function Md(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Wo(t));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var u=r[o],l=u.length,f,d=0;d<l;++d)if(f=u[d]){for(var h=t.call(f,f.__data__,d,u),v,m=_e(f,n),y=0,p=h.length;y<p;++y)(v=h[y])&&Ri(v,e,n,y,h,m);s.push(h),a.push(f)}return new Ue(s,a,e,n)}var Ad=Fr.prototype.constructor;function Nd(){return new Ad(this._groups,this._parents)}function Sd(t,e){var n,r,i;return function(){var s=Vn(this,t),a=(this.style.removeProperty(t),Vn(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}function dl(t){return function(){this.style.removeProperty(t)}}function Cd(t,e,n){var r,i=n+"",s;return function(){var a=Vn(this,t);return a===i?null:a===r?s:s=e(r=a,n)}}function Id(t,e,n){var r,i,s;return function(){var a=Vn(this,t),o=n(this),u=o+"";return o==null&&(u=o=(this.style.removeProperty(t),Vn(this,t))),a===u?null:a===r&&u===i?s:(i=u,s=e(r=a,o))}}function Pd(t,e){var n,r,i,s="style."+e,a="end."+s,o;return function(){var u=Ne(this,t),l=u.on,f=u.value[s]==null?o||(o=dl(e)):void 0;(l!==n||i!==f)&&(r=(n=l).copy()).on(a,i=f),u.on=r}}function Rd(t,e,n){var r=(t+="")=="transform"?Rv:vl;return e==null?this.styleTween(t,Sd(t,r)).on("end.style."+t,dl(t)):typeof e=="function"?this.styleTween(t,Id(t,r,Ws(this,"style."+t,e))).each(Pd(this._id,t)):this.styleTween(t,Cd(t,r,e),n).on("end.style."+t,null)}function Dd(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Ld(t,e,n){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Dd(t,a,n)),r}return s._value=e,s}function Fd(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Ld(t,e,n??""))}function Od(t){return function(){this.textContent=t}}function qd(t){return function(){var e=t(this);this.textContent=e??""}}function Hd(t){return this.tween("text",typeof t=="function"?qd(Ws(this,"text",t)):Od(t==null?"":t+""))}function Xd(t){return function(e){this.textContent=t.call(this,e)}}function Bd(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Xd(i)),e}return r._value=t,r}function Yd(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Bd(t))}function Wd(){for(var t=this._name,e=this._id,n=pl(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,u,l=0;l<o;++l)if(u=a[l]){var f=_e(u,e);Ri(u,t,n,l,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Ue(r,this._parents,t,n)}function Ud(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},u={value:function(){--i===0&&s()}};n.each(function(){var l=Ne(this,r),f=l.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(u)),l.on=e}),i===0&&s()})}var Vd=0;function Ue(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function pl(){return++Vd}var Pe=Fr.prototype;Ue.prototype={constructor:Ue,select:zd,selectAll:Md,selectChild:Pe.selectChild,selectChildren:Pe.selectChildren,filter:xd,merge:wd,selection:Nd,transition:Wd,call:Pe.call,nodes:Pe.nodes,node:Pe.node,size:Pe.size,empty:Pe.empty,each:Pe.each,on:kd,attr:id,attrTween:ud,style:Rd,styleTween:Fd,text:Hd,textTween:Yd,remove:Td,tween:jv,delay:hd,duration:pd,ease:gd,easeVarying:yd,end:Ud,[Symbol.iterator]:Pe[Symbol.iterator]};function Kd(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Gd={time:null,delay:0,duration:250,ease:Kd};function Zd(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function jd(t){var e,n;t instanceof Ue?(e=t._id,t=t._name):(e=pl(),(n=Gd).time=Xs(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,u,l=0;l<o;++l)(u=a[l])&&Ri(u,t,e,l,a,n||Zd(u,e));return new Ue(r,this._parents,t,e)}Fr.prototype.interrupt=Kv;Fr.prototype.transition=jd;const bs=Math.PI,$s=2*bs,dn=1e-6,Qd=$s-dn;function _l(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Jd(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return _l;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class tp{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?_l:Jd(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,u=r-e,l=i-n,f=a-e,d=o-n,h=f*f+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>dn)if(!(Math.abs(d*u-l*f)>dn)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-a,m=i-o,y=u*u+l*l,p=v*v+m*m,_=Math.sqrt(y),$=Math.sqrt(h),E=s*Math.tan((bs-Math.acos((y+h-p)/(2*_*$)))/2),g=E/$,S=E/_;Math.abs(g-1)>dn&&this._append`L${e+g*f},${n+g*d}`,this._append`A${s},${s},0,0,${+(d*v>f*m)},${this._x1=e+S*u},${this._y1=n+S*l}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),u=r*Math.sin(i),l=e+o,f=n+u,d=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${l},${f}`:(Math.abs(this._x1-l)>dn||Math.abs(this._y1-f)>dn)&&this._append`L${l},${f}`,r&&(h<0&&(h=h%$s+$s),h>Qd?this._append`A${r},${r},0,1,${d},${e-o},${n-u}A${r},${r},0,1,${d},${this._x1=l},${this._y1=f}`:h>dn&&this._append`A${r},${r},0,${+(h>=bs)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function ep(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var s,a=n.length,o,u=0,l=0;for(s=0;s<a;++s)o=n[s],u+=o.x,l+=o.y;for(u=(u/a-t)*r,l=(l/a-e)*r,s=0;s<a;++s)o=n[s],o.x-=u,o.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(t=+s,i):t},i.y=function(s){return arguments.length?(e=+s,i):e},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function np(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return gl(this.cover(e,n),e,n,t)}function gl(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s=t._root,a={data:r},o=t._x0,u=t._y0,l=t._x1,f=t._y1,d,h,v,m,y,p,_,$;if(!s)return t._root=a,t;for(;s.length;)if((y=e>=(d=(o+l)/2))?o=d:l=d,(p=n>=(h=(u+f)/2))?u=h:f=h,i=s,!(s=s[_=p<<1|y]))return i[_]=a,t;if(v=+t._x.call(null,s.data),m=+t._y.call(null,s.data),e===v&&n===m)return a.next=s,i?i[_]=a:t._root=a,t;do i=i?i[_]=new Array(4):t._root=new Array(4),(y=e>=(d=(o+l)/2))?o=d:l=d,(p=n>=(h=(u+f)/2))?u=h:f=h;while((_=p<<1|y)===($=(m>=h)<<1|v>=d));return i[$]=s,i[_]=a,t}function rp(t){var e,n,r=t.length,i,s,a=new Array(r),o=new Array(r),u=1/0,l=1/0,f=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(a[n]=i,o[n]=s,i<u&&(u=i),i>f&&(f=i),s<l&&(l=s),s>d&&(d=s));if(u>f||l>d)return this;for(this.cover(u,l).cover(f,d),n=0;n<r;++n)gl(this,a[n],o[n],t[n]);return this}function ip(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else{for(var a=i-n||1,o=this._root,u,l;n>t||t>=i||r>e||e>=s;)switch(l=(e<r)<<1|t<n,u=new Array(4),u[l]=o,o=u,a*=2,l){case 0:i=n+a,s=r+a;break;case 1:n=i-a,s=r+a;break;case 2:i=n+a,r=s-a;break;case 3:n=i-a,r=s-a;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function sp(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function ap(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Dt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function op(t,e,n){var r,i=this._x0,s=this._y0,a,o,u,l,f=this._x1,d=this._y1,h=[],v=this._root,m,y;for(v&&h.push(new Dt(v,i,s,f,d)),n==null?n=1/0:(i=t-n,s=e-n,f=t+n,d=e+n,n*=n);m=h.pop();)if(!(!(v=m.node)||(a=m.x0)>f||(o=m.y0)>d||(u=m.x1)<i||(l=m.y1)<s))if(v.length){var p=(a+u)/2,_=(o+l)/2;h.push(new Dt(v[3],p,_,u,l),new Dt(v[2],a,_,p,l),new Dt(v[1],p,o,u,_),new Dt(v[0],a,o,p,_)),(y=(e>=_)<<1|t>=p)&&(m=h[h.length-1],h[h.length-1]=h[h.length-1-y],h[h.length-1-y]=m)}else{var $=t-+this._x.call(null,v.data),E=e-+this._y.call(null,v.data),g=$*$+E*E;if(g<n){var S=Math.sqrt(n=g);i=t-S,s=e-S,f=t+S,d=e+S,r=v.data}}return r}function lp(t){if(isNaN(f=+this._x.call(null,t))||isNaN(d=+this._y.call(null,t)))return this;var e,n=this._root,r,i,s,a=this._x0,o=this._y0,u=this._x1,l=this._y1,f,d,h,v,m,y,p,_;if(!n)return this;if(n.length)for(;;){if((m=f>=(h=(a+u)/2))?a=h:u=h,(y=d>=(v=(o+l)/2))?o=v:l=v,e=n,!(n=n[p=y<<1|m]))return this;if(!n.length)break;(e[p+1&3]||e[p+2&3]||e[p+3&3])&&(r=e,_=p)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):e?(s?e[p]=s:delete e[p],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[_]=n:this._root=n),this):(this._root=s,this)}function up(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function cp(){return this._root}function fp(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function hp(t){var e=[],n,r=this._root,i,s,a,o,u;for(r&&e.push(new Dt(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,s=n.x0,a=n.y0,o=n.x1,u=n.y1)&&r.length){var l=(s+o)/2,f=(a+u)/2;(i=r[3])&&e.push(new Dt(i,l,f,o,u)),(i=r[2])&&e.push(new Dt(i,s,f,l,u)),(i=r[1])&&e.push(new Dt(i,l,a,o,f)),(i=r[0])&&e.push(new Dt(i,s,a,l,f))}return this}function vp(t){var e=[],n=[],r;for(this._root&&e.push(new Dt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,a=r.x0,o=r.y0,u=r.x1,l=r.y1,f=(a+u)/2,d=(o+l)/2;(s=i[0])&&e.push(new Dt(s,a,o,f,d)),(s=i[1])&&e.push(new Dt(s,f,o,u,d)),(s=i[2])&&e.push(new Dt(s,a,d,f,l)),(s=i[3])&&e.push(new Dt(s,f,d,u,l))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function dp(t){return t[0]}function pp(t){return arguments.length?(this._x=t,this):this._x}function _p(t){return t[1]}function gp(t){return arguments.length?(this._y=t,this):this._y}function Us(t,e,n){var r=new Vs(e??dp,n??_p,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Vs(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Ya(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Ft=Us.prototype=Vs.prototype;Ft.copy=function(){var t=new Vs(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Ya(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Ya(r));return t};Ft.add=np;Ft.addAll=rp;Ft.cover=ip;Ft.data=sp;Ft.extent=ap;Ft.find=op;Ft.remove=lp;Ft.removeAll=up;Ft.root=cp;Ft.size=fp;Ft.visit=hp;Ft.visitAfter=vp;Ft.x=pp;Ft.y=gp;function Lt(t){return function(){return t}}function rn(t){return(t()-.5)*1e-6}function mp(t){return t.x+t.vx}function yp(t){return t.y+t.vy}function xp(t){var e,n,r,i=1,s=1;typeof t!="function"&&(t=Lt(t==null?1:+t));function a(){for(var l,f=e.length,d,h,v,m,y,p,_=0;_<s;++_)for(d=Us(e,mp,yp).visitAfter(o),l=0;l<f;++l)h=e[l],y=n[h.index],p=y*y,v=h.x+h.vx,m=h.y+h.vy,d.visit($);function $(E,g,S,N,P){var R=E.data,B=E.r,X=y+B;if(R){if(R.index>h.index){var at=v-R.x-R.vx,vt=m-R.y-R.vy,nt=at*at+vt*vt;nt<X*X&&(at===0&&(at=rn(r),nt+=at*at),vt===0&&(vt=rn(r),nt+=vt*vt),nt=(X-(nt=Math.sqrt(nt)))/nt*i,h.vx+=(at*=nt)*(X=(B*=B)/(p+B)),h.vy+=(vt*=nt)*X,R.vx-=at*(X=1-X),R.vy-=vt*X)}return}return g>v+X||N<v-X||S>m+X||P<m-X}}function o(l){if(l.data)return l.r=n[l.data.index];for(var f=l.r=0;f<4;++f)l[f]&&l[f].r>l.r&&(l.r=l[f].r)}function u(){if(e){var l,f=e.length,d;for(n=new Array(f),l=0;l<f;++l)d=e[l],n[d.index]=+t(d,l,e)}}return a.initialize=function(l,f){e=l,r=f,u()},a.iterations=function(l){return arguments.length?(s=+l,a):s},a.strength=function(l){return arguments.length?(i=+l,a):i},a.radius=function(l){return arguments.length?(t=typeof l=="function"?l:Lt(+l),u(),a):t},a}function wp(t){return t.index}function Wa(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function bp(t){var e=wp,n=d,r,i=Lt(30),s,a,o,u,l,f=1;t==null&&(t=[]);function d(p){return 1/Math.min(o[p.source.index],o[p.target.index])}function h(p){for(var _=0,$=t.length;_<f;++_)for(var E=0,g,S,N,P,R,B,X;E<$;++E)g=t[E],S=g.source,N=g.target,P=N.x+N.vx-S.x-S.vx||rn(l),R=N.y+N.vy-S.y-S.vy||rn(l),B=Math.sqrt(P*P+R*R),B=(B-s[E])/B*p*r[E],P*=B,R*=B,N.vx-=P*(X=u[E]),N.vy-=R*X,S.vx+=P*(X=1-X),S.vy+=R*X}function v(){if(a){var p,_=a.length,$=t.length,E=new Map(a.map((S,N)=>[e(S,N,a),S])),g;for(p=0,o=new Array(_);p<$;++p)g=t[p],g.index=p,typeof g.source!="object"&&(g.source=Wa(E,g.source)),typeof g.target!="object"&&(g.target=Wa(E,g.target)),o[g.source.index]=(o[g.source.index]||0)+1,o[g.target.index]=(o[g.target.index]||0)+1;for(p=0,u=new Array($);p<$;++p)g=t[p],u[p]=o[g.source.index]/(o[g.source.index]+o[g.target.index]);r=new Array($),m(),s=new Array($),y()}}function m(){if(a)for(var p=0,_=t.length;p<_;++p)r[p]=+n(t[p],p,t)}function y(){if(a)for(var p=0,_=t.length;p<_;++p)s[p]=+i(t[p],p,t)}return h.initialize=function(p,_){a=p,l=_,v()},h.links=function(p){return arguments.length?(t=p,v(),h):t},h.id=function(p){return arguments.length?(e=p,h):e},h.iterations=function(p){return arguments.length?(f=+p,h):f},h.strength=function(p){return arguments.length?(n=typeof p=="function"?p:Lt(+p),m(),h):n},h.distance=function(p){return arguments.length?(i=typeof p=="function"?p:Lt(+p),y(),h):i},h}const $p=1664525,kp=1013904223,Ua=4294967296;function Ep(){let t=1;return()=>(t=($p*t+kp)%Ua)/Ua}function Tp(t){return t.x}function zp(t){return t.y}var Mp=10,Ap=Math.PI*(3-Math.sqrt(5));function Np(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,a=.6,o=new Map,u=Bs(d),l=Lr("tick","end"),f=Ep();t==null&&(t=[]);function d(){h(),l.call("tick",e),n<r&&(u.stop(),l.call("end",e))}function h(y){var p,_=t.length,$;y===void 0&&(y=1);for(var E=0;E<y;++E)for(n+=(s-n)*i,o.forEach(function(g){g(n)}),p=0;p<_;++p)$=t[p],$.fx==null?$.x+=$.vx*=a:($.x=$.fx,$.vx=0),$.fy==null?$.y+=$.vy*=a:($.y=$.fy,$.vy=0);return e}function v(){for(var y=0,p=t.length,_;y<p;++y){if(_=t[y],_.index=y,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var $=Mp*Math.sqrt(.5+y),E=y*Ap;_.x=$*Math.cos(E),_.y=$*Math.sin(E)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function m(y){return y.initialize&&y.initialize(t,f),y}return v(),e={tick:h,restart:function(){return u.restart(d),e},stop:function(){return u.stop(),e},nodes:function(y){return arguments.length?(t=y,v(),o.forEach(m),e):t},alpha:function(y){return arguments.length?(n=+y,e):n},alphaMin:function(y){return arguments.length?(r=+y,e):r},alphaDecay:function(y){return arguments.length?(i=+y,e):+i},alphaTarget:function(y){return arguments.length?(s=+y,e):s},velocityDecay:function(y){return arguments.length?(a=1-y,e):1-a},randomSource:function(y){return arguments.length?(f=y,o.forEach(m),e):f},force:function(y,p){return arguments.length>1?(p==null?o.delete(y):o.set(y,m(p)),e):o.get(y)},find:function(y,p,_){var $=0,E=t.length,g,S,N,P,R;for(_==null?_=1/0:_*=_,$=0;$<E;++$)P=t[$],g=y-P.x,S=p-P.y,N=g*g+S*S,N<_&&(R=P,_=N);return R},on:function(y,p){return arguments.length>1?(l.on(y,p),e):l.on(y)}}}function Sp(){var t,e,n,r,i=Lt(-30),s,a=1,o=1/0,u=.81;function l(v){var m,y=t.length,p=Us(t,Tp,zp).visitAfter(d);for(r=v,m=0;m<y;++m)e=t[m],p.visit(h)}function f(){if(t){var v,m=t.length,y;for(s=new Array(m),v=0;v<m;++v)y=t[v],s[y.index]=+i(y,v,t)}}function d(v){var m=0,y,p,_=0,$,E,g;if(v.length){for($=E=g=0;g<4;++g)(y=v[g])&&(p=Math.abs(y.value))&&(m+=y.value,_+=p,$+=p*y.x,E+=p*y.y);v.x=$/_,v.y=E/_}else{y=v,y.x=y.data.x,y.y=y.data.y;do m+=s[y.data.index];while(y=y.next)}v.value=m}function h(v,m,y,p){if(!v.value)return!0;var _=v.x-e.x,$=v.y-e.y,E=p-m,g=_*_+$*$;if(E*E/u<g)return g<o&&(_===0&&(_=rn(n),g+=_*_),$===0&&($=rn(n),g+=$*$),g<a&&(g=Math.sqrt(a*g)),e.vx+=_*v.value*r/g,e.vy+=$*v.value*r/g),!0;if(v.length||g>=o)return;(v.data!==e||v.next)&&(_===0&&(_=rn(n),g+=_*_),$===0&&($=rn(n),g+=$*$),g<a&&(g=Math.sqrt(a*g)));do v.data!==e&&(E=s[v.data.index]*r/g,e.vx+=_*E,e.vy+=$*E);while(v=v.next)}return l.initialize=function(v,m){t=v,n=m,f()},l.strength=function(v){return arguments.length?(i=typeof v=="function"?v:Lt(+v),f(),l):i},l.distanceMin=function(v){return arguments.length?(a=v*v,l):Math.sqrt(a)},l.distanceMax=function(v){return arguments.length?(o=v*v,l):Math.sqrt(o)},l.theta=function(v){return arguments.length?(u=v*v,l):Math.sqrt(u)},l}function Cp(t){var e=Lt(.1),n,r,i;typeof t!="function"&&(t=Lt(t==null?0:+t));function s(o){for(var u=0,l=n.length,f;u<l;++u)f=n[u],f.vx+=(i[u]-f.x)*r[u]*o}function a(){if(n){var o,u=n.length;for(r=new Array(u),i=new Array(u),o=0;o<u;++o)r[o]=isNaN(i[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return s.initialize=function(o){n=o,a()},s.strength=function(o){return arguments.length?(e=typeof o=="function"?o:Lt(+o),a(),s):e},s.x=function(o){return arguments.length?(t=typeof o=="function"?o:Lt(+o),a(),s):t},s}function Ip(t){var e=Lt(.1),n,r,i;typeof t!="function"&&(t=Lt(t==null?0:+t));function s(o){for(var u=0,l=n.length,f;u<l;++u)f=n[u],f.vy+=(i[u]-f.y)*r[u]*o}function a(){if(n){var o,u=n.length;for(r=new Array(u),i=new Array(u),o=0;o<u;++o)r[o]=isNaN(i[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return s.initialize=function(o){n=o,a()},s.strength=function(o){return arguments.length?(e=typeof o=="function"?o:Lt(+o),a(),s):e},s.y=function(o){return arguments.length?(t=typeof o=="function"?o:Lt(+o),a(),s):t},s}function Pp(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Rp(t,e){return t[0]-e[0]||t[1]-e[1]}function Va(t){const e=t.length,n=[0,1];let r=2,i;for(i=2;i<e;++i){for(;r>1&&Pp(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Dp(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(Rp),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var s=Va(r),a=Va(i),o=a[0]===s[0],u=a[a.length-1]===s[s.length-1],l=[];for(e=s.length-1;e>=0;--e)l.push(t[r[s[e]][2]]);for(e=+o;e<a.length-u;++e)l.push(t[r[a[e]][2]]);return l}function Dn(t){return function(){return t}}function Lp(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new tp(e)}function Fp(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ml(t){this._context=t}ml.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Op(t){return new ml(t)}function qp(t){return t[0]}function Hp(t){return t[1]}function Xp(t,e){var n=Dn(!0),r=null,i=Op,s=null,a=Lp(o);t=typeof t=="function"?t:t===void 0?qp:Dn(t),e=typeof e=="function"?e:e===void 0?Hp:Dn(e);function o(u){var l,f=(u=Fp(u)).length,d,h=!1,v;for(r==null&&(s=i(v=a())),l=0;l<=f;++l)!(l<f&&n(d=u[l],l,u))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(d,l,u),+e(d,l,u));if(v)return s=null,v+""||null}return o.x=function(u){return arguments.length?(t=typeof u=="function"?u:Dn(+u),o):t},o.y=function(u){return arguments.length?(e=typeof u=="function"?u:Dn(+u),o):e},o.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Dn(!!u),o):n},o.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),o):i},o.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),o):r},o}function Ka(){}function ks(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function yl(t,e){this._context=t,this._k=(1-e)/6}yl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ks(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ks(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new yl(r,e)}return n.tension=function(r){return t(+r)},n})(0);function xl(t,e){this._context=t,this._k=(1-e)/6}xl.prototype={areaStart:Ka,areaEnd:Ka,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ks(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Bp=(function t(e){function n(r){return new xl(r,e)}return n.tension=function(r){return t(+r)},n})(0),ni=t=>()=>t;function Yp(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Be(t,e,n){this.k=t,this.x=e,this.y=n}Be.prototype={constructor:Be,scale:function(t){return t===1?this:new Be(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Be(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $i=new Be(1,0,0);Be.prototype;function is(t){t.stopImmediatePropagation()}function pr(t){t.preventDefault(),t.stopImmediatePropagation()}function Wp(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Up(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Ga(){return this.__zoom||$i}function Vp(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Kp(){return navigator.maxTouchPoints||"ontouchstart"in this}function Gp(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function Zp(){var t=Wp,e=Up,n=Gp,r=Vp,i=Kp,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],o=250,u=qv,l=Lr("start","zoom","end"),f,d,h,v=500,m=150,y=0,p=10;function _(x){x.property("__zoom",Ga).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",X).filter(i).on("touchstart.zoom",at).on("touchmove.zoom",vt).on("touchend.zoom touchcancel.zoom",nt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(x,F,z,q){var U=x.selection?x.selection():x;U.property("__zoom",Ga),x!==U?S(x,F,z,q):U.interrupt().each(function(){N(this,arguments).event(q).start().zoom(null,typeof F=="function"?F.apply(this,arguments):F).end()})},_.scaleBy=function(x,F,z,q){_.scaleTo(x,function(){var U=this.__zoom.k,Z=typeof F=="function"?F.apply(this,arguments):F;return U*Z},z,q)},_.scaleTo=function(x,F,z,q){_.transform(x,function(){var U=e.apply(this,arguments),Z=this.__zoom,k=z==null?g(U):typeof z=="function"?z.apply(this,arguments):z,b=Z.invert(k),C=typeof F=="function"?F.apply(this,arguments):F;return n(E($(Z,C),k,b),U,a)},z,q)},_.translateBy=function(x,F,z,q){_.transform(x,function(){return n(this.__zoom.translate(typeof F=="function"?F.apply(this,arguments):F,typeof z=="function"?z.apply(this,arguments):z),e.apply(this,arguments),a)},null,q)},_.translateTo=function(x,F,z,q,U){_.transform(x,function(){var Z=e.apply(this,arguments),k=this.__zoom,b=q==null?g(Z):typeof q=="function"?q.apply(this,arguments):q;return n($i.translate(b[0],b[1]).scale(k.k).translate(typeof F=="function"?-F.apply(this,arguments):-F,typeof z=="function"?-z.apply(this,arguments):-z),Z,a)},q,U)};function $(x,F){return F=Math.max(s[0],Math.min(s[1],F)),F===x.k?x:new Be(F,x.x,x.y)}function E(x,F,z){var q=F[0]-z[0]*x.k,U=F[1]-z[1]*x.k;return q===x.x&&U===x.y?x:new Be(x.k,q,U)}function g(x){return[(+x[0][0]+ +x[1][0])/2,(+x[0][1]+ +x[1][1])/2]}function S(x,F,z,q){x.on("start.zoom",function(){N(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){N(this,arguments).event(q).end()}).tween("zoom",function(){var U=this,Z=arguments,k=N(U,Z).event(q),b=e.apply(U,Z),C=z==null?g(b):typeof z=="function"?z.apply(U,Z):z,V=Math.max(b[1][0]-b[0][0],b[1][1]-b[0][1]),L=U.__zoom,T=typeof F=="function"?F.apply(U,Z):F,j=u(L.invert(C).concat(V/L.k),T.invert(C).concat(V/T.k));return function(J){if(J===1)J=T;else{var tt=j(J),ct=V/tt[2];J=new Be(ct,C[0]-tt[0]*ct,C[1]-tt[1]*ct)}k.zoom(null,J)}})}function N(x,F,z){return!z&&x.__zooming||new P(x,F)}function P(x,F){this.that=x,this.args=F,this.active=0,this.sourceEvent=null,this.extent=e.apply(x,F),this.taps=0}P.prototype={event:function(x){return x&&(this.sourceEvent=x),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(x,F){return this.mouse&&x!=="mouse"&&(this.mouse[1]=F.invert(this.mouse[0])),this.touch0&&x!=="touch"&&(this.touch0[1]=F.invert(this.touch0[0])),this.touch1&&x!=="touch"&&(this.touch1[1]=F.invert(this.touch1[0])),this.that.__zoom=F,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(x){var F=Ht(this.that).datum();l.call(x,this.that,new Yp(x,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:l}),F)}};function R(x,...F){if(!t.apply(this,arguments))return;var z=N(this,F).event(x),q=this.__zoom,U=Math.max(s[0],Math.min(s[1],q.k*Math.pow(2,r.apply(this,arguments)))),Z=qe(x);if(z.wheel)(z.mouse[0][0]!==Z[0]||z.mouse[0][1]!==Z[1])&&(z.mouse[1]=q.invert(z.mouse[0]=Z)),clearTimeout(z.wheel);else{if(q.k===U)return;z.mouse=[Z,q.invert(Z)],ai(this),z.start()}pr(x),z.wheel=setTimeout(k,m),z.zoom("mouse",n(E($(q,U),z.mouse[0],z.mouse[1]),z.extent,a));function k(){z.wheel=null,z.end()}}function B(x,...F){if(h||!t.apply(this,arguments))return;var z=x.currentTarget,q=N(this,F,!0).event(x),U=Ht(x.view).on("mousemove.zoom",C,!0).on("mouseup.zoom",V,!0),Z=qe(x,z),k=x.clientX,b=x.clientY;nl(x.view),is(x),q.mouse=[Z,this.__zoom.invert(Z)],ai(this),q.start();function C(L){if(pr(L),!q.moved){var T=L.clientX-k,j=L.clientY-b;q.moved=T*T+j*j>y}q.event(L).zoom("mouse",n(E(q.that.__zoom,q.mouse[0]=qe(L,z),q.mouse[1]),q.extent,a))}function V(L){U.on("mousemove.zoom mouseup.zoom",null),rl(L.view,q.moved),pr(L),q.event(L).end()}}function X(x,...F){if(t.apply(this,arguments)){var z=this.__zoom,q=qe(x.changedTouches?x.changedTouches[0]:x,this),U=z.invert(q),Z=z.k*(x.shiftKey?.5:2),k=n(E($(z,Z),q,U),e.apply(this,F),a);pr(x),o>0?Ht(this).transition().duration(o).call(S,k,q,x):Ht(this).call(_.transform,k,q,x)}}function at(x,...F){if(t.apply(this,arguments)){var z=x.touches,q=z.length,U=N(this,F,x.changedTouches.length===q).event(x),Z,k,b,C;for(is(x),k=0;k<q;++k)b=z[k],C=qe(b,this),C=[C,this.__zoom.invert(C),b.identifier],U.touch0?!U.touch1&&U.touch0[2]!==C[2]&&(U.touch1=C,U.taps=0):(U.touch0=C,Z=!0,U.taps=1+!!f);f&&(f=clearTimeout(f)),Z&&(U.taps<2&&(d=C[0],f=setTimeout(function(){f=null},v)),ai(this),U.start())}}function vt(x,...F){if(this.__zooming){var z=N(this,F).event(x),q=x.changedTouches,U=q.length,Z,k,b,C;for(pr(x),Z=0;Z<U;++Z)k=q[Z],b=qe(k,this),z.touch0&&z.touch0[2]===k.identifier?z.touch0[0]=b:z.touch1&&z.touch1[2]===k.identifier&&(z.touch1[0]=b);if(k=z.that.__zoom,z.touch1){var V=z.touch0[0],L=z.touch0[1],T=z.touch1[0],j=z.touch1[1],J=(J=T[0]-V[0])*J+(J=T[1]-V[1])*J,tt=(tt=j[0]-L[0])*tt+(tt=j[1]-L[1])*tt;k=$(k,Math.sqrt(J/tt)),b=[(V[0]+T[0])/2,(V[1]+T[1])/2],C=[(L[0]+j[0])/2,(L[1]+j[1])/2]}else if(z.touch0)b=z.touch0[0],C=z.touch0[1];else return;z.zoom("touch",n(E(k,b,C),z.extent,a))}}function nt(x,...F){if(this.__zooming){var z=N(this,F).event(x),q=x.changedTouches,U=q.length,Z,k;for(is(x),h&&clearTimeout(h),h=setTimeout(function(){h=null},v),Z=0;Z<U;++Z)k=q[Z],z.touch0&&z.touch0[2]===k.identifier?delete z.touch0:z.touch1&&z.touch1[2]===k.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(k=qe(k,this),Math.hypot(d[0]-k[0],d[1]-k[1])<p)){var b=Ht(this).on("dblclick.zoom");b&&b.apply(this,arguments)}}}return _.wheelDelta=function(x){return arguments.length?(r=typeof x=="function"?x:ni(+x),_):r},_.filter=function(x){return arguments.length?(t=typeof x=="function"?x:ni(!!x),_):t},_.touchable=function(x){return arguments.length?(i=typeof x=="function"?x:ni(!!x),_):i},_.extent=function(x){return arguments.length?(e=typeof x=="function"?x:ni([[+x[0][0],+x[0][1]],[+x[1][0],+x[1][1]]]),_):e},_.scaleExtent=function(x){return arguments.length?(s[0]=+x[0],s[1]=+x[1],_):[s[0],s[1]]},_.translateExtent=function(x){return arguments.length?(a[0][0]=+x[0][0],a[1][0]=+x[1][0],a[0][1]=+x[0][1],a[1][1]=+x[1][1],_):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},_.constrain=function(x){return arguments.length?(n=x,_):n},_.duration=function(x){return arguments.length?(o=+x,_):o},_.interpolate=function(x){return arguments.length?(u=x,_):u},_.on=function(){var x=l.on.apply(l,arguments);return x===l?_:x},_.clickDistance=function(x){return arguments.length?(y=(x=+x)*x,_):Math.sqrt(y)},_.tapDistance=function(x){return arguments.length?(p=+x,_):p},_}var jp=G('<div class="graph-section svelte-zf24ck"><div class="graph-container svelte-zf24ck"><svg id="graph" class="svelte-zf24ck"></svg></div></div>');function Qp(t,e){de(e,!1);const n=()=>Qt(Fs,"$graphData",s),r=()=>Qt(Ci,"$activeTypes",s),i=()=>Qt(pi,"$highlightedTokens",s),[s,a]=Ae();let o=rt(),u=rt(),l=null,f=$i,d=new Map,h=null,v=!1,m={x:0,y:0},y=null,p=[],_=rt(null);Si(()=>{O(u,Ht(c(o))),n()&&$(n(),r());const k=new ResizeObserver(()=>{n()&&$(n(),r())});return k.observe(c(o)),()=>{k.disconnect(),h&&cancelAnimationFrame(h),l&&l.stop()}}),cc(()=>{h&&cancelAnimationFrame(h),l&&l.stop()});function $(k,b){if(!c(u))return;c(u).selectAll("*").remove(),O(_,null);const C=c(o).clientWidth,V=c(o).clientHeight;c(u).attr("viewBox",[0,0,C,V]);const L=c(u).append("g").attr("class","graph-container-g");L.attr("transform",f),g(L,40),L.append("rect").attr("class","grid-bg").attr("x",-5e3).attr("y",-5e3).attr("width",1e4).attr("height",1e4).attr("fill","url(#grid)").on("touchstart",()=>{ke(Un).fromTouch&&(Ec(),L.selectAll(".link").classed("active",!1))});const T=Zp().scaleExtent([.3,3]).on("start",D=>{D.sourceEvent&&(v=!0,y={x:f.x,y:f.y})}).on("zoom",D=>{D.sourceEvent&&y&&(m.x=m.x*.6+(D.transform.x-y.x)*.4,m.y=m.y*.6+(D.transform.y-y.y)*.4,y={x:D.transform.x,y:D.transform.y}),f=D.transform,L.attr("transform",D.transform),ke(Un).fromTouch||ts(),l&&(Math.abs(m.x)>.5||Math.abs(m.y)>.5)&&l.alpha(.15).restart()}).on("end",()=>{v=!1,y=null});if(c(u).call(T),c(u).call(T.transform,f),F(c(u),T,C,V,b),!k||k.nodes.length===0){z(L,C,V);return}S(L);const j=k.nodes.filter(D=>b.has(D.type)),J=new Set(j.map(D=>D.id)),tt=j.map(D=>{const ge=d.get(D.id);return{...D,radius:D.isCenter?28:20,x:ge?ge.x:C/2+(Math.random()-.5)*100,y:ge?ge.y:V/2+(Math.random()-.5)*100}}),ct=new Map(tt.map(D=>[D.id,D])),dt=k.edges.filter(D=>J.has(D.from)&&J.has(D.to)).map(D=>({...D,source:ct.get(D.from),target:ct.get(D.to)})).filter(D=>D.source&&D.target);p=tt;const $t=tt.filter(D=>D.isCenter),zt=$t.length>1;l=Np(tt).force("link",bp(dt).id(D=>D.id).distance(140)).force("charge",Sp().strength(-300)).force("center",ep(C/2,V/2)).force("x",Cp(C/2).strength(.04)).force("y",Ip(V/2).strength(.04)).force("collision",xp().radius(D=>D.radius+8)).alphaDecay(.02).velocityDecay(.3),l.force("panInertia",()=>{tt.forEach(D=>{D.vx-=m.x*2.5,D.vy-=m.y*2.5}),m.x*=.92,m.y*=.92,Math.abs(m.x)<.01&&(m.x=0),Math.abs(m.y)<.01&&(m.y=0)}),zt&&nt(l,$t);let cn=null;zt&&(cn=L.append("path").attr("class","team-hull").attr("fill","rgba(0, 112, 243, 0.08)").attr("stroke","rgba(0, 112, 243, 0.25)").attr("stroke-width",2).attr("stroke-dasharray","8,4"));const tr=L.append("g"),{link:Nn,linkOverlay:Se}=N(tr,dt),Vt=L.append("defs");tt.forEach(D=>{Vt.append("clipPath").attr("id",`clip-${D.id.replace(/[^a-zA-Z0-9]/g,"_")}`).append("circle").attr("r",D.radius-2)});const te=P(L,tt,l,k);O(_,te),E(ke(pi)),l.on("tick",()=>{tt.forEach(D=>d.set(D.id,{x:D.x,y:D.y})),cn&&$t.length>=2&&x(cn,$t),Se.attr("x1",D=>D.source.x).attr("y1",D=>D.source.y).attr("x2",D=>D.target.x).attr("y2",D=>D.target.y),Nn.attr("x1",D=>D.source.x).attr("y1",D=>D.source.y).attr("x2",D=>D.target.x).attr("y2",D=>D.target.y),te.attr("transform",D=>`translate(${D.x},${D.y})`)})}function E(k){if(!c(_))return;const b=k&&k.size>0;c(_).classed("highlight",C=>b&&k.has(C.id)).classed("dimmed",C=>b&&!k.has(C.id)&&!C.isCenter),b&&c(_).filter(C=>k.has(C.id)).raise()}function g(k,b){const V=k.append("defs").append("pattern").attr("id","grid").attr("width",b).attr("height",b).attr("patternUnits","userSpaceOnUse");V.append("rect").attr("width",b).attr("height",b).attr("fill","#0a0a0a"),V.append("line").attr("x1",b).attr("y1",0).attr("x2",b).attr("y2",b).attr("stroke","#1a1a1a").attr("stroke-width",1),V.append("line").attr("x1",0).attr("y1",b).attr("x2",b).attr("y2",b).attr("stroke","#1a1a1a").attr("stroke-width",1)}function S(k){const b=k.append("defs");[{id:"equipped",color:"#f5a623"},{id:"cooccur",color:"#666666"},{id:"positive",color:"#00d9a5"},{id:"negative",color:"#ff4444"}].forEach(({id:V,color:L})=>{b.append("marker").attr("id",`arrow-${V}`).attr("viewBox","0 -5 10 10").attr("refX",28).attr("refY",0).attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("fill",L).attr("d","M0,-5L10,0L0,5")})}function N(k,b,C){const V=k.selectAll(".link-visible").data(b).join("line").attr("class",T=>{const j=["link",T.type];return T.delta!==void 0&&j.push(T.delta<=0?"positive":"negative"),j.join(" ")}).attr("stroke-width",T=>T.delta!==void 0?Math.max(2,Math.min(6,Math.abs(T.delta)*5)):T.type==="equipped"?3:1.5).attr("marker-end",T=>T.delta!==void 0?`url(#arrow-${T.delta<=0?"positive":"negative"})`:`url(#arrow-${T.type})`),L=k.selectAll(".link-overlay").data(b).join("line").attr("class","link-overlay").on("mouseover",(T,j)=>{V.filter(J=>J===j).classed("active",!0),at(T,j)}).on("mouseout",(T,j)=>{V.filter(J=>J===j).classed("active",!1),ts()}).on("touchstart",function(T,j){T.preventDefault(),T.stopPropagation(),V.classed("active",!1),V.filter(J=>J===j).classed("active",!0),at(T,j,!0)},{passive:!1});return{link:V,linkOverlay:L}}function P(k,b,C,V){const L=k.append("g").selectAll("g").data(b).join("g").attr("class",T=>`node ${T.type} ${T.isCenter?"center":""}`).call(R(C)).on("click",(T,j)=>B(T,j,V)).on("mouseover",(T,j)=>X(T,j)).on("mouseout",ts).on("touchstart",function(T,j){T.preventDefault(),T.stopPropagation(),X(T,j,!0)},{passive:!1});return L.append("circle").attr("class","node-bg").attr("r",T=>T.radius),L.append("circle").attr("class","node-ring").attr("r",T=>T.radius),L.each(function(T){if(Re(T.type,T.label))Ht(this).append("circle").attr("class","node-fallback").attr("r",T.radius-4);else{const j=Bo(T.type,T.label);j&&Ht(this).append("image").attr("class","node-icon").attr("x",-(T.radius-2)).attr("y",-(T.radius-2)).attr("width",(T.radius-2)*2).attr("height",(T.radius-2)*2).attr("clip-path",`url(#clip-${T.id.replace(/[^a-zA-Z0-9]/g,"_")})`).attr("href",j).attr("preserveAspectRatio","xMidYMid slice").on("error",function(){yr(T.type,T.label),Ht(this).remove(),Ht(this.parentNode).append("circle").attr("class","node-fallback").attr("r",T.radius-4)})}}),L.append("text").attr("dy",T=>T.radius+16).text(T=>Xe(T.type,T.label)),L}function R(k){return dv().on("start",(b,C)=>{b.active||k.alphaTarget(.3).restart(),C.fx=C.x,C.fy=C.y}).on("drag",(b,C)=>{C.fx=b.x,C.fy=b.y}).on("end",(b,C)=>{b.active||k.alphaTarget(0),C.fx=null,C.fy=null})}function B(k,b,C){k.stopPropagation();const V=C.edges.find(L=>(L.from===b.id||L.to===b.id)&&!b.isCenter);V?_i(V.token):b.isCenter||_i(b.id)}function X(k,b,C=!1){const{x:V,y:L}=vt(k);$a(V,L,{type:"node",title:Xe(b.type,b.label),nodeType:b.type,isCenter:b.isCenter},C)}function at(k,b,C=!1){const{x:V,y:L}=vt(k);let T=b.token.slice(2);if(b.token.startsWith("E:")){const[j,J]=b.token.slice(2).split("|");T=`${Xe("unit",j)} → ${Xe("item",J)}`}$a(V,L,{type:"edge",title:T,delta:b.delta,avgWith:b.avg_with,avgBase:b.avg_base,nWith:b.n_with,nBase:b.n_base},C)}function vt(k){let b,C;return k.touches?.length>0?(b=k.touches[0].pageX,C=k.touches[0].pageY):k.changedTouches?.length>0?(b=k.changedTouches[0].pageX,C=k.changedTouches[0].pageY):(b=k.pageX,C=k.pageY),{x:b+12,y:C+12}}function nt(k,b){k.force("centerCluster",()=>{let V=0,L=0;b.forEach(T=>{V+=T.x||0,L+=T.y||0}),V/=b.length,L/=b.length,b.forEach(T=>{T.vx+=(V-T.x)*.03,T.vy+=(L-T.y)*.03});for(let T=0;T<b.length;T++)for(let j=T+1;j<b.length;j++){const J=b[T],tt=b[j],ct=tt.x-J.x,dt=tt.y-J.y,$t=Math.sqrt(ct*ct+dt*dt)||1;if($t<120){const zt=(120-$t)*.5/$t;J.vx-=ct*zt,J.vy-=dt*zt,tt.vx+=ct*zt,tt.vy+=dt*zt}}})}function x(k,b){const V=b.map(L=>[L.x,L.y]);if(b.length===2){const[L,T]=V,j=T[0]-L[0],J=T[1]-L[1],tt=Math.sqrt(j*j+J*J),ct=-J/tt*45,dt=j/tt*45;k.attr("d",`
                M ${L[0]+ct} ${L[1]+dt}
                L ${T[0]+ct} ${T[1]+dt}
                A 45 45 0 0 1 ${T[0]-ct} ${T[1]-dt}
                L ${L[0]-ct} ${L[1]-dt}
                A 45 45 0 0 1 ${L[0]+ct} ${L[1]+dt} Z
            `)}else{const L=Dp(V);if(L){const T=Ta(L,tt=>tt[0]),j=Ta(L,tt=>tt[1]),J=L.map(tt=>{const ct=tt[0]-T,dt=tt[1]-j,$t=Math.sqrt(ct*ct+dt*dt),zt=($t+45)/$t;return[T+ct*zt,j+dt*zt]});k.attr("d",Xp().curve(Bp.tension(.7))(J))}}}function F(k,b,C,V,L){h&&cancelAnimationFrame(h);const T=.02,j=.85;function J(){if(h=requestAnimationFrame(J),v||!p.length)return;let tt=1/0,ct=-1/0,dt=1/0,$t=-1/0;if(p.forEach(ne=>{L.has(ne.type)&&(ne.x<tt&&(tt=ne.x),ne.x>ct&&(ct=ne.x),ne.y<dt&&(dt=ne.y),ne.y>$t&&($t=ne.y))}),tt===1/0)return;const zt=60;tt-=zt,ct+=zt,dt-=zt,$t+=zt;const cn=ct-tt,tr=$t-dt,Nn=(tt+ct)/2,Se=(dt+$t)/2,{k:Vt,x:te,y:D}=f,ge=-te/Vt,qr=-D/Vt,Di=C/Vt,Li=V/Vt,I=Math.max(0,Math.min(ct,ge+Di)-Math.max(tt,ge)),et=Math.max(0,Math.min($t,qr+Li)-Math.max(dt,qr)),ft=I<=0||et<=0,Ot=C*j/Math.max(cn,100),me=V*j/Math.max(tr,100);let It=Math.max(.3,Math.min(2.5,Math.min(Ot,me)));const ee=Vt<=It*1.1;if(!ft&&!ee)return;const Fi=C/2-Nn*It,Oi=V/2-Se*It,er=Vt+(It-Vt)*T,nr=te+(Fi-te)*T,Hr=D+(Oi-D)*T;(Math.abs(er-Vt)>1e-4||Math.abs(nr-te)>.1||Math.abs(Hr-D)>.1)&&k.call(b.transform,$i.translate(nr,Hr).scale(er))}J()}function z(k,b,C){k.append("foreignObject").attr("x",b/2-200).attr("y",C/2-60).attr("width",400).attr("height",120).append("xhtml:div").attr("class","empty-state").html(`
                <div class="empty-state-title">No data to display</div>
                <div class="empty-state-text">Search and select units, items, or traits to visualize relationships</div>
            `)}kt(()=>(c(u),n(),r()),()=>{c(u)&&n()&&$(n(),r())}),kt(()=>(c(_),i()),()=>{c(_)&&E(i())}),An(),Me();var q=jp(),U=w(q),Z=w(U);Do(Z,k=>O(o,k),()=>c(o)),Y(t,q),pe(),a()}var Jp=G('<div class="legend svelte-1wfxrff"><div class="legend-group svelte-1wfxrff"><div class="legend-group-title svelte-1wfxrff">Node Types</div> <div class="legend-items svelte-1wfxrff"><button><div class="legend-dot unit svelte-1wfxrff"></div> <span>Unit</span></button> <button><div class="legend-dot item svelte-1wfxrff"></div> <span>Item</span></button> <button><div class="legend-dot trait svelte-1wfxrff"></div> <span>Trait</span></button></div></div> <div class="legend-group svelte-1wfxrff"><div class="legend-group-title svelte-1wfxrff">Placement Impact</div> <div class="legend-items svelte-1wfxrff"><div class="legend-item static svelte-1wfxrff"><div class="legend-line positive svelte-1wfxrff"></div> <span>Improves placement</span></div> <div class="legend-item static svelte-1wfxrff"><div class="legend-line negative svelte-1wfxrff"></div> <span>Worsens placement</span></div></div></div></div>');function t_(t,e){de(e,!1);const n=()=>Qt(Ci,"$activeTypes",r),[r,i]=Ae(),s=rt(),a=rt(),o=rt();kt(()=>n(),()=>{O(s,!n().has("unit"))}),kt(()=>n(),()=>{O(a,!n().has("item"))}),kt(()=>n(),()=>{O(o,!n().has("trait"))}),An(),Me();var u=Jp(),l=w(u),f=M(w(l),2),d=w(f);let h;var v=M(d,2);let m;var y=M(v,2);let p;st(()=>{h=bt(d,1,"legend-item svelte-1wfxrff",null,h,{disabled:c(s)}),m=bt(v,1,"legend-item svelte-1wfxrff",null,m,{disabled:c(a)}),p=bt(y,1,"legend-item svelte-1wfxrff",null,p,{disabled:c(o)})}),ut("click",d,()=>On("unit")),ut("click",v,()=>On("item")),ut("click",y,()=>On("trait")),Y(t,u),pe(),i()}var e_=G('<div class="tooltip-title svelte-11extwn"> </div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">Type</span> <span class="value svelte-11extwn"> </span></div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">Action</span> <span class="value svelte-11extwn"> </span></div>',1),n_=G('<div class="tooltip-title svelte-11extwn"> </div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">Placement Impact</span> <span> </span></div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">With this combo</span> <span class="value svelte-11extwn"> </span></div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">Base average</span> <span class="value svelte-11extwn"> </span></div> <div class="tooltip-row svelte-11extwn"><span class="label svelte-11extwn">Sample size</span> <span class="value svelte-11extwn"> </span></div>',1),r_=G('<div class="tooltip svelte-11extwn"><!></div>');function i_(t,e){de(e,!1);const n=()=>Qt(Un,"$tooltip",r),[r,i]=Ae(),s=rt();kt(()=>n(),()=>{O(s,`
        display: ${n().visible?"block":"none"};
        left: ${n().x}px;
        top: ${n().y}px;
    `)}),An(),Me();var a=r_(),o=w(a);{var u=l=>{var f=vi(),d=be(f);{var h=m=>{var y=e_(),p=be(y),_=w(p),$=M(p,2),E=M(w($),2),g=w(E),S=M($,2),N=M(w(S),2),P=w(N);st(()=>{Q(_,(n(),A(()=>n().content.title))),Q(g,(n(),A(()=>n().content.nodeType))),Q(P,(n(),A(()=>n().content.isCenter?"Center node":"Click to add filter")))}),Y(m,y)},v=m=>{var y=vi(),p=be(y);{var _=$=>{var E=n_(),g=be(E),S=w(g),N=M(g,2),P=M(w(N),2);let R;var B=w(P),X=M(N,2),at=M(w(X),2),vt=w(at),nt=M(X,2),x=M(w(nt),2),F=w(x),z=M(nt,2),q=M(w(z),2),U=w(q);st((Z,k,b,C,V)=>{Q(S,(n(),A(()=>n().content.title))),R=bt(P,1,"value impact svelte-11extwn",null,R,{positive:n().content.delta<=0,negative:n().content.delta>0}),Q(B,`${n(),A(()=>n().content.delta>0?"+":"")??""}${Z??""}`),Q(vt,k),Q(F,b),Q(U,`${C??""} / ${V??""}`)},[()=>(n(),A(()=>n().content.delta.toFixed(2))),()=>(n(),A(()=>n().content.avgWith.toFixed(2))),()=>(n(),A(()=>n().content.avgBase.toFixed(2))),()=>(n(),A(()=>n().content.nWith.toLocaleString())),()=>(n(),A(()=>n().content.nBase.toLocaleString()))]),Y($,E)};_t(p,$=>{n(),A(()=>n().content.type==="edge")&&$(_)},!0)}Y(m,y)};_t(d,m=>{n(),A(()=>n().content.type==="node")?m(h):m(v,!1)})}Y(l,f)};_t(o,l=>{n(),A(()=>n().content)&&l(u)})}st(()=>pn(a,c(s))),Y(t,a),pe(),i()}var s_=G('<div class="container svelte-1n46o8q"><!> <div class="control-panel svelte-1n46o8q"><div class="control-panel-top svelte-1n46o8q"><!> <!> <!></div> <div class="control-panel-bottom svelte-1n46o8q"><!> <!></div></div> <div class="main-row svelte-1n46o8q"><!> <!></div> <!></div> <!>',1);function a_(t,e){de(e,!1);const n=()=>Qt(Ge,"$selectedTokens",i),r=()=>Qt(vs,"$topK",i),[i,s]=Ae();let a=rt(!1);async function o(R,B){try{const X=await mc(R,B);Fs.set(X)}catch(X){console.error("Failed to fetch graph:",X)}}Si(async()=>{await zc(),O(a,!0),await o(n(),r())}),kt(()=>(c(a),n(),r()),()=>{c(a)&&o(n(),r())}),An(),Me();var u=s_(),l=be(u),f=w(l);_c(f);var d=M(f,2),h=w(d),v=w(h);Pc(v,{});var m=M(v,2);Dc(m,{});var y=M(m,2);Fc(y,{});var p=M(h,2),_=w(p);Yc(_,{});var $=M(_,2);Uc($,{$$events:{change:()=>o(n(),r())}});var E=M(d,2),g=w(E);Qp(g,{});var S=M(g,2);Tf(S,{});var N=M(E,2);t_(N,{});var P=M(l,2);i_(P,{}),Y(t,u),pe(),s()}Uu(a_,{target:document.getElementById("app")});
